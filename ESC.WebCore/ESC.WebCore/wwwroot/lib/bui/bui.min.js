//BUI +
//BUI.Cookie
//BUI.Data.Store +
//BUI.Mask +
//BUI.List.ChildList +
//BUI.Toolbar.BarItem  +
//BUI.Overlay
//BUI.Menu.SideMenu
//BUI.Picker
//BUI.Select.Select
//BUI.Calendar.Resource
//BUI.Layout.Item
//BUI.Tooltip.Tip
//BUI.Tree.TreeList
//BUI.Tab.TabPanel
//BUI.Slider
//BUI.Form.Rule
//BUI.Grid.SimpleGrid
(function(e){var h=window,g=document,c=Object.prototype.toString;h.BUI=h.BUI||{};e.extend(BUI,{version:"3.3.0",isFunction:function(b){return"function"===typeof b},isArray:"isArray"in Array?Array.isArray:function(b){return"[object Array]"===c.call(b)},isDate:function(b){return"[object Date]"===c.call(b)},isObject:"[object Object]"===c.call(null)?function(b){return null!==b&&void 0!==b&&"[object Object]"===c.call(b)&&void 0===b.ownerDocument}:function(b){return"[object Object]"===c.call(b)},isNumeric:function(b){return!isNaN(parseFloat(b))&&isFinite(b)},isString:function(b){return"string"===typeof b},isNumber:function(b){return"number"===typeof b},isBoolean:function(b){return"boolean"===typeof b},isNullOrEmpty:function(b){return b?(b=b.toString().replace(/(^\s*)|(\s*$)/g,""),"null"==b||""==b?!0:!1):0===b||!1===b?!1:!0},augment:function(b,a){if(!BUI.isFunction(b))return b;for(var d=1;d<arguments.length;d++)BUI.mix(b.prototype,arguments[d].prototype||arguments[d]);return b},cloneObject:function(b){var a=BUI.isArray(b)?[]:{};return BUI.mix(!0,a,b)},error:function(b){if(BUI.debug)throw Error(b);},extend:function(b,a,d,f){BUI.isFunction(a)||(d=a,a=b,b=function(){});var c;c=Object.create?function(a,d){return Object.create(a,{constructor:{value:d}})}:function(a,d){function b(){}b.prototype=a;var f=new b;f.constructor=d;return f};var e=c(a.prototype,b);b.prototype=BUI.mix(e,b.prototype);b.superclass=c(a.prototype,a);BUI.mix(e,d);BUI.mix(b,f);return b},guid:function(){var b={};return function(a){a=a||BUI.prefix+"guid";b[a]=b[a]?b[a]+1:1;return a+b[a]}}(),log:function(b){BUI.debug&&h.console&&h.console.log&&h.console.log(b)},merge:function(){var b=e.makeArray(arguments),a=b[0];BUI.isBoolean(a)?(b.shift(),b.unshift({}),b.unshift(a)):b.unshift({});return BUI.mix.apply(null,b)},mix:function(){return e.extend.apply(null,arguments)},mixAttrs:function(b,a){for(var d in a)a.hasOwnProperty(d)&&(b[d]=b[d]||{},BUI.mixAttr(b[d],a[d]))},mixAttr:function(b,a){for(var d in a)a.hasOwnProperty(d)&&("value"==d?BUI.isObject(a[d])?(b[d]=b[d]||{},BUI.mix(b[d],a[d])):BUI.isArray(a[d])?(b[d]=b[d]||[],b[d]=b[d].concat(a[d])):b[d]=a[d]:b[d]=a[d])},namespace:function(b,a){a=a||BUI;if(!b)return a;for(var d=b.split("."),f=a,c=0;c<d.length;c++){var e=d[c];f[e]||(f[e]={});f=f[e]}return f},prefix:"bui-",substitute:function(b,a,d){return BUI.isString(b)&&(BUI.isObject(a)||BUI.isArray(a))?b.replace(d||/\\?\{([^{}]+)\}/g,function(d,b){return"\\"===d.charAt(0)?d.slice(1):void 0===a[b]?"":a[b]}):b},unparam:function(b){if("string"!=typeof b||!(b=e.trim(b)))return{};b=b.split("\x26");for(var a,d={},f=b.length-1;0<=f;f--)a=b[f].split("\x3d"),d[a[0]]=decodeURIComponent(a[1]);return d},ucfirst:function(b){b+="";return b.charAt(0).toUpperCase()+b.substring(1)},isInView:function(b){var a=b.left;b=b.top;var d=BUI.viewportWidth(),f=BUI.viewportHeight(),c=BUI.scrollTop(),e=BUI.scrollLeft();return a<e||a>e+d||b<c||b>c+f?!1:!0},isInVerticalView:function(b){var a=BUI.viewportHeight(),d=BUI.scrollTop();return b<d||b>d+a?!1:!0},isInHorizontalView:function(b){var a=BUI.viewportWidth(),d=BUI.scrollLeft();return b<d||b>d+a?!1:!0},viewportWidth:function(){return e(window).width()},viewportHeight:function(){return e(window).height()},scrollLeft:function(){return e(window).scrollLeft()},scrollTop:function(){return e(window).scrollTop()},docWidth:function(){return Math.max(this.viewportWidth(),g.documentElement.scrollWidth,g.body.scrollWidth)},docHeight:function(){return Math.max(this.viewportHeight(),g.documentElement.scrollHeight,g.body.scrollHeight)},each:function(b,a){b&&e.each(b,function(d,b){return a(b,d)})},wrapBehavior:function(b,a){return b["__bui_wrap_"+a]=function(d){if(!b.get("disabled"))return b[a](d)}},getWrapBehavior:function(b,a){return b["__bui_wrap_"+a]},setValue:function(b,a,d){if(!b&&!a)return b;a=a.split(".");for(var f=b,c=a.length,e=0;e<c&&f&&BUI.isObject(f);e++){var n=a[e];if(e===c-1){f[n]=d;break}f[n]||(f[n]={});f=f[n]}return b},getValue:function(b,a){if(!b&&!a)return null;for(var d=a.split("."),f=b,c=d.length,e=null,n=0;n<c&&f&&BUI.isObject(f);n++){var m=d[n];if(n===c-1){e=f[m];break}if(!f[m])break;f=f[m]}return e}})})(jQuery);(function(e,h){function g(a){return 10>a?"0"+a:a}function c(){return this.valueOf()}function b(a){m.lastIndex=0;return m.test(a)?'"'+a.replace(m,function(a){var d=u[a];return"string"===typeof d?d:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,f){var c,k,e,l,n=p,m,g=f[d];g&&"object"===typeof g&&"function"===typeof g.toJSON&&(g=g.toJSON(d));"function"===typeof q&&(g=q.call(f,d,g));switch(typeof g){case "string":return b(g);case "number":return isFinite(g)?String(g):"null";case "boolean":case "null":return String(g);case "object":if(!g)return"null";p+=r;m=[];if("[object Array]"===Object.prototype.toString.apply(g)){l=g.length;for(c=0;c<l;c+=1)m[c]=a(c,g)||"null";e=0===m.length?"[]":p?"[\n"+p+m.join(",\n"+p)+"\n"+n+"]":"["+m.join(",")+"]";p=n;return e}if(q&&"object"===typeof q)for(l=q.length,c=0;c<l;c+=1)"string"===typeof q[c]&&(k=q[c],(e=a(k,g))&&m.push(b(k)+(p?": ":":")+e));else for(k in g)Object.prototype.hasOwnProperty.call(g,k)&&(e=a(k,g))&&m.push(b(k)+(p?": ":":")+e);e=0===m.length?"{}":p?"{\n"+p+m.join(",\n"+p)+"\n"+n+"}":"{"+m.join(",")+"}";p=n;return e}}var d=window.JSON||{},f=/^[\],:{}\s]*$/,k=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,l=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,n=/(?:^|:|,)(?:\s*\[)+/g,m=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+g(this.getUTCMonth()+1)+"-"+g(this.getUTCDate())+"T"+g(this.getUTCHours())+":"+g(this.getUTCMinutes())+":"+g(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=c,Number.prototype.toJSON=c,String.prototype.toJSON=c);var p,r,u,q;"function"!==typeof d.stringify&&(u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},d.stringify=function(d,b,f){var c;r=p="";if("number"===typeof f)for(c=0;c<f;c+=1)r+=" ";else"string"===typeof f&&(r=f);if((q=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return a("",{"":d})});"function"!==typeof d.parse&&(d.parse=function(a,d){function b(a,f){var c,k,e=a[f];if(e&&"object"===typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(k=b(e,c),void 0!==k?e[c]=k:delete e[c]);return d.call(a,f,e)}var c;a=String(a);t.lastIndex=0;t.test(a)&&(a=a.replace(t,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(f.test(a.replace(k,"@").replace(l,"]").replace(n,"")))return c=eval("("+a+")"),"function"===typeof d?b({"":c},""):c;throw new SyntaxError("JSON.parse");});e.JSON=d})(window.BUI,jQuery);(function(e){function h(a,d){if(a instanceof Date)return a;if("undefined"==typeof d||null==d||""==d){for(var b=["y-m-d","yyyy-mm-dd","yyyy-mm-dd HH:MM:ss","H:M:s"],c=0;c<b.length;c++){var e=h(a,b[c]);if(null!=e)return e}return null}a+="";for(var c=b=0,n="",m="",g,n=new Date,p=n.getYear(),r=n.getMonth()+1,u=1,q=0,v=0,w=0,y=function(a,d,b,f){for(;f>=b;f--){var c=a.substring(d,d+f);if(c.length<b)break;if(/^\d*$/.test(c))return c}return null};c<d.length;){n=d.charAt(c);for(m="";d.charAt(c)==n&&c<d.length;)m+=d.charAt(c++);if("yyyy"==m||"yy"==m||"y"==m){"yyyy"==m&&(g=e=4);"yy"==m&&(g=e=2);"y"==m&&(e=2,g=4);p=y(a,b,e,g);if(null==p)return null;b+=p.length;2==p.length&&(p=70<p?1900+(p-0):2E3+(p-0))}else if("mm"==m||"m"==m){r=y(a,b,m.length,2);if(null==r||1>r||12<r)return null;b+=r.length}else if("dd"==m||"d"==m){u=y(a,b,m.length,2);if(null==u||1>u||31<u)return null;b+=u.length}else if("hh"==m||"h"==m){q=y(a,b,m.length,2);if(null==q||1>q||12<q)return null;b+=q.length}else if("HH"==m||"H"==m){q=y(a,b,m.length,2);if(null==q||0>q||23<q)return null;b+=q.length}else if("MM"==m||"M"==m){v=y(a,b,m.length,2);if(null==v||0>v||59<v)return null;b+=v.length}else if("ss"==m||"s"==m){w=y(a,b,m.length,2);if(null==w||0>w||59<w)return null;b+=w.length}else{if(a.substring(b,b+m.length)!=m)return null;b+=m.length}}if(b!=a.length)return null;if(2==r)if(0==p%4&&0!=p%100||0==p%400){if(29<u)return null}else if(28<u)return null;return(4==r||6==r||9==r||11==r)&&30<u?null:new Date(p,r-1,u,q,v,w)}function g(a,d,b){b=new Date(b);isNaN(b)&&(b=new Date);d=parseInt(d,10);switch(a){case "s":b=new Date(b.getTime()+1E3*d);break;case "n":b=new Date(b.getTime()+6E4*d);break;case "h":b=new Date(b.getTime()+36E5*d);break;case "d":b=new Date(b.getTime()+864E5*d);break;case "w":b=new Date(b.getTime()+6048E5*d);break;case "m":b=new Date(b.getFullYear(),b.getMonth()+d,b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds());break;case "y":b=new Date(b.getFullYear()+d,b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds())}return b}var c=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,b=function(){var a=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,d=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,b=/[^-+\dA-Z]/g,c=function(a,d){a=String(a);for(d=d||2;a.length<d;)a="0"+a;return a},e={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy\u5e74mm\u6708dd\u65e5",localShortDateTime:"yy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localLongDate:"yyyy\u5e74mm\u6708dd\u65e5",localLongDateTime:"yyyy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localFullDate:"yyyy\u5e74mm\u6708dd\u65e5 w",localFullDateTime:"yyyy\u5e74mm\u6708dd\u65e5 w hh:MM:ss TT"},n="Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday \u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),m="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ");return function(f,k,l){1!==arguments.length||"[object String]"!==Object.prototype.toString.call(f)||/\d/.test(f)||(k=f,f=void 0);f=f?new Date(f):new Date;if(isNaN(f))throw SyntaxError("invalid date");k=String(e[k]||k||e["default"]);"UTC:"===k.slice(0,4)&&(k=k.slice(4),l=!0);var g=l?"getUTC":"get",h=f[g+"Date"](),t=f[g+"Day"](),r=f[g+"Month"](),p=f[g+"FullYear"](),x=f[g+"Hours"](),A=f[g+"Minutes"](),B=f[g+"Seconds"](),g=f[g+"Milliseconds"](),z=l?0:f.getTimezoneOffset(),C={d:h,dd:c(h,void 0),ddd:n[t],dddd:n[t+7],w:n[t+14],m:r+1,mm:c(r+1,void 0),mmm:m[r],mmmm:m[r+12],yy:String(p).slice(2),yyyy:p,h:x%12||12,hh:c(x%12||12,void 0),H:x,HH:c(x,void 0),M:A,MM:c(A,void 0),s:B,ss:c(B,void 0),l:c(g,3),L:c(99<g?Math.round(g/10):g,void 0),t:12>x?"a":"p",tt:12>x?"am":"pm",T:12>x?"A":"P",TT:12>x?"AM":"PM",Z:l?"UTC":(String(f).match(d)||[""]).pop().replace(b,""),o:(0<z?"-":"+")+c(100*Math.floor(Math.abs(z)/60)+Math.abs(z)%60,4),S:["th","st","nd","rd"][3<h%10?0:(10!==h%100-h%10)*h%10]};return k.replace(a,function(a){return a in C?C[a]:a.slice(1,a.length-1)})}}();e.Date={add:function(a,d,b){return g(a,d,b)},addHour:function(a,d){return g("h",a,d)},addMinute:function(a,d){return g("n",a,d)},addSecond:function(a,d){return g("s",a,d)},addDay:function(a,d){return g("d",a,d)},addWeek:function(a,d){return g("w",a,d)},addMonths:function(a,d){return g("m",a,d)},addYear:function(a,d){return g("y",a,d)},isDateEquals:function(a,d){return a.getFullYear()===d.getFullYear()&&a.getMonth()===d.getMonth()&&a.getDate()===d.getDate()},isEquals:function(a,d){return a==d?!0:a&&d&&a.getTime&&d.getTime?a.getTime()==d.getTime():!1},isDateString:function(a){return c.test(a)},format:function(a,d,f){return b(a,d,f)},parse:function(a,d){e.isString(a)&&(a=a.replace("/","-"));return h(a,d)},today:function(){var a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},getDate:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())}}})(window.BUI);(function(e){var h={peek:function(e){return e[e.length-1]},indexOf:function(e,c,b){if(c.indexOf)return c.indexOf(e,b);b=+b||0;Infinity===Math.abs(b)&&(b=0);if(b>=c.length)return-1;for(b=Math.max(0<=b?b:c.length-Math.abs(b),0);b<c.length;){if(b in c&&c[b]===e)return b;b++}return-1},contains:function(e,c){return c.includes?c.includes(e):0<=h.indexOf(e,c)},each:function(g,c){return g.forEach?(g.forEach(c),g):e.each(g,c)},equals:function(e,c){if(e==c)return!0;if(!e||!c||e.length!=c.length)return!1;for(var b=!0,a=0;a<e.length;a++)if(e[a]!==c[a]){b=!1;break}return b},filter:function(e,c){if(e.filter)return e.filter(c);var b=[];h.each(e,function(a,d){c(a,d)&&b.push(a)});return b},map:function(e,c){if(e.map)return e.map(c);var b=[];h.each(e,function(a,d){b.push(c(a,d))});return b},find:function(e,c){if(e.find)return e.find(c);var b=h.findIndex(e,c);return 0>b?null:e[b]},findIndex:function(e,c){var b=-1;h.each(e,function(a,d){if(c(a,d))return b=d,!1});return b},isEmpty:function(e){return 0==e.length},add:function(e,c){e.push(c)},addAt:function(e,c,b){h.splice(e,b,0,c)},empty:function(e){if(!(e instanceof Array))for(var c=e.length-1;0<=c;c--)delete e[c];e.length=0},remove:function(e,c){var b=h.indexOf(c,e),a;(a=0<=b)&&h.removeAt(e,b);return a},removeAt:function(e,c){return 1==h.splice(e,c,1).length},slice:function(e,c,b){return 2>=arguments.length?Array.prototype.slice.call(e,c):Array.prototype.slice.call(e,c,b)},splice:function(e,c,b,a){return Array.prototype.splice.apply(e,h.slice(arguments,1))}};e.Array=h})(window.BUI);(function(e){e.KeyCode={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123}})(window.BUI);(function(e,h){var g=e.Array,c=function(){this._init()};e.augment(c,{_functions:null,_init:function(){this._functions=[]},add:function(a){this._functions.push(a)},remove:function(a){var d=this._functions;index=g.indexOf(a,d);0<=index&&d.splice(index,1)},empty:function(){this._functions.splice(0,this._functions.length)},pause:function(){this._paused=!0},resume:function(){this._paused=!1},fireWith:function(a,d){var b;if(!this._paused)return e.each(this._functions,function(f){b=f.apply(a,d);if(!1===b)return!1}),b}});var b=function(a){this._events=[];this._eventMap={};this._bubblesEvents=[];this._bubbleTarget=null;this._initEvents(a)};e.augment(b,{_events:[],_eventMap:{},_bubblesEvents:[],_bubbleTarget:null,_getCallbacks:function(a){return this._eventMap[a]},_initEvents:function(a){var d;if(a&&(d=a.listeners||{},a.handler&&(d.click=a.handler),d))for(var b in d)if(d.hasOwnProperty(b))this.on(b,d[b])},_isBubbles:function(a){return 0<=g.indexOf(a,this._bubblesEvents)},addTarget:function(a){this._bubbleTarget=a},addEvents:function(a){function d(a){-1===g.indexOf(a,b)&&(k[a]=new c,b.push(a))}var b=this._events,k=this._eventMap;e.isArray(a)?e.each(a,function(a){d(a)}):d(a)},clearListeners:function(){var a=this._eventMap,d;for(d in a)a.hasOwnProperty(d)&&a[d].empty()},fire:function(a,d){var b=this._getCallbacks(a),c=h.makeArray(arguments),e;d||(d={},c.push(d));d.target||(d.target=this);b&&(e=b.fireWith(this,Array.prototype.slice.call(c,1)));this._isBubbles(a)&&(b=this._bubbleTarget)&&b.fire&&b.fire(a,d);return e},pauseEvent:function(a){(a=this._getCallbacks(a))&&a.pause()},resumeEvent:function(a){(a=this._getCallbacks(a))&&a.resume()},on:function(a,b){var d=a.split(" "),c=this,l=null;1<d.length?e.each(d,function(a){c.on(a,b)}):(l=c._getCallbacks(a))?l.add(b):(c.addEvents(a),c.on(a,b));return c},off:function(a,b){if(!a&&!b)return this.clearListeners(),this;var d=this._getCallbacks(a);d&&(b?d.remove(b):d.empty());return this},publish:function(a,b){var d=this._bubblesEvents;if(b.bubbles)-1===e.Array.indexOf(a,d)&&d.push(a);else{var c=e.Array.indexOf(a,d);-1!==c&&d.splice(c,1)}}});e.Observable=b})(window.BUI,jQuery);(function(e,h){function g(a,b,d){var f=a[b]||{};d&&(a[b]=f);return f}function c(a,b){return e.isString(b)?a[b]:b}function b(a,b,d,f,c){return a.fire(b+e.ucfirst(d)+"Change",{attrName:d,prevVal:f,newVal:c})}function a(a,d,f,c,k){c=c||{};k=a.get(d);if(h.isPlainObject(f)||e.isArray(f)||k!==f){if(!1===b(a,"before",d,k,f))return!1;f=a._set(d,f,c);if(!1===f)return f;f=a.__attrVals[d];b(a,"after",d,k,f);return a}}function d(a){if(!a._attrs&&a!=l){var b=a.superclass.constructor;b&&!b._attrs&&d(b);a._attrs={};e.mixAttrs(a._attrs,b._attrs);e.mixAttrs(a._attrs,a.ATTRS)}}var f={},k=e.Observable,l=function(a){this.__attrs={};this.__attrVals={};k.apply(this,arguments);var b=this.constructor;d(b);this._initStaticAttrs(b._attrs);this._initAttrs(a)};l.INVALID=f;e.extend(l,k);e.augment(l,{_initStaticAttrs:function(a){var b;b=this.__attrs={};for(var d in a)if(a.hasOwnProperty(d)){var f=a[d];!1===f.shared||f.valueFn?(b[d]={},e.mixAttr(b[d],a[d])):b[d]=a[d]}},addAttr:function(a,b,d){d=this.__attrs;var f=d[a];f||(f=d[a]={});for(var c in b)b.hasOwnProperty(c)&&("value"==c?e.isObject(b[c])?(f[c]=f[c]||{},e.mix(f[c],b[c])):e.isArray(b[c])?(f[c]=f[c]||[],e.mix(f[c],b[c])):f[c]=b[c]:f[c]=b[c]);return this},addAttrs:function(a,b,d){var f=this;if(!a)return f;"boolean"===typeof b&&(d=b,b=null);e.each(a,function(a,b){f.addAttr(b,a,d)});b&&f.set(b);return f},hasAttr:function(a){return a&&this.__attrs.hasOwnProperty(a)},getAttrs:function(){return this.__attrs},getAttrVals:function(){return this.__attrVals},get:function(a){var b=this.__attrVals,d;d=g(this.__attrs,a).getter;b=a in b?b[a]:this._getDefAttrVal(a);d&&(d=c(this,d))&&(b=d.call(this,b,a));return b},clearAttrVals:function(){this.__attrVals={}},removeAttr:function(a){this.hasAttr(a)&&(delete this.__attrs[a],delete this.__attrVals[a]);return this},set:function(b,d,f){if(h.isPlainObject(b)){f=d;d=Object(b);for(b in d)d.hasOwnProperty(b)&&a(this,b,d[b],f);return this}return a(this,b,d,f)},setInternal:function(a,b,d){return this._set(a,b,d)},_getDefAttrVal:function(a){var b=this.__attrs,d=g(b,a),f=d.valueFn;f&&(f=c(this,f))&&(f=f.call(this),void 0!==f&&(d.value=f),delete d.valueFn,b[a]=d);return d.value},_set:function(a,b,d){var e;(d=g(this.__attrs,a,!0).setter)&&(d=c(this,d))&&(e=d.call(this,b,a));if(e===f)return!1;void 0!==e&&(b=e);this.__attrVals[a]=b;return this},_initAttrs:function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&this._set(b,a[b])}});e.Base=l})(window.BUI,jQuery);(function(e){var h={create:function(g,c){var b,a;g&&(a=g.xclass)&&(c&&!g.prefixCls&&(g.prefixCls=e.prefix),(b=h.Manager.getConstructorByXClass(a))||e.error("can not find class by xclass desc : "+a),g=new b(g));return g}};e.Component=h})(window.BUI);(function(e,h){var g={},c={};e.Component.Manager={__instances:c,addComponent:function(b,a){c[b]=a},removeComponent:function(b){delete c[b]},eachComponent:function(b){e.each(c,b)},getComponent:function(b){return c[b]},getCssClassWithPrefix:function(b){b=h.trim(b).split(/\s+/);for(var a=0;a<b.length;a++)b[a]&&(b[a]=this.get("prefixCls")+b[a]);return b.join(" ")},getXClassByConstructor:function(b){for(var a in g)if(g[a].constructor==b)return a;return 0},getConstructorByXClass:function(b){b=b.split(/\s+/);for(var a=-1,d,f=null,c=0;c<b.length;c++){var e=g[b[c]];e&&(d=e.priority)>a&&(a=d,f=e.constructor)}return f},setConstructorByXClass:function(b,a){e.isFunction(a)?g[b]={constructor:a,priority:0}:(a.priority=a.priority||0,g[b]=a)}}})(window.BUI,jQuery);(function(e,h){function g(a,b){for(var d=a.constructor,f,c=[];d;)d.prototype.hasOwnProperty(b)&&(f=d.prototype[b])&&c.push(f),d=d.superclass&&d.superclass.constructor;for(d=c.length-1;0<=d;d--)c[d]&&c[d].call(a)}function c(a){a&&e.each(a,function(b,d){e.isFunction(b)&&(a[d]=new b)})}function b(a,b,d){b&&e.each(b,function(b,f){if(b[d])b[d](a)})}var a=e.Component.Manager,d=e.ucfirst,f=h.noop,k=e.Base,l=function(a){k.apply(this,arguments);g(this,"initializer");var d=this.get("plugins");c(d);var f=this.get("xclass");f&&(this.__xclass=f);b(this,d,"initializer");a&&a.autoRender&&this.render()};l.ATTRS={autoRender:{value:!1},listeners:{value:{}},rendered:{value:!1},plugins:{value:[]},xclass:{valueFn:function(){return a.getXClassByConstructor(this.constructor)}}};e.extend(l,k);e.augment(l,{create:function(){this.get("created")||(this.fire("beforeCreateDom"),g(this,"createDom"),this._set("created",!0),this.fire("afterCreateDom"),b(this,this.get("plugins"),"createDom"));return this},render:function(){if(!this.get("rendered")){var a=this.get("plugins");this.create(void 0);this.set("created",!0);this.fire("beforeRenderUI");g(this,"renderUI");this.fire("afterRenderUI");b(this,a,"renderUI");this.fire("beforeBindUI");g(this,"bindUI");this.fire("afterBindUI");this._set("binded",!0);b(this,a,"bindUI");this.fire("beforeSyncUI");var f,c,e=this.getAttrs(),k;for(k in e)e.hasOwnProperty(k)&&(c=this["_uiSet"+d(k)])&&!1!==e[k].sync&&void 0!==(f=this.get(k))&&c.call(this,f);g(this,"syncUI");this.fire("afterSyncUI");b(this,a,"syncUI");this._set("rendered",!0)}return this},createDom:f,renderUI:f,bindUI:f,syncUI:f,destroy:function(){if(this.destroyed)return this;this.fire("beforeDestroy");b(this,this.get("plugins"),"destructor");for(var a=this.constructor;a;)a.prototype.hasOwnProperty("destructor")&&a.prototype.destructor.apply(this),a=a.superclass&&a.superclass.constructor;this.fire("afterDestroy");this.off();this.clearAttrVals();this.destroyed=!0;return this}});e.mix(l,{define:function(a,b,d){function f(){var a=this.constructor;if(a.base){for(var b=a,a=[];b.base;)a.push(b),b=b.base;for(b=a.length-1;0<=b;b--){var d=a[b];e.mix(d.prototype,d.px);e.mix(d,d.sx);d.base=null;d.px=null;d.sx=null}}l.apply(this,arguments)}e.extend(f,a);f.base=a;f.px=b;f.sx=d;return f},extend:function m(b,d){var f=h.makeArray(arguments),c=f[f.length-1];f.unshift(this);f=l.define.apply(l,f);if(c.xclass){var e=c.priority||(this.priority?this.priority+1:1);a.setConstructorByXClass(c.xclass,{constructor:f,priority:e});f.__xclass=c.xclass;f.priority=e;f.toString=function(){return c.xclass}}f.extend=m;return f}});e.Component.UIBase=l})(window.BUI,jQuery);(function(e,h){var g=e.Component.Manager,c=e.wrapBehavior,b=e.getWrapBehavior,a=document,d=e.Component.UIBase.extend({isController:!0,initializer:function(){var a=this.get("defaultChildCfg");if(a)this.on("beforeAddChild",function(b){var d=b.child;h.isPlainObject(d)&&e.each(a,function(a,b){null==d[b]&&(d[b]=a)})});this.get("id")||this.set("id",this.getNextUniqueId());g.addComponent(this.get("id"),this)},getNextUniqueId:function(){var a=g.getXClassByConstructor(this.constructor);return e.guid(a)},createDom:function(){var a=this.get("contentEl"),b;this.get("el");(b=this.get("srcNode"))?b=h(b):(b=h("\x3c"+this.get("elTagName")+"\x3e"),a&&b.append(a));this.setInternal("el",b);b.addClass(this.getComponentCssClassWithState());a||this.setInternal("contentEl",b)},getComponentCssClassWithState:function(a){var b=this.get("xclass");a=a?"-"+a:"";return this.getCssClassWithPrefix(b.split(/\s+/).join(a+" ")+a)},getCssClassWithPrefix:g.getCssClassWithPrefix,renderUI:function(){var b=this;b.get("srcNode")||b.setTplContent();var b=this,d=b.get("childContainer");d&&(d=b.get("el").find(d),d.length&&b.set("contentEl",d));if(!b.get("srcNode")){var d=b.get("render"),c=b.get("el"),e=b.get("elBefore");e?c.insertBefore(e,void 0):d?c.appendTo(d,void 0):c.appendTo(a.body,void 0)}b._initChildren()},setTplContent:function(){var a=this.getAttrVals(),b=this.get("el"),d=this.get("content"),a=this.getTpl(a);!d&&a&&(b.empty(),b.html(a))},getTpl:function(a){var b=this.get("tpl"),d=this.get("tplRender");a=a||this.getAttrVals();return d?d(a):b?e.substitute(b,a):""},_initChildren:function(a){var b,d;a=a||this.get("children").concat();for(b=this.get("children").length=0;b<a.length;b++)d=this.addChild(a[b]),d.render()},addChild:function(a,b){var d=this.get("children"),f;void 0===b&&(b=d.length);this.fire("beforeAddChild",{child:a,index:b});f=d[b]&&d[b].get("el")||null;a=this.initChild(a,f);d.splice(b,0,a);this.get("rendered")&&a.render();this.fire("afterAddChild",{child:a,index:b});return a},initChild:function(a,b){this.create();var c=this.getContentElement(),f=this.get("defaultChildClass");a.xclass||a instanceof d?a.render&&!a.isController&&(c=h(a.render)):a.xclass=a.xtype?f+"-"+a.xtype:f;a=e.Component.create(a,this);a.setInternal("parent",this);a.set("render",c);a.set("elBefore",b);a.create(void 0);return a},bindUI:function(){var a=this,b=a.get("events");this.on("afterVisibleChange",function(a){this.fire(a.newVal?"show":"hide")});e.each(b,function(b,d){a.publish(d,{bubbles:b})})},containsElement:function(a){var b=this.get("el"),d=this.get("children"),c=!1;if(!this.get("rendered"))return!1;h.contains(b[0],a)||b[0]===a?c=!0:e.each(d,function(b){if(b.containsElement(a))return c=!0,!1});return c},isChildrenElement:function(a){var b=this.get("children"),d=!1;e.each(b,function(b){if(b.containsElement(a))return d=!0,!1});return d},show:function(){this.render();this.set("visible",!0);return this},hide:function(){this.set("visible",!1);return this},toggle:function(){this.set("visible",!this.get("visible"));return this},_uiSetFocusable:function(a){var d,f=this.getKeyEventTarget();if(a)f.attr("tabIndex",0).attr("hideFocus",!0).on("focus",c(this,"handleFocus")).on("blur",c(this,"handleBlur")).on("keydown",c(this,"handleKeydown")).on("keyup",c(this,"handleKeyUp"));else f.removeAttr("tabIndex"),(d=b(this,"handleFocus"))&&f.off("focus",d),(d=b(this,"handleBlur"))&&f.off("blur",d),(d=b(this,"handleKeydown"))&&f.off("keydown",d),(d=b(this,"handleKeyUp"))&&f.off("keyup",d)},_uiSetHandleMouseEvents:function(a){var d=this.get("el"),f;if(a)d.on("mouseenter",c(this,"handleMouseEnter")).on("mouseleave",c(this,"handleMouseLeave")).on("click",c(this,"handleClick")).on("dblclick",c(this,"handleDblClick"));else f=b(this,"handleMouseEnter")&&d.off("mouseenter",f),f=b(this,"handleMouseLeave")&&d.off("mouseleave",f),f=b(this,"handleClick")&&d.off("click",f),b(this,"handleDblClick")&&d.off("dblclick",f)},_uiSetFocused:function(a){var b=this.get("el"),d=this.getStatusCls("focused");b[a?"addClass":"removeClass"](d);a&&this.getKeyEventTarget()[0].focus()},_uiSetVisible:function(a){var b=this.get("el"),d=this.get("visibleMode");"visibility"===d?b.css("visibility",a?"visible":"hidden"):b.css("display",a?"":"none");"visibility"===d&&(a?(a=this.get("cachePosition"))&&this.set("xy",a):(a=[this.get("x"),this.get("y")],this.set("cachePosition",a),this.set("xy",[-999,-999])))},_uiSetElAttrs:function(a){this.get("el").attr(a)},_uiSetElCls:function(a){this.get("el").addClass(a)},_uiSetElStyle:function(a){this.get("el").css(a)},_uiSetWidth:function(a){this.get("el").width(a)},_uiSetHeight:function(a){this.get("el").height(a)},_uiSetHighlighted:function(a){var b=this.getStatusCls("hover");this.get("el")[a?"addClass":"removeClass"](b)},_uiSetContent:function(a){var b;if(!this.get("srcNode")||this.get("rendered"))b=this.get("contentEl"),"string"==typeof a?b.html(a):a&&b.empty().append(a)},_uiSetDisabled:function(a){this.get("el");a&&this.get("highlighted")&&this.set("highlighted",!1);this.get("focusable")&&this.getKeyEventTarget().attr("tabIndex",a?-1:0)},enable:function(){this.set("disabled",!1);return this},disable:function(){this.set("disabled",!0);return this},focus:function(){this.get("focusable")&&this.set("focused",!0)},getStatusCls:function(a){var b=this.get("statusCls")[a];b||(b=this.getComponentCssClassWithState(a));return b},getContentElement:function(){return this.get("contentEl")||this.get("el")},getKeyEventTarget:function(){return this.get("el")},remove:function(a){var b=this.get("parent");b?b.removeChild(this,a):a&&this.destroy();return this},removeChild:function(a,b){var d=this.get("children"),c=e.Array.indexOf(a,d);if(-1!==c)return this.fire("beforeRemoveChild",{child:a,destroy:b}),-1!==c&&d.splice(c,1),b&&a.destroy&&a.destroy(),this.fire("afterRemoveChild",{child:a,destroy:b}),a},clearChildren:function(a){var b,d=[].concat(this.get("children"));for(b=0;b<d.length;b++)this.removeChild(d[b],a)},getChildAt:function(a){return this.get("children")[a]||null},getChild:function(a,b){return this.getChildBy(function(b){return b.get("id")===a},b)},getChildBy:function(a,b){return this.getChildrenBy(a,b)[0]||null},getAppendHeight:function(){var a=this.get("el");return a.outerHeight()-a.height()},getAppendWidth:function(){var a=this.get("el");return a.outerWidth()-a.width()},getChildrenBy:function(a,b){var d=[];if(!a)return d;this.eachChild(function(c){a(c)?d.push(c):b&&(d=d.concat(c.getChildrenBy(a,b)))});return d},eachChild:function(a){e.each(this.get("children"),a)},handleMouseEnter:function(a){this.set("highlighted",!0);this.fire("mouseenter",{domTarget:a.target,domEvent:a})},handleMouseLeave:function(a){this.set("active",!1);this.set("highlighted",!1);this.fire("mouseleave",{domTarget:a.target,domEvent:a})},handleDblClick:function(a){this.isChildrenElement(a.target)||this.fire("dblclick",{domTarget:a.target,domEvent:a})},handleClick:function(a){h(a.target);this.getKeyEventTarget();this.get("focusable")&&this.setInternal("focused",!0);this.isChildrenElement(a.target)||this.fire("click",{domTarget:a.target,domEvent:a})},handleFocus:function(a){this.set("focused",!!a);this.fire("focus",{domEvent:a,domTarget:a.target})},handleBlur:function(a){this.set("focused",!a);this.fire("blur",{domEvent:a,domTarget:a.target})},handleKeydown:function(a){if(this.handleKeyEventInternal(a))return a.halt(),!0},handleKeyUp:function(a){this.isChildrenElement(a.target)||this.fire("keyup",{domTarget:a.target,domEvent:a})},handleKeyEventInternal:function(a){var b=this.isChildrenElement(a.target);13===a.which&&(b||this.fire("click",{domTarget:a.target,domEvent:a}));b||this.fire("keydown",{domTarget:a.target,domEvent:a});return!1},destructor:function(){var a,b,d=this.get("children");a=this.get("id");for(b=0;b<d.length;b++)d[b].destroy&&d[b].destroy();(b=this.get("el"))&&b.remove();g.removeComponent(a)},set:function(a,b,c){var f=this,k=f.__attrs[a],l,g;e.isObject(a)&&(c=b,e.each(a,function(a,b){f.set(b,a,c)}));if(!k)return f.setInternal(a,b,c),f;var r=d.superclass.get.call(this,a);if(!h.isPlainObject(b)&&!e.isArray(b)&&r===b)return f;k=e.ucfirst(a);g="_uiSet"+k;f.fire("before"+k+"Change",{attrName:a,prevVal:r,newVal:b});f.setInternal(a,b);if(f.get("binded")&&f[g])f[g](b,l);l={attrName:a,prevVal:r,newVal:b};f.fire("after"+k+"Change",l);return f},get:function(a){return d.superclass.get.call(this,a)}},{ATTRS:{content:{},defaultChildCfg:{},elTagName:{value:"div"},defaultChildClass:{},xtype:{},id:{},width:{},height:{},elCls:{},elStyle:{},elAttrs:{},elBefore:{},el:{setter:function(a){return h(a)}},tpl:{sync:!1},contentEl:{valueFn:function(){return this.get("el")}},tplRender:{value:null},childContainer:{},events:{value:{click:!0,dblclick:!0,mouseenter:!1,mouseleave:!1,keydown:!1,keyup:!1,focus:!1,blur:!1,show:!1,hide:!1}},render:{},statusCls:{value:{}},visibleMode:{value:"display"},visible:{value:!0},handleMouseEvents:{value:!0},focusable:{value:!1},activeable:{value:!0},focused:{},active:{},highlighted:{},cachePosition:{},children:{sync:!1,shared:!1,value:[]},prefixCls:{value:e.prefix},parent:{setter:function(a){this.addTarget(a)}},disabled:{value:!1}}},{xclass:"controller",priority:0});e.Component.Controller=d})(window.BUI,jQuery);(function(e){function h(a){return"string"===typeof a&&""!==a}var g=document,c=encodeURIComponent,b=decodeURIComponent;e.Cookie={get:function(a){var d,c;h(a)&&(c=String(g.cookie).match(new RegExp("(?:^| )"+a+"(?:(?:\x3d([^;]*))|;|$)")))&&(d=c[1]?b(c[1]):"");return d},set:function(a,b,f,e,l,n){b=String(c(b));var d=f;"number"===typeof d&&(d=new Date,d.setTime(d.getTime()+864E5*f));d instanceof Date&&(b+="; expires\x3d"+d.toUTCString());h(e)&&(b+="; domain\x3d"+e);h(l)&&(b+="; path\x3d"+l);n&&(b+="; secure");g.cookie=a+"\x3d"+b},remove:function(a,b,c,e){this.set(a,"",-1,b,c,e)}}})(window.BUI);(function(e){function h(a,b){if(!(0>a)){var d=b[a];b.splice(a,1);return d}}function g(a,b){var d=e.Array.indexOf(a,b);0<=d&&h(d,b)}function c(a,b){return-1!==e.Array.indexOf(a,b)}e.Data={};var b=function(a){b.superclass.constructor.call(this,a);this._init()};b.ATTRS={compareFunction:{value:function(a,b){void 0===a&&(a="");void 0===b&&(b="");return e.isString(a)?a.localeCompare(b):a>b?1:a===b?0:-1}},sortField:{},sortDirection:{value:"ASC"},matchFunction:{value:function(a,b){return a==b}},events:{value:["load","add","remove","update"]},lastParams:{shared:!1,value:{}},params:{},data:{value:[]},resultMap:{shared:!1,value:{total:0,rows:[]}},root:{value:"rows"},totalProperty:{value:"total"},deletedRecords:{shared:!1,value:[]},modifiedRecords:{shared:!1,value:[]},newRecords:{shared:!1,value:[]},pageIndex:{value:1},pageSize:{value:20},autoLoad:{value:!0},isAjax:{value:!1},matchFields:{value:[]}};e.extend(b,e.Base);e.augment(b,{isStore:!0,_init:function(){var a=this.get("autoLoad");this._initParams();a?this.load():this._setResult([])},_initParams:function(){var a=this.get("lastParams"),b=this.get("params");e.mix(a,b)},load:function(a,b){var d=this.get("sortField"),c=this.get("sortDirection"),l=this.get("lastParams");e.mix(l,this.getAppendParams(),a);a=e.cloneObject(l);if(this.get("isAjax"))this.onAjax(a,b);else l=this._getMatches(a),this.sortData(d,c,l),this.onLoad(l,a),b&&(a.pageSize?(d=parseInt(a.pageIndex)*parseInt(a.pageSize),d=l.slice(d-param.pageSize,d),b({rows:d,total:l.length})):b(l,a))},onAjax:function(a,b){},onLoad:function(a,b){this.get("root");b.pageSize&&this.set("pageIndex",b.pageIndex);this._setResult(a);this.fire("load",{params:b})},getAppendParams:function(){var a=this.get("pageSize"),b=this.get("pageIndex")||1;return{pageSize:a,pageIndex:b}},add:function(a,b,c){var d=this.getCount();this.addAt(a,d,b,c)},addAt:function(a,b,c,k){var d=this;k=k||d._getDefaultMatch();e.isArray(a)||(a=[a]);$.each(a,function(a,f){c&&d.contains(f,k)||(d._addRecord(f,a+b),d.get("newRecords").push(f),g(f,d.get("deletedRecords")),g(f,d.get("modifiedRecords")))})},_getDefaultMatch:function(){return this.get("matchFunction")},contains:function(a,b){return-1!==this.findIndexBy(a,b)},findIndexBy:function(a,b){var d=-1,c=this.getResult();b=b||this._getDefaultMatch();if(null===a||void 0===a)return-1;$.each(c,function(c,f){if(b(a,f))return d=c,!1});return d},_addRecord:function(a,b){var d=this.getResult();void 0==b&&(b=d.length);d.splice(b,0,a);this.fire("add",{record:a,index:b})},remove:function(a,b){var d=this;b=b||d._getDefaultMatch();e.isArray(a)||(a=[a]);$.each(a,function(a,f){a=d.findIndexBy(f,b);var e=h(a,d.getResult());c(e,d.get("newRecords"))||c(e,d.get("deletedRecords"))||d.get("deletedRecords").push(e);g(e,d.get("newRecords"));g(e,d.get("modifiedRecords"));d.fire("remove",{record:e})})},update:function(a,b,f){var d=a;f=null;b&&(f=f||this._getDefaultMatch(),b=this.findIndexBy(a,f),0<=b&&(d=this.getResult()[b]));d=e.mix(d,a);c(d,this.get("newRecords"))||c(d,this.get("modifiedRecords"))||this.get("modifiedRecords").push(d);this.fire("update",{record:d})},getResult:function(){var a=this.get("resultMap"),b=this.get("root");return e.getValue(a,b)},find:function(a,b){var d=null,c=this.getResult();$.each(c,function(c,f){if(f[a]===b)return d=f,!1});return d},findAll:function(a,b){var d=[],c=this.getResult();$.each(c,function(c,f){f[a]===b&&d.push(f)});return d},findByIndex:function(a){return this.getResult()[a]},findNextRecord:function(a){a=this.findIndexBy(a);if(0<=a)return this.findByIndex(a+1)},getCount:function(){return this.getResult().length},getTotalCount:function(){var a=this.get("resultMap"),b=this.get("totalProperty"),a=e.getValue(a,b);return parseInt(a,10)||0},hasData:function(){return 0!==this.getCount()},getDirtyData:function(){return{add:this.get("newRecords"),update:this.get("modifiedRecords"),remove:this.get("deletedRecords")}},sort:function(a,b){this._sortData(a,b)},setResult:function(a){var b=this.get("root"),c=this.get("totalProperty"),k=this.get("lastParams");e.isArray(a)?(this.set("data",a),this._setResult(a)):(this.set("data",e.getValue(a,b)),this._setResult(e.getValue(a,b),e.getValue(a,c)));a=e.cloneObject(k);a.pageSize&&this.set("pageIndex",a.pageIndex);this.fire("load",{params:a})},sum:function(a,b){var d=b||this.getResult(),c=0;e.each(d,function(b){b=b[a];isNaN(b)||(c+=parseFloat(b))});return c},setValue:function(a,b,f){a[b]=f;c(a,this.get("newRecords"))||c(a,this.get("modifiedRecords"))||this.get("modifiedRecords").push(a);this.fire("update",{record:a,field:b,value:f})},_sortData:function(a,b,c){c=c||this.getResult();this.sortData(a,b,c)},sortData:function(a,b,c){var d=this;c=c||d.getSortData();e.isArray(a)&&(c=a,a=null);a=a||d.get("sortField");b=b||d.get("sortDirection");d.set("sortField",a);d.set("sortDirection",b);if(!a||!b)return c;c.sort(function(c,f){return d.compare(c,f,a,b)});return c},compare:function(a,b,c,e){c=c||this.get("sortField");e=e||this.get("sortDirection");if(!c||!e)return 1;e="ASC"===e?1:-1;return this.get("compareFunction")(a[c],b[c])*e},getSortData:function(){return this.getResult()},_setResult:function(a,b){var d=this.get("resultMap");b=b||a.length;e.setValue(d,this.get("root"),a);e.setValue(d,this.get("totalProperty"),b);this._clearChanges()},_clearChanges:function(){e.Array.empty(this.get("newRecords"));e.Array.empty(this.get("modifiedRecords"));e.Array.empty(this.get("deletedRecords"))},_getMatches:function(a){var b=this.get("matchFields"),c=this.get("data")||[];a&&b.length&&(a=this._getMatchFn(a,b),c=e.Array.filter(c,a));return c},_getMatchFn:function(a,b){return function(d){var c=!0;e.each(b,function(b){if(null!=a[b]&&a[b]!==d[b])return c=!1});return c}}});e.Data.Store=b})(window.BUI);(function(e){function h(c,b){var a={};b?(e.each(c,function(d,c){a[b[c]||c]=d}),a.record=c):a=c;return a}function g(c,b){c=h(c,b);e.mix(this,c)}e.augment(g,{root:!1,leaf:null,text:"",id:null,loaded:!1,path:null,parent:null,level:0,record:null,children:null,isNode:!0});e.Data.Node=g})(window.BUI);(function(e,h){function g(b){g.superclass.constructor.call(this,b);this._init()}var c=e.Data.Node;g.ATTRS={url:{},autoLoad:{value:!1},lastParams:{shared:!1,value:{}},params:{},matchFunction:{value:function(b,a){return b==a}},data:{value:[]},root:{},map:{},pidField:{},dataProperty:{value:"nodes"},events:{value:["load","add","remove","update"]},matchFields:{value:[]}};e.extend(g,e.Base);e.augment(g,{isStore:!0,_init:function(){this.initRoot();this._initParams();this._initData()},initRoot:function(){var b=this.get("map"),a=this.get("root");a||(a={});a.isNode||(a=new c(a,b));a.path=[a.id];a.level=0;a.children&&this.setChildren(a,a.children);this.set("root",a)},setChildren:function(b,a){var d=this;b.children=[];a.length&&e.each(a,function(a){d._add(a,b)})},add:function(b,a,d){b=this._add(b,a,d);this.fire("add",{node:b,record:b,index:d});return b},_add:function(b,a,d){a=a||this.get("root");var f=this.get("map"),k=a.children;b.isNode||(b=new c(b,f));f=b.children||[];0==f.length&&null==b.leaf&&(b.leaf=!0);a&&(a.leaf=!1);b.parent=a;b.level=a.level+1;b.path=a.path.concat(b.id);d=null==d?a.children.length:d;e.Array.addAt(k,b,d);this.setChildren(b,f);return b},_initParams:function(){var b=this.get("lastParams"),a=this.get("params");e.mix(b,a)},_initData:function(){this.get("pidField");var b=this.get("root");b.children||this.loadNode(b)},loadNode:function(b,a){var d=this.get("pidField"),c;if(a||!this.isLoaded(b))c={id:b.id},d&&(c[d]=b.id),this.load(c)},load:function(b,a){var d=this,c=d.get("lastParams"),k=d.get("url");e.mix(c,b);k?h.ajax({cache:!1,url:k,data:b,type:"GET",datatype:"json",success:function(c){d.onLoad(c,b);a&&a(c,b)},error:function(a){e.log(a.responseText)}}):(c=d._getMatches(b),d.onLoad(c,b),a&&a(c,b))},onLoad:function(b,a){var d=this.get("pidField"),c=a.id||a[d],d=this.get("dataProperty"),c=this.findNode(c)||this.get("root");e.isArray(b)?this.setChildren(c,b):this.setChildren(c,e.getValue(b,d));c.loaded=!0;this.fire("load",{node:c,params:a})},remove:function(b){var a=b.parent||_self.get("root"),d=e.Array.indexOf(b,a.children);e.Array.remove(a.children,b);0===a.children.length&&(a.leaf=!0);this.fire("remove",{node:b,record:b,index:d});b.parent=null;return b},setValue:function(b,a,d){b[a]=d;this.fire("update",{node:b,record:b,field:a,value:d})},update:function(b){this.fire("update",{node:b,record:b})},getResult:function(){return this.get("root").children},setResult:function(b){var a=this.get("root");this.set("data",b);this.load({id:a.id})},findNode:function(b,a,d){return this.findNodeBy(function(a){return a.id===b},a,d)},findNodeBy:function(b,a,d){var c=this;d=null==d?!0:d;if(!a)return a=c.get("root"),b(a)?a:c.findNodeBy(b,a);var k=null;e.each(a.children,function(a){b(a)?k=a:d&&(k=c.findNodeBy(b,a));if(k)return!1});return k},findNodesBy:function(b,a){var d=this,c=[];a||(a=d.get("root"));e.each(a.children,function(a){b(a)&&c.push(a);c=c.concat(d.findNodesBy(b,a))});return c},findNodeByPath:function(b){if(!b)return null;var a=this.get("root");b=b.split(",");var d,c=b[0];if(!c)return null;if(a=a.id==c?a:this.findNode(c,a,!1)){for(d=1;d<b.length&&(c=b[d],a=this.findNode(c,a,!1),a);d+=1);return a}},contains:function(b,a){return!!this.findNode(b.id,a)},hasData:function(){return this.get("root").children&&0!==this.get("root").children.length},isLoaded:function(b){var a=this.get("root");return b!=a||a.children?this.get("pidField")?b.loaded||b.leaf||!(!b.children||!b.children.length):!0:!1},reloadNode:function(b){b=b||this.get("root");b.loaded=!1;this.loadNode(b,!0)},loadPath:function(b){var a=b.split(",")[0];this.findNodeByPath(b)||this.load({id:a,path:b})},_getMatches:function(b){var a=this.get("matchFields"),d=this.get("data")||[];b&&a.length&&(b=this._getMatchFn(b,a),d=e.Array.filter(d,b));return d},_getMatchFn:function(b,a){return function(d){var c=!0;e.each(a,function(a){if(null!=b[a]&&b[a]!==d[a])return c=!1});return c}}});e.Data.TreeStore=g})(window.BUI,jQuery);(function(e,h){var g=e.Mask={};e.mix(g,{maskElement:function(c){var b=h(c),a=b.children(".bui-mask"),d=null,f=null;if(!a.length){a=h('\x3cdiv class\x3d"bui-mask"\x3e\x3c/div\x3e').appendTo(b);b.addClass("bui-masked");"body"==c&&a.css("position","fixed");c=h('\x3cdiv class\x3d"bui-mask-msg bui-mask-loading"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e').appendTo(b);try{d=(a.height()-c.height())/2,f=(a.width()-c.width())/2,c.css({left:f,top:d})}catch(k){e.log("mask error occurred")}}return a},unmaskElement:function(c){c=h(c);var b=c.children(".bui-mask-msg"),a=c.children(".bui-mask");b&&b.remove();a&&a.remove();c.removeClass("bui-masked")}})})(window.BUI,jQuery);(function(e,h){function g(a,b){var d=b.isController?b.getAttrVals():b,k=a.get("childTpl"),l=a.get("childStatusCls"),n=a.get("childTplRender");k&&!d.tpl&&c(b,"tpl",k);n&&!d.tplRender&&c(b,"tplRender",n);if(l){var g=d.statusCls||b.isController?b.get("statusCls"):{};e.each(l,function(a,b){a&&!g[b]&&(g[b]=a)});c(b,"statusCls",g)}}function c(a,b,c){a.isController?a.set(b,c):a[b]=c}e.List={};var b=e.Component.Controller.extend({initializer:function(){var a=this;a.on("beforeRenderUI",function(){a._beforeRenderUI()})},_beforeRenderUI:function(){var a=this,b=a.get("children");e.each(b,function(b){g(a,b)})},bindUI:function(){var a=this,b=a.get("selectedEvent");a.on(b,function(b){b=b.target;b.get("selectable")&&(b.get("selected")?a.get("multipleSelect")&&a.clearSelected(b):a.setSelected(b))});a.on("click",function(b){b.target!==a&&a.fire("childclick",{child:b.target,domTarget:b.domTarget,domEvent:b})});a.on("beforeAddChild",function(b){g(a,b.child)});a.on("beforeRemoveChild",function(b){b=b.child;b.get("selected")&&(a.get("multipleSelect")?a.clearSelected(b):a.setSelected(null));b.set("selected",!1)})},addChildren:function(a){var b=this;e.each(a,function(a){b.addChild(a)})},removeChildren:function(a){var b=this;e.each(a,function(a){var d=b.get("idField");a instanceof e.Component.Controller||(a=b.findChildByField(d,a[d]));b.removeChild(a,!0)})},removeChildAt:function(a){this.removeChild(this.getChildAt(a),!0)},getChildren:function(){return this.get("children")},getChildCount:function(){return this.get("children").length},getFirstChild:function(){return this.getChildAt(0)},getLastChild:function(){return this.getChildAt(this.getChildCount()-1)},getChildAt:function(a){return this.getChildren()[a]||null},getChild:function(a){var b=this.get("idField");return this.findChildByField(b,a)},getSelection:function(){var a=this,b=a.getChildren(),c=[];e.each(b,function(b){a.isChildSelected(b)&&c.push(b)});return c},getSelected:function(){return this.getSelection()[0]},getSelectionValues:function(){var a=this,b=a.get("idField"),c=a.getSelection();return h.map(c,function(d){return a.getValueByField(d,b)})},getSelectedValue:function(){var a=this.get("idField"),b=this.getSelected();return this.getValueByField(b,a)},getSelectionText:function(){var a=this;a.getSelection();return h.map(children,function(b){return a.getChildText(b)})},getSelectedText:function(){var a=this.getSelected();return this.getChildText(a)},getValueByField:function(a,b){return a&&a.get(b)},getChildText:function(a){return a.get("el").text()},clearSelection:function(){var a=this,b=a.getSelection();e.each(b,function(b){a.clearSelected(b)})},clearSelected:function(a){(a=a||this.getSelected())&&this.setChildSelected(a,!1)},clearControl:function(){this.clearChildren(!0)},setSelection:function(a){var b=this;a=e.isArray(a)?a:[a];e.each(a,function(a){b.setSelected(a)})},setSelected:function(a){var b=this.get("multipleSelect");this.isChildselectable(a)&&(b||(b=this.getSelected(),a!=b&&this.clearSelected(b)),this.setChildSelected(a,!0))},setChildSelected:function(a,b){var d;if(a&&(d=this.isChildSelected(a),d==b))return;!1!==this.fire("beforeselectedchange",{child:a,selected:b})&&this.setChildSelectedStatus(a,b)},setSelectedByField:function(a,b){b||(b=a,a=this.get("idField"));var d=this.findChildByField(a,b);this.setSelected(d)},setSelectionByField:function(a,b){b||(b=a,a=this.get("idField"));var d=this;e.each(b,function(b){d.setSelectedByField(a,b)})},setChildSelectedStatus:function(a,b){var d=null;a&&(a.set("selected",b),d=a.get("el"));this.afterSelected(a,b,d)},setAllSelection:function(){var a=this.getChildren();this.setSelection(a)},updateChild:function(a){var b=this.get("idField");(a=this.findChildByField(b,a[b]))&&a.setTplContent();return a},indexOfChild:function(a){return e.Array.indexOf(a,this.getChildren())},isChildselectable:function(a){return!0},isChildSelected:function(a){return a?a.get("selected"):!1},findChildByField:function(a,b,c){var d=this;c=(c||this).get("children");var f=null;e.each(c,function(c){c.get(a)==b?f=c:c.get("children").length&&(f=d.findChildByField(a,b,c));if(f)return!1});return f},afterSelected:function(a,b,c){b?(this.fire("childselected",{child:a,domTarget:c}),this.fire("selectedchange",{child:a,domTarget:c,selected:b})):(this.fire("childunselected",{child:a,domTarget:c}),this.get("multipleSelect")&&this.fire("selectedchange",{child:a,domTarget:c,selected:b}))}},{ATTRS:{idField:{value:"id"},childTpl:{},childTplRender:{},childStatusCls:{value:{}},multipleSelect:{value:!1},selectedEvent:{value:"click"},events:{value:{childclick:!0,selectedchange:!1,beforeselectedchange:!1,childselected:!1,childunselected:!1}}}},{xclass:"childlist"});e.List.ChildList=b})(window.BUI,jQuery);(function(e,h){var g=e.Component.Controller.extend({_uiSetSelected:function(c){var b=this.getStatusCls("selected"),a=this.get("el");c?a.addClass(b):a.removeClass(b)}},{ATTRS:{selectable:{value:!0},selected:{sync:!1,value:!1},elTagName:{value:"li"},tpl:{value:"\x3cspan\x3e{text}\x3c/span\x3e"}}},{xclass:"list-item"});e.List.ListChild=g})(window.BUI,jQuery);(function(e,h){var g=e.List.ChildList.extend({},{ATTRS:{elTagName:{value:"ul"},idField:{value:"id"},defaultChildClass:{value:"list-item"}}},{xclass:"list"});e.List.List=g})(window.BUI,jQuery);(function(e,h){var g=e.Component.Controller.extend({bindUI:function(){function c(a,d){var c=b.get("multipleSelect");b.isItemSelected(a,d)?c?b.setItemSelected(a,!1,d):b.get("cancelSelected")&&b.setSelected(null):(c||b.clearSelected(),b.setItemSelected(a,!0,d))}var b=this,a=b.get("selectedEvent"),d=b.get("itemCls"),f=b.getItemContainer();f.delegate("."+d,"click",function(d){if(!b.get("disabled")){var f=h(d.currentTarget),e=b.getItemByElement(f);b.isItemDisabled(e,f)||!1!==b.fire("itemclick",{item:e,element:f[0],domTarget:d.target,domEvent:d})&&"click"==a&&b.isItemSelectable(e)&&c(e,f)}});"click"!==a&&f.delegate("."+d,a,function(a){if(!b.get("disabled")){a=h(a.currentTarget);var d=b.getItemByElement(a);if(!b.isItemDisabled(d,a))return b.isItemSelectable(d)&&c(d,a),!1}});f.delegate("."+d,"dblclick",function(a){if(!b.get("disabled")){var d=h(a.currentTarget),c=b.getItemByElement(d);b.isItemDisabled(c,d)||b.fire("itemdblclick",{item:c,element:d[0],domTarget:a.target})}});b.on("itemrendered itemupdated",function(a){b._syncItemStatus(a.item,a.element)})},_uiSetItems:function(c){this.get("srcNode")&&!this.get("rendered")||this.setItems(c)},_syncItemStatus:function(c,b){var a=this,d=a.get("itemStatusFields");e.each(d,function(d,e){if(null!=c[d]){var f=a.getItemStatusCls(e),k=c[d]?"addClass":"removeClass";if(b)h(b)[k](f)}})},setItems:function(c){var b=this;c!=b.getItems()&&b.setInternal("items",c);b.clearControl();b.fire("beforeitemsshow");e.each(c,function(a,d){b.addItemToView(a,d)});b.fire("itemsshow")},addItems:function(c){var b=this;e.each(c,function(a){b.addItem(a)})},addItem:function(c){return this.addItemAt(c,this.getCount())},addItemAt:function(c,b){var a=this.get("items");void 0===b&&(b=a.length);a.splice(b,0,c);this.addItemToView(c,b);return c},addItemToView:function(c,b){var a=this.getItemContainer(),d=this.get("itemCls"),f=this.get("dataField"),e=this.getItemTpl(c,b),e=h(e);if(void 0!==b){var l=a.find("."+d)[b];l?e.insertBefore(l):e.appendTo(a)}else e.appendTo(a);e.addClass(d);e.data(f,c);this.fire("itemrendered",{item:c,domTarget:h(e)[0],element:e});return e},removeItems:function(c){var b=this;e.each(c,function(a){b.removeItem(a)})},removeItem:function(c){var b=this.get("items"),a=this.findElement(c),d;d=e.Array.indexOf(c,b);-1!==d&&b.splice(d,1);h(a).remove();this.fire("itemremoved",{item:c,domTarget:h(a)[0],element:a})},removeItemAt:function(c){this.removeItem(this.getItemAt(c))},getItems:function(){return this.get("items")},getCount:function(){var c=this.getItems();return c?c.length:0},getValueByField:function(c,b){return c&&c[b]},getStatusValue:function(c,b){var a=this.get("itemStatusFields")[b];return c[a]},getStatusField:function(c){return this.get("itemStatusFields")[c]},getItemByElement:function(c){var b=this.get("dataField");return h(c).data(b)},getSelected:function(){var c=this.getFirstElementByStatus("selected");return this.getItemByElement(c)||null},getItemsByStatus:function(c){var b=this;c=b.getElementsByStatus(c);var a=[];e.each(c,function(d){a.push(b.getItemByElement(d))});return a},getItemText:function(c){var b=this.get("textGetter");return c?b?b(c):h(this.findElement(c)).text():""},getFirstItem:function(){return this.getItemAt(0)},getLastItem:function(){return this.getItemAt(this.getCount()-1)},getItemAt:function(c){return this.getItems()[c]||null},getItem:function(c){var b=this.get("idField");return this.findItemByField(b,c)},getSelection:function(){var c=this,b=c.getSelectedElements(),a=[];e.each(b,function(b){a.push(c.getItemByElement(b))});return a},getSelectedValue:function(){var c=this.get("idField"),b=this.getSelected();return this.getValueByField(b,c)},getSelectionValues:function(){var c=this,b=c.get("idField"),a=c.getSelection();return h.map(a,function(a){return c.getValueByField(a,b)})},getSelectionText:function(){var c=this,b=c.getSelection();return h.map(b,function(a){return c.getItemText(a)})},getSelectedText:function(){var c=this.getSelected();return this.getItemText(c)},clearItemStatus:function(c,b,a){var d=this,f=d.get("itemStatusFields");a=a||d.findElement(c);b?d.setItemStatus(c,b,!1,a):(e.each(f,function(b,f){d.setItemStatus(c,f,!1,a)}),f.selected||d.setItemSelected(c,!1),d.setItemStatus(c,"hover",!1))},clearSelection:function(){var c=this,b=c.getSelection();e.each(b,function(a){c.clearSelected(a)})},clearSelected:function(c){(c=c||this.getSelected())&&this.setItemSelected(c,!1)},clearItems:function(){this.getItems().splice(0);this.clearControl()},clearControl:function(){this.fire("beforeitemsclear");var c=this.getItemContainer(),b=this.get("itemCls");c.find("."+b).remove();this.fire("itemsclear")},setStatusValue:function(c,b,a){(b=this.get("itemStatusFields")[b])&&(c[b]=a)},setAllSelection:function(){var c=this.getItems();this.setSelection(c)},setItemDisabled:function(c,b){this.setItemStatus(c,"disabled",b)},setItemSelected:function(c,b){var a;if(c&&(a=this.isItemSelected(c),a==b))return;!1!==this.fire("beforeselectedchange",{item:c,selected:b})&&this.setItemSelectedStatus(c,b)},setSelectedByField:function(c,b){b||(b=c,c=this.get("idField"));var a=this.findItemByField(c,b);this.setSelected(a)},setSelectionByField:function(c,b){b||(b=c,c=this.get("idField"));var a=this;e.each(b,function(b){a.setSelectedByField(c,b)})},setSelection:function(c){var b=this;c=e.isArray(c)?c:[c];e.each(c,function(a){b.setSelected(a)})},setSelected:function(c){var b=this.get("multipleSelect");this.isItemSelectable(c)&&(b||(b=this.getSelected(),c!=b&&this.clearSelected(b)),this.setItemSelected(c,!0))},setItemStatus:function(c,b,a,d){c&&(d=d||this.findElement(c));this.isItemDisabled(c,d)&&"disabled"!==b||(c&&("disabled"===b&&a&&this.clearItemStatus(c),this.setStatusValue(c,b,a),this.setItemStatusCls(b,d,a),this.fire("itemstatuschange",{item:c,status:b,value:a,element:d})),"selected"===b&&this.afterSelected(c,a,d))},setItemSelectedStatus:function(c,b,a){a=a||this.findElement(c);this.setItemStatus(c,"selected",b,a)},updateItem:function(c){var b=this.getItems(),a=e.Array.indexOf(c,b),b=null;0<=a&&(b=this.findElement(c),a=this.getItemTpl(c,a),b&&h(b).html(a));this.fire("itemupdated",{item:c,domTarget:h(b)[0],element:b})},hasStatus:function(c,b,a){if(!c)return!1;a=a||this.findElement(c);c=this.getItemStatusCls(b);return h(a).hasClass(c)},findElement:function(c){var b=this,a=b.getAllElements(),d=null;e.isString(c)&&(c=b.getItem(c));e.each(a,function(a){if(b.getItemByElement(a)==c)return d=a,!1});return d},findItemByField:function(c,b){var a=this.get("items"),d=null;e.each(a,function(a){if(null!=a[c]&&a[c]==b)return d=a,!1});return d},isItemSelected:function(c,b){var a=this.getItemStatusCls("selected");return(b=b||this.findElement(c))&&h(b).hasClass(a)},isItemDisabled:function(c,b){return this.hasStatus(c,"disabled",b)},isItemSelectable:function(c){return!0},indexOfItem:function(c){return e.Array.indexOf(c,this.getItems())},getItemContainer:function(){var c=this.get("itemContainer");return c.length?c:this.get("el")},getItemStatusCls:function(c){var b=this.get("itemCls"),a=this.get("itemStatusCls");return a&&a[c]?a[c]:b+"-"+c},getItemTpl:function(c,b){var a=this.get("itemTplRender"),d=this.get("itemTpl");return a?a(c,b):e.substitute(d,c)},getAllElements:function(){var c=this.get("itemCls");return this.get("el").find("."+c)},getFirstElementByStatus:function(c){c=this.getItemStatusCls(c);return this.get("el").find("."+c)[0]},getElementsByStatus:function(c){c=this.getItemStatusCls(c);return this.get("el").find("."+c)},getSelectedElements:function(){var c=this.getItemStatusCls("selected");return this.get("el").find("."+c)},setItemStatusCls:function(c,b,a){c=this.getItemStatusCls(c);a=a?"addClass":"removeClass";if(b)h(b)[a](c)},afterSelected:function(c,b,a){b?(this.fire("itemselected",{item:c,domTarget:a}),this.fire("selectedchange",{item:c,domTarget:a,selected:b})):(this.fire("itemunselected",{item:c,domTarget:a}),this.get("multipleSelect")&&this.fire("selectedchange",{item:c,domTarget:a,selected:b}))}},{ATTRS:{items:{shared:!1},idField:{value:"value"},itemTpl:{},itemTplRender:{},itemStatusCls:{value:{}},multipleSelect:{},selectedEvent:{value:"click"},dataField:{value:"data-item"},itemContainer:{},itemStatusFields:{value:{}},itemCls:{},cancelSelected:{value:!1},textGetter:{},events:{value:{itemrendered:!0,itemremoved:!0,itemupdated:!0,itemclick:!1,itemsshow:!1,beforeitemsshow:!1,itemsclear:!1,itemdblclick:!1,beforeitemsclear:!1,selectedchange:!1,beforeselectedchange:!1,itemselected:!1,itemunselected:!1}}}},{xclass:"domlist"});e.List.DomList=g})(window.BUI,jQuery);(function(e,h){var g=e.prefix+"list-item",g=e.List.DomList.extend({bindUI:function(){var c=this,b=c.get("itemCls");c.getItemContainer().delegate("."+b,"mouseover",function(a){if(!c.get("disabled")){var b=a.currentTarget,f=c.getItemByElement(b);c.isItemDisabled(a.item,a.currentTarget)||c.setItemStatus(f,"hover",!0,b)}}).delegate("."+b,"mouseout",function(a){c.get("disabled")||(a=h(a.currentTarget),c.setItemStatusCls("hover",a,!1))})}},{ATTRS:{focusable:{value:!1},items:{value:[]},itemCls:{value:g},idField:{value:"value"},listSelector:{value:"ul"},itemTpl:{value:'\x3cli class\x3d"'+g+'"\x3e{text}\x3c/li\x3e'},tpl:{value:"\x3cul\x3e\x3c/ul\x3e"},itemContainer:{valueFn:function(){return this.get("el").find(this.get("listSelector"))}}}},{xclass:"simple-list",prority:0});e.List.SimpleList=g})(window.BUI,jQuery);(function(e,h){var g=e.List.SimpleList.extend({},{ATTRS:{itemTpl:{value:'\x3cli\x3e\x3cspan class\x3d"bui-checkbox"\x3e\x3c/span\x3e{text}\x3c/li\x3e'},multipleSelect:{value:!0}}},{xclass:"listbox"});e.List.Listbox=g})(window.BUI,jQuery);(function(e,h){e.Toolbar={};var g=e.prefix,c=e.Component.Controller.extend({renderUI:function(){var a=this.get("el");a.addClass(g+"inline-block");a.attr("id")||a.attr("id",this.get("id"))},_uiSetSelected:function(a){var b=this.getStatusCls("selected"),d=this.get("el");a?d.addClass(b):d.removeClass(b)}},{ATTRS:{selected:{sync:!1,value:!1},elTagName:{value:"li"},selectable:{value:!0},focusable:{value:!1},tpl:{value:"\x3cspan\x3e{text}\x3c/span\x3e"}}},{xclass:"bar-item",priority:1}),b=c.extend({_uiSetDisabled:function(a){var b=this.get("el"),d=a?"addClass":"removeClass";b.children("a").attr("disabled",a)[d](g+"btn-disabled")},_uiSetChecked:function(a){var b=this.get("el");a=a?"addClass":"removeClass";b.children("a")[a](g+"btn-checked")},_uiSetText:function(a){this.get("el").children("a").text(a)},_uiSetBtnCls:function(a){this.get("el").children("a").addClass(a)}},{ATTRS:{checked:{value:!1},tpl:{value:'\x3ca href\x3d"#" class\x3d"{btnCls}"\x3e{text}\x3c/a \x3e'},btnCls:{value:"btn btn-default"},text:{sync:!1,value:""}}},{xclass:"bar-item-button",priority:2}),a=c.extend({_uiSetText:function(a){this.get("el").html(a)}},{ATTRS:{text:{value:""}}},{xclass:"bar-item-text",priority:2});c.types={button:b,text:a};e.Toolbar.BarItem=c})(window.BUI,jQuery);(function(e,h){var g=e.List.ChildList.extend({renderUI:function(){var c=this.get("el");c.attr("id")||c.attr("id",e.guid("bar"))}},{ATTRS:{elTagName:{value:"ul"},idField:{value:"id"},defaultChildClass:{value:"bar-item"}}},{xclass:"toolbar",priority:1});e.Toolbar.Bar=g})(window.BUI,jQuery);(function(e,h){var g=e.List.ChildList.extend({initializer:function(){var c=this.get("children"),b=this.get("store");if(1>c.length){var a=this._getItems();e.each(a,function(a){c.push(a)})}b&&b.get("pageSize")&&this.set("pageSize",b.get("pageSize"))},bindUI:function(){var c=this,b=c.get("store");b&&(b.on("load",function(a){c.onLoad(a)}),c._bindButtonEvent())},_bindButtonEvent:function(){function c(){var a=parseInt(b._getCurrentPageValue(),10);b._isPageAllowRedirect(a)?b.jumpToPage(a):b._setCurrentPageValue(b.get("curPage"))}var b=this;b._bindButtonItemEvent("first",function(){b.jumpToPage(1)});b._bindButtonItemEvent("prev",function(){b.jumpToPage(b.get("curPage")-1)});b._bindButtonItemEvent("next",function(){b.jumpToPage(b.get("curPage")+1)});b._bindButtonItemEvent("last",function(){b.jumpToPage(b.get("totalPage"))});b._bindButtonItemEvent("skip",function(){c()});b._bindButtonItemEvent("refresh",function(){b.jumpToPage(b.get("curPage"))});var a=b.getChild("curPage");if(a)a.get("el").on("keydown",function(a){a.stopPropagation();13===a.keyCode&&c()})},_bindButtonItemEvent:function(c,b){var a=this.getChild(c);if(a)a.on("click",b)},onLoad:function(c){var b=this.get("store");this._afterStoreLoad(b,c)},_afterStoreLoad:function(c,b){var a=this.get("pageSize"),d=c.get("pageIndex"),f,e,l;f=(d-1)*a+1;l=c.getTotalCount();e=l-f>a?f+c.getCount()-1:l;a=parseInt((l+a-1)/a,10);a=0<a?a:1;this.set("start",f);this.set("end",e);this.set("totalCount",l);this.set("curPage",d);this.set("totalPage",a);this._setAllButtonsState();this._setNumberPages()},jumpToPage:function(c){if(!(0>=c||c>this.get("totalPage"))){var b=this.get("store"),a=this.get("pageSize"),d=this.fire("beforepagechange",{from:this.get("curPage"),to:c});b&&!1!==d&&b.load({pageSize:a,pageIndex:c})}},_getItems:function(){var c=[];c.push(this._getButtonItem("first"));c.push(this._getButtonItem("prev"));c.push(this._getTextItem("totalPage"));c.push(this._getTextItem("curPage"));c.push(this._getButtonItem("skip"));c.push(this._getButtonItem("next"));c.push(this._getButtonItem("last"));c.push(this._getTextItem("totalCount"));return c},_getButtonItem:function(c){return{id:c,xclass:"bar-item-button",text:this.get(c+"Text"),disabled:!0,elCls:c+"Cls"}},_getTextItem:function(c){return{id:c,xclass:"bar-item-text",text:this._getTextItemTpl(c),elCls:"bar-item-"+c}},_getTextItemTpl:function(c){var b=this.getAttrVals();return e.substitute(this.get(c+"Tpl"),b)},_isPageAllowRedirect:function(c){return c&&0<c&&c<=this.get("totalPage")&&c!==this.get("curPage")},_setAllButtonsState:function(){this.get("store")&&this._setButtonsState(["prev","next","first","last","skip"],!0);1===this.get("curPage")&&this._setButtonsState(["prev","first"],!1);this.get("curPage")===this.get("totalPage")&&this._setButtonsState(["next","last"],!1)},_setButtonsState:function(c,b){var a=this.get("children");e.each(a,function(a){-1!==e.Array.indexOf(a.get("id"),c)&&a.set("disabled",!b)})},_setNumberPages:function(){var c=this,b=c.getChildren();e.each(b,function(a){"bar-item-text"===a.__xclass&&a.set("content",c._getTextItemTpl(a.get("id")))})},_getCurrentPageValue:function(c){if(c=c||this.getChild("curPage"))return c.get("el").find("input").val()},_setCurrentPageValue:function(c,b){(b=b||this.getChild("curPage"))&&b.get("el").find("input").val(c)}},{ATTRS:{firstText:{value:"\u9996 \u9875"},prevText:{value:"\u4e0a\u4e00\u9875"},nextText:{value:"\u4e0b\u4e00\u9875"},lastText:{value:"\u672b \u9875"},skipText:{value:"\u786e \u5b9a"},refreshText:{value:"\u5237 \u65b0"},totalPageTpl:{value:"\u5171 {totalPage} \u9875"},curPageTpl:{value:'\u7b2c \x3cinput type\x3d"text" autocomplete\x3d"off" class\x3d"form-control '+e.prefix+'pb-page" size\x3d"20" value\x3d"{curPage}" name\x3d"inputItem"\x3e \u9875'},totalCountTpl:{value:"\u5171{totalCount}\u6761\u8bb0\u5f55"},curPage:{value:0},totalPage:{value:0},totalCount:{value:0},pageSize:{value:20},elCls:{value:""},defaultChildClass:{value:"bar-item"},elTagName:{value:"ul"},idField:{value:"id"},store:{}}},{xclass:"pagingbar",priority:2});e.Toolbar.PagingBar=g})(window.BUI,jQuery);(function(e,h){var g=e.List.ChildList.extend({initializer:function(){var c=this.get("children"),b=this.get("store");if(1>c.length){var a=this._getItems();e.each(a,function(a){c.push(a)})}b&&b.get("pageSize")&&this.set("pageSize",b.get("pageSize"))},bindUI:function(){var c=this,b=c.get("store");b&&(b.on("load",function(a){c.onLoad(a)}),c._bindButtonEvent())},_bindButtonEvent:function(){var c=this,b=c.get("numberButtonCls");c._bindButtonItemEvent("prev",function(){c.jumpToPage(c.get("curPage")-1)});c._bindButtonItemEvent("next",function(){c.jumpToPage(c.get("curPage")+1)});c.get("el").delegate("a","click",function(a){a.preventDefault();return!1});c.on("click",function(a){(a=a.target)&&a.get("el").hasClass(b)&&(a=a.get("id"),c.jumpToPage(a))})},_bindButtonItemEvent:function(c,b){var a=this.getChild(c);if(a)a.on("click",b)},onLoad:function(c){var b=this.get("store");this._afterStoreLoad(b,c)},_afterStoreLoad:function(c,b){var a=this.get("pageSize"),d=c.get("pageIndex"),f,e,l;f=(d-1)*a+1;l=c.getTotalCount();e=l-f>a?f+c.getCount()-1:l;a=parseInt((l+a-1)/a,10);a=0<a?a:1;this.set("start",f);this.set("end",e);this.set("totalCount",l);this.set("curPage",d);this.set("totalPage",a);this._setAllButtonsState();this._setNumberPages()},jumpToPage:function(c){if(!(0>=c||c>this.get("totalPage"))){var b=this.get("store"),a=this.get("pageSize"),d=this.fire("beforepagechange",{from:this.get("curPage"),to:c});b&&!1!==d&&b.load({pageSize:a,pageIndex:c})}},_getItems:function(){var c=[];c.push(this._getButtonItem("prev"));c.push(this._getButtonItem("next"));return c},_getButtonItem:function(c){return{id:c,content:'\x3ca href\x3d"javascript:;"\x3e\x3cspan aria-hidden\x3d"true"\x3e'+this.get(c+"Text")+"\x3c/span\x3e\x3c/a\x3e",disabled:!0}},_setAllButtonsState:function(){this.get("store")&&this._setButtonsState(["prev","next"],!0);1===this.get("curPage")&&this._setButtonsState(["prev"],!1);this.get("curPage")===this.get("totalPage")&&this._setButtonsState(["next"],!1)},_setButtonsState:function(c,b){var a=this.get("children");e.each(a,function(a){-1!==e.Array.indexOf(a.get("id"),c)&&a.set("disabled",!b)})},_setNumberPages:function(){var c=this,b=c.get("curPage"),a=c.get("totalPage"),a=c._getNumberItems(b,a);c._clearNumberButtons();e.each(a,function(a){c._appendNumberButton(a)});(b=c.getChild(b))&&b.set("selected",!0)},_appendNumberButton:function(c){var b=this.getChildCount();this.addChild(c,b-1)},_clearNumberButtons:function(){this.getChildren();for(var c=this.getChildCount();2<c;)this.removeChildAt(c-2),c=this.getChildCount()},_getNumberItems:function(c,b){function a(a,b){for(var c=a;c<=b;c++)f.push(d._getNumberItem(c))}var d=this,f=[],e=d.get("maxLimitCount"),l=d.get("showRangeCount");if(b<e)e=b,a(1,b);else{var n=c<=e?1:c-l,l=c+l,l=l<b?l>e?l:e:b;1<n&&(a(1,1),2<n&&f.push(d._getEllipsisItem()));e=l;a(n,l)}e<b&&(e<b-1&&f.push(d._getEllipsisItem()),a(b,b));return f},_getEllipsisItem:function(){return{disabled:!0,content:this.get("ellipsisTpl")}},_getNumberItem:function(c){return{id:c,elCls:"bui-button-number"}}},{ATTRS:{prevText:{value:"\u4e0a\u4e00\u9875"},nextText:{value:"\u4e0b\u4e00\u9875"},curPage:{value:0},totalPage:{value:0},totalCount:{value:0},pageSize:{value:20},elCls:{value:"pagination"},defaultChildClass:{value:"bar-item"},elTagName:{value:"ul"},idField:{value:"id"},childStatusCls:{value:{selected:"active",disabled:"disabled"}},childTpl:{value:'\x3ca href\x3d"###"\x3e{id}\x3c/a\x3e'},maxLimitCount:{value:6},showRangeCount:{value:1},numberButtonCls:{value:"bui-button-number"},ellipsisTpl:{value:'\x3ca href\x3d"#"\x3e...\x3c/a\x3e'},store:{}}},{xclass:"pagingnumberbar",priority:2});e.Toolbar.NumberPagingBar=g})(window.BUI,jQuery);(function(e,h){function g(a){var b,d,c;a.length&&!h.isWindow(a[0])?(b=a.offset(),d=a.outerWidth(),c=a.outerHeight(),1>d&&(d=a[0].offsetWidth||a[0].clientWidth),1>c&&(c=a[0].offsetHeight||a[0].clientHieght)):(b={left:e.scrollLeft(),top:e.scrollTop()},d=e.viewportWidth(),c=e.viewportHeight());b.width=d;b.height=c;return b}function c(a,b){var d=b.charAt(0),c=b.charAt(1),f=a.width,e=a.height,k,l;k=a.left;l=a.top;"c"===d?l+=e/2:"b"===d&&(l+=e);"c"===c?k+=f/2:"r"===c&&(k+=f);return{left:k,top:l}}function b(a,b){var d=a.get("hideExceptNode");return d&&d.length?h.contains(d[0],b):!1}e.Overlay={};var a=e.wrapBehavior,d=e.getWrapBehavior,f=window,k=e.Component.Controller.extend({move:function(a,b){e.isArray(a)&&(b=a[1],a=a[0]);this.set("xy",[a,b]);return this},show:function(){var a=this;a.get("el");a.get("rendered")||(a.render(),a.get("el"));a.set("visible",!0);var b=a.get("align");a.set("align",b);var b=a.get("autoHideDelay"),d=a.get("delayHandler");b&&(d&&clearTimeout(d),d=setTimeout(function(){a.hide();a.set("delayHandler",null)},b),a.set("delayHandler",d))},hide:function(){this.set("visible",!1)},createDom:function(){this._setTrigger()},renderUI:function(){var a=this.get("align"),b=this.get("el"),d=this.get("arrowContainer"),b=d?b.one(d):b;a&&!a.node&&(a.node=this.get("render")||this.get("trigger"));this.get("showArrow")&&h(this.get("arrowTpl")).appendTo(b)},bindUI:function(){var a=this,b=a.get("triggerActiveCls");if(b)a.on("hide",function(){var d=a.get("curTrigger");d&&d.removeClass(b)});a.on("afterVisibleChange",function(b){b=b.newVal;a.get("autoHide")&&(b?a._bindHideEvent():a._clearHideEvent())});var d=e.wrapBehavior(a,"handleWindowResize");a.on("show",function(){h(window).on("resize",d)});a.on("hide",function(){h(window).off("resize",d)})},handleWindowResize:function(){var a=this.get("align");this.set("align",a)},align:function(a,b,d,k){a=h(a||f);d=d&&[].concat(d)||[0,0];k=this.get("el");var l=g(k),n=g(a),m=d;d=l.left;a=l.top;n=c(n,b[0]);b=c(l,b[1]);b=[b.left-n.left,b.top-n.top];b=e.merge(l,{left:d-b[0]+ +m[0],top:a-b[1]+ +m[1]});b.left!=l.left&&(this.setInternal("x",null),this.set("x",b.left));b.top!=l.top&&(this.setInternal("y",null),this.set("y",b.top));b.width!=l.width&&k.width(k.width()+b.width-l.width);b.height!=l.height&&k.height(k.height()+b.height-l.height);return this},center:function(a){this.set("align",{node:a,points:["cc","cc"],offset:[0,0]});return this},_setTrigger:function(){function a(a){if(!d.get("disabled")){var b=d.get("curTrigger"),c=v?h(a.currentTarget):h(this),f=d.get("align");b&&b[0]==c[0]||(b&&b.removeClass(g),d.set("curTrigger",c),d.fire("triggerchange",{prevTrigger:b,curTrigger:c}));c.addClass(g);d.get("autoAlign")&&(f.node=c);d.show();k&&k(a)}}function b(a){(a=a.toElement||a.relatedTarget)&&d.containsElement(a)||d.hide()}var d=this,c=d.get("triggerEvent"),f=d.get("triggerHideEvent"),k=d.get("triggerCallback"),g=d.get("triggerActiveCls")||"",q=d.get("trigger"),v=d.get("delegateTrigger"),w=h(q);if(c)if(v&&e.isString(q))h(document).delegate(q,c,a);else w.on(c,a);if(f)if(v&&e.isString(q))h(document).delegate(q,f,b);else w.on(f,b)},handleMoveOuter:function(a){a=a.toElement||a.relatedTarget;this.containsElement(a)||b(this,a)||!1!==this.fire("autohide")&&this.hide()},handleDocumentClick:function(a){a=a.target;this.containsElement(a)||b(this,a)||!1!==this.fire("autohide")&&this.hide()},destructor:function(){var a=this.get("triggerEvent"),b=this.get("trigger"),d=this.get("delegateTrigger"),c=h(b);a&&(d&&e.isString(b)?h(document).undelegate(b,a):c.off(a))},_bindHideEvent:function(){var b=this.get("curTrigger");if("click"===this.get("autoHideType"))h(document).on("mousedown",a(this,"handleDocumentClick"));else if(this.get("el").on("mouseleave",a(this,"handleMoveOuter")),b)h(b).on("mouseleave",a(this,"handleMoveOuter"))},_clearHideEvent:function(){var a=this.get("curTrigger");"click"===this.get("autoHideType")?h(document).off("mousedown",d(this,"handleDocumentClick")):(this.get("el").off("mouseleave",d(this,"handleMoveOuter")),a&&h(a).off("mouseleave",d(this,"handleMoveOuter")))},_uiSetAlign:function(a,b){a&&a.points&&(this.align(a.node,a.points,a.offset,a.overflow),this.set("cachePosition",null))},_uiSetX:function(a){null!=a&&(this.get("el").offset({left:a}),this.setInternal("left",a),-999!=a&&this.set("cachePosition",null))},_uiSetY:function(a){null!=a&&(this.get("el").offset({top:a}),this.setInternal("top",a),-999!=a&&this.set("cachePosition",null))},_uiSetLeft:function(a){null!=a&&(this.get("el").css({left:a}),this.setInternal("x",a))},_uiSetZIndex:function(a){this.get("el").css("z-index",a)},_uiSetTop:function(a){null!=a&&(this.get("el").css({top:a}),this.setInternal("y",a))}},{ATTRS:{x:{valueFn:function(){return this.get("el")&&this.get("el").offset().left}},y:{valueFn:function(){return this.get("el")&&this.get("el").offset().top}},left:{},top:{},xy:{setter:function(a){var b=h.makeArray(a);b.length&&(b[0]&&this.set("x",b[0]),b[1]&&this.set("y",b[1]));return a},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{},autoHideDelay:{},closeable:{value:!1},visibleMode:{value:"visibility"},visible:{value:!1},align:{shared:!1,value:{}},autoHideType:{value:"click"},autoHide:{value:!1},hideExceptNode:{},trigger:{},delegateTrigger:{value:!1},autoAlign:{value:!0},arrowTpl:{value:'\x3cs class\x3d"tooltip-arrow"\x3e\x3cs class\x3d"tooltip-arrow-inner"\x3e\x3c/s\x3e\x3c/s\x3e'},showArrow:{value:!1},arrowContainer:{},triggerActiveCls:{},curTrigger:{},triggerCallback:{},triggerEvent:{value:"click"},triggerHideEvent:{},events:{value:{autohide:!1,triggerchange:!1}}}},{xclass:"overlay"});e.Overlay.Overlay=k})(window.BUI,jQuery);(function(e,h){function g(a){a=h('\x3cdiv style\x3d"left: 0px; top: 0px; width: 100%; height: 100%; position: fixed;" class\x3d"'+a+'"\x3e\x3c/div\x3e').prependTo("body");a.on("mousedown",function(a){a.preventDefault()});return a}function c(a,b){var c=a.get("contentEl"),f=a.get(b);f||(f=h('\x3cdiv class\x3d"'+d+b+'" \x3e\x3c/div\x3e'),f.appendTo(c),a.setInternal(b,f))}function b(a,b,d){b=a.get(b);e.isString(d)?b.html(d):b.html("").append(d)}var a=e.Overlay.Overlay,d=e.prefix+"stdmod-",f=e.prefix,k={},l={hide:"hide",destroy:"destroy",remove:"remove"};e.guid("drag");a=a.extend({renderUI:function(){c(this,"header");c(this,"body");c(this,"footer")},bindUI:function(){function a(a){var b=d.get("draging");b&&(a.preventDefault(),d._dragMoveTo(a.pageX,a.pageY,b))}function b(c){1==c.which&&(d.set("draging",!1),h(document).off("mousemove",a),h(document).off("mouseup",b))}var d=this,c=d.get("dragNode");d.on("closeclick",function(){return d.onCancel()});d.get("mask")&&(d.on("show",function(){d._maskExtShow()}),d.on("hide",function(){d._maskExtHide()}));if(c)c.on("mousedown",function(c){1==c.which&&(c.preventDefault(),d.set("draging",{elX:d.get("x"),elY:d.get("y"),startX:c.pageX,startY:c.pageY}),h(document).on("mousemove",a),h(document).on("mouseup",b))})},_dragMoveTo:function(a,b,d){d=d||this.get("draging");this.set("xy",[d.elX-(d.startX-a),d.elY-(d.startY-b)])},getContentElement:function(){return this.get("body")},close:function(){var a=l[this.get("closeAction")||"hide"];if(!1!==this.fire("closing",{action:a})){this.fire("beforeclosed",{action:a});if("remove"==a)this[a](!0);else this[a]();this.fire("closed",{action:a})}},onCancel:function(){return this.get("cancel").call(this)},_maskExtShow:function(){var a,b=this.get("prefixCls")+"mask",d=k[b],c=this.get("maskShared"),f=this.get("maskNode");f||(c?d?f=d.node:(f=g(b),d=k[b]={num:0,node:f}):f=g(b),this.setInternal("maskNode",f));(a=this.get("zIndex"))&&f.css("z-index",a-1);c&&d.num++;c&&1!=d.num||f.show();h("body").addClass("bui-masked-relative")},_maskExtHide:function(){var a=this.get("prefixCls")+"mask",a=k[a],b=this.get("maskShared"),d=this.get("maskNode");b&&a?(a.num=Math.max(a.num-1,0),0==a.num&&d.hide()):d&&d.hide();h("body").removeClass("bui-masked-relative")},_uiSetButtons:function(a){var b=this,d=b.get("footer");d.children().remove();e.each(a,function(a){b._createButton(a,d)})},_createButton:function(a,b){var d=this;h('\x3cbutton class\x3d"'+a.elCls+'"\x3e'+a.text+"\x3c/button\x3e").appendTo(b).on("click",function(){a.handler.call(d,d,this)})},_uiSetBodyStyle:function(a){this.get("body").css(a)},_uiSetHeaderStyle:function(a){this.get("header").css(a)},_uiSetFooterStyle:function(a){this.get("footer").css(a)},_uiSetBodyContent:function(a){b(this,"body",a)},_uiSetHeaderContent:function(a){b(this,"header",a)},_uiSetFooterContent:function(a){b(this,"footer",a)},_uiSetTitle:function(a){this.get("el").find(".header-title").html(a)},_uiSetContentId:function(a){var b=this.get("body");h("#"+a).children().appendTo(b)},_uiSetHeight:function(a){var b=this.get("header"),d=this.get("body"),c=this.get("footer");a-=b.outerHeight()+c.outerHeight();d.height(a-30)},_uiSetCloseable:function(a){var b=this,d=b.get("closeBtn");a?(d||b.setInternal("closeBtn",d=h(b.get("closeTpl"))),d.appendTo(b.get("el"),void 0)):d&&d.remove();if(a)d.on("click",function(a){!1!==b.fire("closeclick",{domTarget:a.target})&&b.close();return!1})},destructor:function(){var a=this.get("contentId"),b=this.get("body");"destroy"==this.get("closeAction")&&(this.hide(),a&&b.children().appendTo("#"+a));(a=this.get("closeBtn"))&&a.detach();a=this.get("maskShared");b=this.get("maskNode");this.get("maskNode")&&(a?this.get("visible")&&this._maskExtHide():b.remove())}},{ATTRS:{header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{value:'\x3cdiv class\x3d"header-title"\x3e\u6807\u9898\x3c/div\x3e'},bodyContent:{},footerContent:{},closeTpl:{value:'\x3ca tabindex\x3d"0" href\x3djavascript:void("0") class\x3d"'+f+'ext-close" style\x3d""\x3e\x3cspan class\x3d"'+f+'ext-close-x"\x3e\u00d7\x3c/span\x3e\x3c/a\x3e'},buttons:{value:[{text:"\u786e\u5b9a",elCls:"btn btn-primary",handler:function(){var a=this.get("success");a&&a.call(this)}},{text:"\u53d6\u6d88",elCls:"btn btn-default",handler:function(a,b){!1!==this.onCancel()&&this.close()}}]},contentId:{},success:{value:function(){this.close()}},cancel:{value:function(){}},dragNode:{valueFn:function(){return this.get("header")}},title:{value:"\u6807\u9898"},align:{sync:!1,value:{node:window,points:["cc","cc"]}},mask:{value:!1},maskNode:{},maskShared:{value:!1},closeable:{value:!0},closeBtn:{value:!1},closeAction:{value:"hide"},draging:{setter:function(a){if(!0===a)return{}},value:null}}},{xclass:"dialog"});e.Overlay.Dialog=a})(window.BUI,jQuery);(function(e,h){var g=e.Overlay.Dialog,c={info:{iconfont:"iconfont-lg icon-info",cls:"text-info"},error:{iconfont:"iconfont-lg icon-error",cls:"text-danger"},success:{iconfont:"iconfont-lg icon-successful",cls:"text-success"},question:{iconfont:"iconfont-lg icon-question",cls:"text-primary"},warning:{iconfont:"iconfont-lg icon-warning",cls:"text-warning"}};e.Message={Alert:function(b,a,d){e.isString(a)&&(d=a,a=null);d=d||"success";b=new g({mask:!0,bodyContent:'\x3cdiv\x3e\x3cspan class\x3d"bui-messager"\x3e\x3ci class\x3d"'+c[d].iconfont+" "+c[d].cls+'"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan\x3e'+b+"\x3c/span\x3e\x3c/div\x3e",buttons:[{text:"\u786e\u5b9a",elCls:"btn btn-primary",handler:function(){a?!1!==a.call(this)&&this.destroy():this.destroy()}}]});b.show();return b},Confirm:function(b,a){e.isString(a)&&(icon=a,a=null);var d=new g({mask:!0,bodyContent:'\x3cdiv\x3e\x3cspan class\x3d"bui-messager"\x3e\x3ci class\x3d"'+c.question.iconfont+" "+c.question.cls+'"\x3e\x3c/i\x3e \x3c/span\x3e\x3cspan\x3e'+b+"\x3c/span\x3e\x3c/div\x3e",buttons:[{text:"\u786e\u5b9a",elCls:"btn btn-primary",handler:function(){a?!1!==a.call(this)&&this.destroy():this.destroy()}},{text:"\u53d6\u6d88",elCls:"btn",handler:function(){this.destroy()}}]});d.show();return d},Show:function(b){b=b||{};b=new g(b);b.show();return b}}})(window.BUI,jQuery);(function(e,h){e.Menu={};var g=function(c){g.superclass.constructor.call(this,c);this.init()};g.ATTRS={renderEl:{value:""},activeMenu:{value:""},activeItem:{value:""},events:{click:!1}};e.extend(g,e.Base);e.augment(g,{init:function(){var c=this.get("render");this.set("renderEl",h(c));this.syncItems();this.bindEvents()},syncItems:function(){var c=this.get("renderEl").children(".active");this.set("activeMenu",c)},bindEvents:function(){var c=this;c.get("renderEl").delegate("a","click",function(b){var a=h(this),d=a.parent("li"),f=d.children("ul");if(f.hasClass("treeview-menu")&&f.hasClass("menu-open"))d.removeClass("active"),d.removeClass("menu-open"),f.removeClass("menu-open");else if(f.hasClass("treeview-menu")&&!f.hasClass("menu-open")){if(a=c.get("activeMenu"))a.removeClass("active"),a.removeClass("menu-open"),a.children("ul").removeClass("menu-open");f.addClass("menu-open");d.addClass("active");d.removeClass("menu-open");c.set("activeMenu",d)}else{if(a.hasClass("active"))return!0;var e=c.get("activeItem");e&&e.removeClass("active");d.addClass("active");c.set("activeItem",d);c.fire("click",{href:a.attr("data-href"),target:a,text:a.text()})}f.is(".treeview-menu")&&b.preventDefault()})},syncFit:function(){var c=this.get("renderEl"),b=c.parent().height();c.css({height:b})}});e.Menu.SideMenu=g})(window.BUI,jQuery);(function(e,h){e.Picker={};var g=e.Overlay.Overlay.extend({bindUI:function(){var c=this;c.on("show",function(b){c.get("isInit")||c._initControl();c.get("autoSetValue")&&(b=c.get("valueField")||c.get("textField")||c.get("curTrigger"),b=h(b).val(),c.setSelectedValue(b))})},_initControl:function(){if(!this.get("isInit")){if(!this.get("innerControl")){var c=this.createControl();this.get("children").push(c)}this.initControlEvent();this.set("isInit",!0)}},initControl:function(){this._initControl()},createControl:function(){},initControlEvent:function(){var c=this,b=c.get("innerControl"),a=h(c.get("trigger")),d=c.get("hideEvent");b.on(c.get("changeEvent"),function(b){var d=c.get("curTrigger"),f=c.get("textField")||d||a,d=c.get("valueField"),e=c.getSelectedValue(),g=!1;if(f){var t=c.getSelectedText(),p=h(f).val();t!=p&&(h(f).val(t),g=!0,h(f).trigger("change"))}d&&c.get("autoSetValue")&&(f=h(d).val(),d!=f&&(h(d).val(e),g=!0,h(d).trigger("change")));if(g)c.onChange(t,e,b)});if(d)b.on(c.get("hideEvent"),function(){var a=c.get("curTrigger");try{a&&a.focus()}catch(k){e.log(k)}c.hide()})},setSelectedValue:function(c){},getSelectedValue:function(){},getSelectedText:function(){},focus:function(){this.get("innerControl").focus()},onChange:function(c,b,a){a=this.get("curTrigger");this.fire("selectedchange",{value:b,text:c,curTrigger:a})},_uiSetValueField:function(c){null!=c&&""!==c&&this.get("autoSetValue")&&this.setSelectedValue(h(c).val())},_getTextField:function(){return this.get("textField")||this.get("curTrigger")}},{ATTRS:{innerControl:{getter:function(){return this.get("children")[0]}},triggerEvent:{value:"click"},autoSetValue:{value:!0},changeEvent:{value:"selectedchange"},autoHide:{value:!0},hideEvent:{value:"itemclick"},zIndex:{value:1090},textField:{},align:{value:{points:["bl","tl"],offset:[0,0]}},valueField:{}}},{xclass:"picker"});e.Picker.Picker=g})(window.BUI,jQuery);(function(e,h){var g=e.Picker.Picker.extend({initializer:function(){var c=this.get("children");this.get("list")||c.push({})},setSelectedValue:function(c){c=e.isNullOrEmpty(c)?"":c.toString();this.get("isInit")||this._initControl();var b=this.get("list"),a=this.getSelectedValue();c!==a&&b.getCount()&&(b.get("multipleSelect")&&b.clearSelection(),b.setSelectionByField(c.split(",")))},onChange:function(c,b,a){var d=this.get("curTrigger");this.fire("selectedchange",{value:b,text:c,curTrigger:d,item:a.item})},getSelectedValue:function(){return this.get("list").getSelectionValues().join(",")},getSelectedText:function(){return this.get("list").getSelectionText().join(",")}},{ATTRS:{defaultChildClass:{value:"simple-list"},list:{getter:function(){return this.get("children")[0]}}}},{xclass:"list-picker"});e.Picker.ListPicker=g})(window.BUI,jQuery);(function(e,h){function g(a){if(h.isPlainObject(a)){var b=[];e.each(a,function(a,d){b.push({value:d,text:a})});return b}var d=[];e.each(a,function(a,b){e.isString(a)?d.push({value:a,text:a}):d.push(a)});return d}e.Select={};var c=e.prefix,b=e.Component,a=e.Picker.ListPicker,d=c+"select-input",d=b.Controller.extend({initializer:function(){var b=this.get("multipleSelect"),d;d=this.get("picker");var l;d?this.get("valueField")&&d.set("valueField",this.get("valueField")):(d=b?"listbox":"simple-list",l=this.get("list")||{},l=e.mix(l,{xclass:d,elCls:c+"select-list",items:g(this.get("items"))}),d=new a({children:[l],valueField:this.get("valueField")}),this.set("picker",d));b&&d.set("hideEvent","")},renderUI:function(){var a=this.get("picker"),b=this._getTextEl();a.set("trigger",this.getTrigger());a.set("triggerEvent",this.get("triggerEvent"));a.set("autoSetValue",this.get("autoSetValue"));a.set("textField",b);a.set("width",this.get("width")||200);a.render();this.set("list",a.get("list"))},bindUI:function(){var a=this,b=a.get("picker"),d=b.get("list");b.on("selectedchange",function(b){b.item&&a.fire("change",{text:b.text,value:b.value,item:b.item})});if(a.get("autoSetValue"))d.on("itemsshow",function(){a._syncValue()});b.on("show",function(){a.get("forceFit")&&b.set("width",a.get("el").outerWidth())})},containsElement:function(a){var d=this.get("picker");return b.Controller.prototype.containsElement.call(this,a)||d.containsElement(a)},getTrigger:function(){return this.get("el")},_uiSetItems:function(a){a&&(this.get("picker").get("list").set("items",g(a)),this._syncValue())},_syncValue:function(){var a=this.get("picker"),b=this.get("valueField");b&&a.setSelectedValue(h(b).val())},_uiSetName:function(a){var b=this._getTextEl();a&&b.attr("name",a)},_uiSetWidth:function(a){if(null!=a){var b=this.get("el");b.width(a);if(this.get("forceFit")){var d=this._getTextEl(),b=b.find(".input-group-btn"),c=d.outerWidth()-d.width(),b=a-b.outerWidth()-c;d.width(b)}this.get("forceFit")&&this.get("picker").set("width",a)}},_uiSetDisabled:function(a){var b=this.get("picker"),d=this._getTextEl();b.set("disabled",a);d&&d.attr("disabled",a)},_getTextEl:function(){var a=this.get("el");return a.is("input")?a:a.find("input")},destructor:function(){var a=this.get("picker");a&&a.destroy()},_getList:function(){return this.get("picker").get("list")},getSelectedValue:function(){return this.get("picker").getSelectedValue()},setSelectedValue:function(a){this.get("picker").setSelectedValue(a)},getSelectedText:function(){return this.get("picker").getSelectedText()}},{ATTRS:{picker:{},list:{},valueField:{},focusable:{value:!0},autoSetValue:{value:!0},multipleSelect:{value:!1},name:{},items:{sync:!1},forceFit:{value:!0},inputCls:{value:d},events:{value:{change:!1}},elCls:{value:"input-group"},tpl:{value:'\x3cinput type\x3d"text" class\x3d"form-control '+d+'"/\x3e\x3cspan class\x3d"input-group-btn"\x3e\x3cbutton class\x3d"btn btn-default" type\x3d"button"\x3e\x3ci class\x3d"iconfont icon-down"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/span\x3e'},triggerEvent:{value:"click"}}},{xclass:"select"});e.Select.Select=d})(window.BUI,jQuery);(function(e,h){var g=e.KeyCode,c=e.prefix+"search-input",c=e.Component.Controller.extend({bindUI:function(){var b=this,a=b._getTextEl(),d=b._getSearchEl(),c=b.get("valueField");a.on("keydown",function(d){if(b.get("disabled"))return!1;if(d.which==g.ENTER){d="";c&&(d=h(c).val());var f=a.val(),e=b.get("searchParam")||{};b.fire("search",{param:e,value:d,text:f,evttype:"keydown"})}});d.on("click",function(d){if(b.get("disabled"))return!1;d="";c&&(d=h(c).val());var f=a.val(),e=b.get("searchParam")||{};b.fire("search",{param:e,value:d,text:f,evttype:"click"})})},getTrigger:function(){return this.get("el")},_uiSetName:function(b){var a=this._getTextEl();b&&a.attr("name",b)},_uiSetWidth:function(b){if(null!=b){var a=this.get("el");a.width(b);if(this.get("forceFit")){var d=this._getTextEl(),a=a.find(".input-group-btn"),c=d.outerWidth()-d.width();b=b-a.outerWidth()-c;d.width(b)}}},_uiSetDisabled:function(b){var a=this._getTextEl();a&&a.attr("disabled",b)},_getTextEl:function(){var b=this.get("el");return b.is("input")?b:b.find("input")},_getSearchEl:function(){var b=this.get("el");return b.is("span")?b:b.find("span")},getSearchValue:function(){var b=this.get("valueField"),a="";b&&(a=h(b).val());return a},setSearchValue:function(b){var a=this.get("valueField");b=e.isNullOrEmpty(b)?"":b.toString();var d=this.getSearchValue();b!=d&&(a.val(b),this.fire("change",{oldValue:d,newValue:b}))},setSearchText:function(b){this._getTextEl().val(b)},getSearchText:function(){return this._getTextEl().val()||""}},{ATTRS:{valueField:{},focusable:{value:!0},forceFit:{value:!0},searchParam:{},name:{},events:{value:{search:!1}},inputCls:{value:c},elCls:{value:"input-group"},tpl:{value:'\x3cinput type\x3d"text" class\x3d"form-control '+c+'"/\x3e\x3cspan class\x3d"input-group-btn"\x3e\x3cbutton class\x3d"btn btn-default" type\x3d"button"\x3e\x3ci class\x3d"iconfont icon-search"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/span\x3e'}}},{xclass:"search"});e.Select.Search=c})(window.BUI,jQuery);(function(e){e.Calendar={};var h={"zh-CN":{yearMonthMask:"yyyy \u5e74 mm \u6708",months:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),weekDays:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split(""),today:"\u4eca\u5929",clean:"\u6e05\u9664",submit:"\u786e\u5b9a",cancel:"\u53d6\u6d88"},en:{yearMonthMask:"MMM yyyy",months:"Jan Feb Mar Apr May Jun Jul Aug Sept Oct Nov Dec".split(" "),weekDays:"Su Mo Tu We Th Fr Sa".split(" "),today:"today",clean:"clean",submit:"submit",cancel:"cancel"},setLanguage:function(g){h[g]&&e.mix(this,h[g])}};h.setLanguage("zh-CN");e.Calendar.Resource=h})(window.BUI);(function(e,h){var g=e.prefix,c=e.Calendar.Resource,b=e.Date,a=e.Component.Controller.extend({bindUI:function(){var a=this,b=a.get("el");b.delegate(".bui-datepicker-arrow","click",function(b){b=h(b.currentTarget);b.hasClass("bui-datepicker-next")?a.nextMonth():b.hasClass("bui-datepicker-prev")&&a.prevMonth();return!1});b.delegate(".bui-datepicker-month","click",function(){a.fire("headerclick")})},setMonth:function(a,b){var d=this.get("year"),c=this.get("month");if(a!==d||b!==c)this.set("year",a),this.set("month",b),this.fire("monthchange",{year:a,month:b})},nextMonth:function(){var a=new Date(this.get("year"),this.get("month")+1);this.setMonth(a.getFullYear(),a.getMonth())},prevMonth:function(){var a=new Date(this.get("year"),this.get("month")-1);this.setMonth(a.getFullYear(),a.getMonth())},_uiSetYear:function(a){var b=this.get("month");isNaN(b)||this._setYearMonth(a,b)},_uiSetMonth:function(a){var b=this.get("year");isNaN(b)||this._setYearMonth(b,a)},_setYearMonth:function(a,f){var d=b.format(new Date(a,f),c.yearMonthMask);-1!==d.indexOf("000")&&(d=d.replace("000",c.months[f]));this.get("el").find("."+g+"year-month-text").html(d)}},{ATTRS:{year:{sync:!0},month:{sync:!0,setter:function(a){this.set("monthText",a+1)}},monthText:{},tpl:{valueFn:function(){return'\x3cdiv class\x3d"bui-datepicker-arrow bui-datepicker-prev"\x3e\x3cspan class\x3d"iconfont icon-left"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"bui-datepicker-month"\x3e\x3cdiv class\x3d"month-text-container"\x3e\x3cspan class\x3d"'+g+'year-month-text "\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"bui-datepicker-arrow bui-datepicker-next"\x3e\x3cspan class\x3d"iconfont icon-right "\x3e\x3c/span\x3e\x3c/div\x3e'}},elCls:{value:"bui-datepicker-header"},events:{value:{monthchange:!0}}}},{xclass:"calendar-header"});e.Calendar.Header=a})(window.BUI,jQuery);(function(e,h){var g=e.Date,c=e.Calendar.Resource,b="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),a=e.Component.Controller.extend({initializer:function(){var a=new Date;this.get("year")||this.set("year",a.getFullYear());this.get("month")||this.set("month",a.getMonth())},renderUI:function(){this.updatePanel()},updatePanel:function(){var a=this.get("el").find("tbody"),b=this._getPanelInnerTpl();a.empty();h(b).appendTo(a)},_getPanelInnerTpl:function(){for(var a=this._getFirstDate(),b=[],c=0;6>c;c++){var e=g.addWeek(c,a);b.push(this._getWeekTpl(e))}return b.join("")},_getFirstDate:function(a,b){var d=this._getMonthFirstDate(a,b),c=d.getDay();return g.addDay(-1*c,d)},_getWeekTpl:function(a){for(var d=this.get("weekTpl"),c=[],l=0;l<b.length;l++){var h=g.addDay(l,a);c.push(this._getDayTpl(h))}return e.substitute(d,{daysTpl:c.join("")})},_getDayTpl:function(a){var d=this.get("dayTpl"),c=a.getDay(),h=this._isToday(a)?"bui-datepicker-today":"",c=b[c],n=a.getDate(),m=this._isInRange(a)?this._isCurrentMonth(a)?"active":"prevday":"disabled";return e.substitute(d,{dayOfWeek:c,dateType:m,dateNumber:n,todayCls:h,date:g.format(a,"isoDate")})},bindUI:function(){var a=this,b=a.get("el");b.delegate(".bui-datepicker-date","click",function(b){var d=h(b.target).closest(".bui-datepicker-date");d&&(d=d.attr("title"))&&(d=g.parse(d),a._isInRange(d)&&a.set("selected",d));b.preventDefault()});b.delegate(".bui-datepicker-disabled","click",function(a){a.stopPropagation()})},setMonth:function(a,b){var d=this.get("year"),c=this.get("month");if(a!==d||b!==c)this.set("year",a),this.set("month",b),this.updatePanel()},_uiSetSelected:function(a,b){b&&b.prevVal&&g.isDateEquals(a,b.prevVal)||(this.setMonth(a.getFullYear(),a.getMonth()),this._setSelectedDate(a),this.fire("selectedchange",{date:a}))},_setSelectedDate:function(a){a=this._findDateElement(a);this._clearSelectedDate();a&&a.addClass("bui-datepicker-selected")},_findDateElement:function(a){var b=g.format(a,"isoDate");a=this.get("el").find(".bui-datepicker-date");var d=null;b&&a.each(function(a,c){if(h(c).attr("title")===b)return d=h(c),!1});return d},_clearSelectedDate:function(){this.get("el").find(".bui-datepicker-selected").removeClass("bui-datepicker-selected")},_getMonthFirstDate:function(a,b){a=a||this.get("year");b=b||this.get("month");return new Date(a,b)},_isCurrentMonth:function(a){return a.getMonth()===this.get("month")},_isToday:function(a){var b=new Date;return b.getFullYear()===a.getFullYear()&&b.getMonth()===a.getMonth()&&b.getDate()===a.getDate()},_isInRange:function(a){var b=this.get("maxDate"),d=this.get("minDate");return d&&a<d||b&&a>b?!1:!0},_uiSetMaxDate:function(a){a&&this.updatePanel()},_uiSetMinDate:function(a){a&&this.updatePanel()}},{ATTRS:{year:{},month:{},selected:{},focusable:{value:!0},dayTpl:{value:'\x3ctd class\x3d"bui-datepicker-date bui-datepicker-{dateType} {todayCls} day-{dayOfWeek}" title\x3d"{date}"\x3e\x3ca href\x3d"#" hidefocus\x3d"on" tabindex\x3d"1"\x3e\x3cem\x3e\x3cspan\x3e{dateNumber}\x3c/span\x3e\x3c/em\x3e\x3c/a\x3e\x3c/td\x3e'},events:{value:{click:!1,selectedchange:!0}},maxDate:{setter:function(a){if(a)return e.isString(a)?g.parse(a):a}},minDate:{setter:function(a){if(a)return e.isString(a)?g.parse(a):a}},weekTpl:{value:"\x3ctr\x3e{daysTpl}\x3c/tr\x3e"},tpl:{valueFn:function(){return'\x3ctable style\x3d"width:100%" cellspacing\x3d"0"\x3e\x3cthead\x3e\x3ctr\x3e\x3cth  title\x3d"Sunday"\x3e\x3cspan\x3e'+c.weekDays[0]+'\x3c/span\x3e\x3c/th\x3e\x3cth  title\x3d"Monday"\x3e\x3cspan\x3e'+c.weekDays[1]+'\x3c/span\x3e\x3c/th\x3e\x3cth  title\x3d"Tuesday"\x3e\x3cspan\x3e'+c.weekDays[2]+'\x3c/span\x3e\x3c/th\x3e\x3cth  title\x3d"Wednesday"\x3e\x3cspan\x3e'+c.weekDays[3]+'\x3c/span\x3e\x3c/th\x3e\x3cth  title\x3d"Thursday"\x3e\x3cspan\x3e'+c.weekDays[4]+'\x3c/span\x3e\x3c/th\x3e\x3cth  title\x3d"Friday"\x3e\x3cspan\x3e'+c.weekDays[5]+'\x3c/span\x3e\x3c/th\x3e\x3cth  title\x3d"Saturday"\x3e\x3cspan\x3e'+c.weekDays[6]+'\x3c/span\x3e\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody class\x3d"bui-datepicker-body"\x3e\x3c/tbody\x3e\x3c/table\x3e'}}}},{xclass:"calendar-panel",priority:0});e.Calendar.Panel=a})(window.BUI,jQuery);(function(e,h){function g(){return h.map(a.months,function(a,b){return{text:a,value:b}})}var c=e.Component,b=e.List.SimpleList,a=e.Calendar.Resource,d=e.Toolbar,f=e.prefix,k=b.extend({bindUI:function(){var a=this;a.get("el").delegate("a","click",function(a){a.preventDefault()}).delegate(".bui-monthpicker-month","dblclick",function(){a.fire("monthdblclick")})}},{ATTRS:{itemTpl:{value:'\x3cli class\x3d"bui-monthpicker-item bui-monthpicker-month"\x3e\x3ca href\x3d"#" hidefocus\x3d"on"\x3e{text}\x3c/a\x3e\x3c/li\x3e'},itemCls:{value:"bui-monthpicker-item"},items:{valueFn:function(){return g()}},elCls:{value:"bui-monthpicker-months"}}},{xclass:"calendar-month-panel"}),l=b.extend({bindUI:function(){var a=this,b=a.get("el");b.delegate("a","click",function(a){a.preventDefault()});b.delegate(".bui-monthpicker-year","dblclick",function(){a.fire("yeardblclick")});b.delegate(".x-icon","click",function(b){b=h(b.currentTarget);b.hasClass("bui-monthpicker-yearnav-prev")?a._prevPage():b.hasClass("bui-monthpicker-yearnav-next")&&a._nextPage()});a.on("itemselected",function(b){b.item&&a.setInternal("year",b.item.value)})},_prevPage:function(){var a=this.get("start"),b=this.get("yearCount");this.set("start",a-b)},_nextPage:function(){var a=this.get("start"),b=this.get("yearCount");this.set("start",a+b)},_uiSetStart:function(){this._setYearsContent()},_uiSetYear:function(a){this.findItemByField("value",a)?this.setSelectedByField(a):this.set("start",a)},_setYearsContent:function(){for(var a=this.get("year"),b=this.get("start"),d=this.get("yearCount"),c=[],e=b;e<b+d;e++)c.push({text:e.toString(),value:e});this.set("items",c);this.setSelectedByField(a)}},{ATTRS:{items:{value:[]},elCls:{value:"bui-monthpicker-years"},itemCls:{value:"bui-monthpicker-item"},year:{},start:{value:(new Date).getFullYear()},yearCount:{value:10},itemTpl:{value:'\x3cli class\x3d"bui-monthpicker-item bui-monthpicker-year"\x3e\x3ca href\x3d"#" hidefocus\x3d"on"\x3e{text}\x3c/a\x3e\x3c/li\x3e'},tpl:{value:'\x3cdiv class\x3d"bui-monthpicker-yearnav"\x3e\x3cspan class\x3d"bui-monthpicker-yearnav-prev x-icon"\x3e\x3cspan class\x3d"iconfont icon-left" aria-hidden\x3d"true"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"bui-monthpicker-yearnav-next x-icon"\x3e\x3cspan class\x3d"iconfont icon-right" aria-hidden\x3d"true"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3cul\x3e\x3c/ul\x3e'}}},{xclass:"calendar-year-panel"}),c=c.Controller.extend({initializer:function(){var a=this.get("children"),b=new k,d=new l,c=this._createFooter();a.push(b);a.push(d);a.push(c);this.set("yearPanel",d);this.set("monthPanel",b)},bindUI:function(){var a=this;a.get("monthPanel").on("itemselected",function(b){b.item&&a.setInternal("month",b.item.value)}).on("monthdblclick",function(){a._successCall()});a.get("yearPanel").on("itemselected",function(b){b.item&&a.setInternal("year",b.item.value)}).on("yeardblclick",function(){a._successCall()})},_successCall:function(){var a=this.get("success");a&&a.call(this)},_createFooter:function(){var b=this;return new d.Bar({elCls:f+"clear bui-monthpicker-footer",children:[{xclass:"bar-item-button",text:a.submit,btnCls:"btn btn-sm btn-primary",handler:function(){b._successCall()}},{xclass:"bar-item-button",text:a.cancel,btnCls:"btn btn-sm btn-default last",handler:function(){var a=b.get("cancel");a&&a.call(b)}}]})},_uiSetYear:function(a){this.get("yearPanel").set("year",a)},_uiSetMonth:function(a){this.get("monthPanel").setSelectedByField(a)}},{ATTRS:{footer:{},align:{value:{}},year:{},success:{value:function(){}},cancel:{value:function(){}},width:{value:180},month:{},yearPanel:{},monthPanel:{}}},{xclass:"monthpicker"});e.Calendar.MonthPicker=c})(window.BUI,jQuery);(function(e,h){function g(){var a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())}function c(a){for(var b=[],d=0;d<a;d++)b.push({text:10>d?"0"+d:d.toString(),value:10>d?"0"+d:d.toString()});return b}function b(a,b,d){a=a.get("el").find("."+b);e.isNumber(d)&&(d=10>d?"0"+d:d.toString());a.val(d)}var a=e.prefix,d=e.Picker.ListPicker,f=e.Calendar.MonthPicker,k=e.Calendar.Header,l=e.Calendar.Panel,n=e.Toolbar,m=e.Date,t=e.Calendar.Resource,p=e.Component.Controller.extend({initializer:function(){var a=this.get("children"),b=new k,d=new l,c=this.get("footer")||this._createFooter();a.push(b);a.push(d);a.push(c);this.set("header",b);this.set("panel",d);this.set("footer",c)},renderUI:function(){var a=this.get("children");if(this.get("showTime")){var b=this.get("timepicker")||this._initTimePicker();a.push(b);this.set("timepicker",b)}},bindUI:function(){var a=this,b=a.get("header"),d=a.get("panel");d.on("selectedchange",function(b){b=b.date;m.isDateEquals(b,a.get("selectedDate"))||a.set("selectedDate",b)});if(a.get("showTime"))a._initTimePickerEvent();else d.on("click",function(){a.fire("accept")});b.on("monthchange",function(b){a._setYearMonth(b.year,b.month)});b.on("headerclick",function(){var d=a.get("monthpicker")||a._createMonthPicker();d.set("year",b.get("year"));d.set("month",b.get("month"));d.show()})},_initTimePicker:function(){var a=this.get("lockTime"),b={hour:"bui-datepicker-hour",minute:"bui-datepicker-minute",second:"bui-datepicker-second"};if(a)for(var c in a){var e=b[c.toLowerCase()];this.set(c,a[c]);a.editable||this.get("el").find("."+e).attr("disabled","")}a=new d({elCls:"bui-timepicker",children:[{itemTpl:'\x3cli\x3e\x3ca href\x3d"#"\x3e{text}\x3c/a\x3e\x3c/li\x3e'}],autoAlign:!1,align:{node:this.get("el").find(".bui-calendar-footer"),points:["tl","bl"],offset:[-1,1]},trigger:this.get("el").find(".bui-datepicker-time")});a.render();this._initTimePickerEvent(a);return a},_initTimePickerEvent:function(a){var b=this;if(a=b.get("timepicker"))a.get("el").delegate("a","click",function(a){a.preventDefault()}),a.on("triggerchange",function(b){b.curTrigger.hasClass("bui-datepicker-hour")?a.get("list").set("items",c(24)):a.get("list").set("items",c(60))}),a.on("selectedchange",function(a){var d=a.curTrigger;a=a.value;d.hasClass("bui-datepicker-hour")?b.setInternal("hour",a):d.hasClass("bui-datepicker-minute")?b.setInternal("minute",a):b.setInternal("second",a)})},_setYearMonth:function(a,b){var d=this.get("selectedDate"),c=d.getDate();if(a!==d.getFullYear()||b!==d.getMonth())d=new Date(a,b,c),d.getMonth()!=b&&(d=m.addDay(-1,new Date(a,b+1))),this.set("selectedDate",d)},_createMonthPicker:function(){var a=this,b;b=new f({render:a.get("el"),visibleMode:"display",success:function(){a._setYearMonth(this.get("year"),this.get("month"));this.hide()},cancel:function(){this.hide()}});a.set("monthpicker",b);a.get("children").push(b);return b},_createFooter:function(){var b=this,d=[];this.get("showTime")?(d.push({content:b.get("timeTpl")}),d.push({xclass:"bar-item-button",text:t.submit,btnCls:"btn btn-sm btn-primary",listeners:{click:function(){b.fire("accept")}}})):(d.push({xclass:"bar-item-button",text:t.today,btnCls:"btn btn-sm btn-default",id:"todayBtn",listeners:{click:function(){var a=g();b.set("selectedDate",a);b.fire("accept")}}}),d.push({xclass:"bar-item-button",text:t.clean,btnCls:"btn btn-sm btn-default",id:"clsBtn",listeners:{click:function(){b.fire("clear")}}}));return new n.Bar({elCls:a+"calendar-footer",children:d})},_updateTodayBtnAble:function(){if(!this.get("showTime")){var a=this.get("footer"),b=this.get("panel"),d=g(),a=a.getChild("todayBtn");b._isInRange(d)?a.enable():a.disable()}},_uiSetSelectedDate:function(a){var b=a.getFullYear(),d=a.getMonth();this.get("header").setMonth(b,d);this.get("panel").set("selected",a);this.fire("datechange",{date:a})},_uiSetHour:function(a){b(this,"bui-datepicker-hour",a)},_uiSetMinute:function(a){b(this,"bui-datepicker-minute",a)},_uiSetSecond:function(a){b(this,"bui-datepicker-second",a)},_uiSetMaxDate:function(a){this.get("panel").set("maxDate",a);this._updateTodayBtnAble()},_uiSetMinDate:function(a){this.get("panel").set("minDate",a);this._updateTodayBtnAble()}},{ATTRS:{header:{},panel:{},maxDate:{},minDate:{},monthPicker:{},timepicker:{},width:{value:180},events:{value:{click:!1,accept:!1,datechange:!1,monthchange:!1}},showTime:{value:!1},lockTime:{},timeTpl:{value:'\x3cinput type\x3d"text" readonly class\x3d"form-control bui-datepicker-time bui-datepicker-hour" /\x3e:\x3cinput type\x3d"text" readonly class\x3d"form-control bui-datepicker-time bui-datepicker-minute" /\x3e:\x3cinput type\x3d"text" readonly class\x3d"form-control bui-datepicker-time bui-datepicker-second" /\x3e'},selectedDate:{value:g()},hour:{value:(new Date).getHours()},minute:{value:(new Date).getMinutes()},second:{value:0}}},{xclass:"calendar",priority:0});e.Calendar.Calendar=p})(window.BUI,jQuery);(function(e,h){var g=e.Calendar.Calendar,c=e.Date,b=e.Picker.Picker.extend({initializer:function(){},createControl:function(){var a=this,b=a.get("children"),c=new g({render:a.get("el"),showTime:a.get("showTime"),lockTime:a.get("lockTime"),minDate:a.get("minDate"),maxDate:a.get("maxDate"),autoRender:!0});c.on("clear",function(){var b=a.get("curTrigger");b.val()&&(b.val(""),b.trigger("change"))});a.get("dateMask")||(a.get("showTime")?a.set("dateMask","yyyy-mm-dd HH:MM:ss"):a.set("dateMask","yyyy-mm-dd"));b.push(c);a.set("calendar",c);return c},setSelectedValue:function(a){if(this.get("calendar")){var b=this.get("calendar"),e=c.parse(a,this.get("dateMask")),e=e||this.get("selectedDate");b.set("selectedDate",c.getDate(e));if(this.get("showTime")){var k=this.get("lockTime"),g=e.getHours(),h=e.getMinutes(),e=e.getSeconds();!k||a&&k.editable||(g=null!=k.hour?k.hour:g,h=null!=k.minute?k.minute:h,e=null!=k.second?k.second:e);b.set("hour",g);b.set("minute",h);b.set("second",e)}}},getSelectedValue:function(){if(!this.get("calendar"))return null;var a=this.get("calendar"),b=c.getDate(a.get("selectedDate"));this.get("showTime")&&(b=c.addHour(a.get("hour"),b),b=c.addMinute(a.get("minute"),b),b=c.addSecond(a.get("second"),b));return b},getSelectedText:function(){return this.get("calendar")?c.format(this.getSelectedValue(),this._getFormatType()):""},_getFormatType:function(){return this.get("dateMask")},_uiSetMaxDate:function(a){if(!this.get("calendar"))return null;this.get("calendar").set("maxDate",a)},_uiSetMinDate:function(a){if(!this.get("calendar"))return null;this.get("calendar").set("minDate",a)}},{ATTRS:{showTime:{value:!1},lockTime:{},maxDate:{},minDate:{},dateMask:{},changeEvent:{value:"accept"},hideEvent:{value:"accept clear"},calendar:{},selectedDate:{value:new Date((new Date).setSeconds(0))}}},{xclass:"datepicker",priority:0});e.Calendar.DatePicker=b})(window.BUI,jQuery);(function(e,h){e.Layout={};var g=function(c){g.superclass.constructor.call(this,c);this.init()};g.ATTRS={fit:{value:"none"},layout:{},control:{},wraperCls:{},container:{},srcNode:{},cssProperties:{value:["width","height"]},attrProperties:{},statusProperties:{},tplProperties:{},el:{},elCls:{},tpl:{}};e.extend(g,e.Base);e.augment(g,{init:function(){var c=this._wrapControl();this.set("el",c);this.syncItem()},_wrapControl:function(){var c=this.get("control").get("el"),b=this.get("elCls"),a=this._getContainer(c),d=e.substitute(this.get("tpl"),this.getLayoutAttrs()),a=h(d).appendTo(a);b&&a.addClass(b);b=this.getControlContainer(a);c.appendTo(b);this.set("bodyEl",b);return a},getControlContainer:function(c){var b=this.get("wraperCls");return b?c.find("."+b):c},syncItem:function(c){c=c||this.getLayoutAttrs();var b=this.get("el"),a=this._getSyncCss(c),d=this._getSyncAttr(c);b.css(a);b.attr(d);this.syncStatus(b,c);this.syncElements(b,c);this.syncFit()},syncStatus:function(c,b){c=c||this.get("el");b=b||this.getLayoutAttrs();var a=this,d=a.get("statusProperties");d&&e.each(d,function(b){var d=a.get(b);if(null!=d)c[d?"addClass":"removeClass"]("bui-"+b)})},syncElements:function(c,b){var a=this,d=a.get("tplProperties");d&&e.each(d,function(d){a.synTpl(c,d,b)})},synTpl:function(c,b,a){var d=b.name,f="_"+d+"El",k=this.get(f);a[d]?k||(d=this.get(b.value),d=e.substitute(d,a),b=b.prev?"prependTo":"appendTo",k=h(d)[b](c),this.set(f,k)):k&&k.remove()},syncFit:function(){var c=this.get("control"),b=this.get("fit");"none"!==b&&("width"===b?this._syncControlWidth(c):"height"===b?this._syncControlHeight(c):"both"===b&&(this._syncControlWidth(c),this._syncControlHeight(c)))},_syncControlWidth:function(c){var b=this.get("width")||this.get("el").width(),a=c.getAppendWidth();c.set("width",b-a)},_syncControlHeight:function(c){var b=this.getFitHeight(),a=c.getAppendHeight();c.set("height",b-a)},getFitHeight:function(){var c=this.get("el"),b=this.get("bodyEl"),a=this.get("height")||c.height(),d=a;if(b[0]==c[0])return a;c=b.siblings();e.each(c,function(a){a=h(a);"absolute"!==a.css("position")&&(d-=a.outerHeight())});return d},getLayoutAttrs:function(){return this.getAttrVals()},_getSyncCss:function(c){var b=this.get("cssProperties"),a=this._getDynacAttrs(),d={};e.each(b,function(b){var f=c[b];e.isString(f)&&-1!=f.indexOf("{")&&(f=e.substitute(f,a),f=e.JSON.looseParse(f));d[b]=f});return d},_getDynacAttrs:function(){var c=this.get("container");return{width:c.width(),height:c.height()}},_getSyncAttr:function(c){var b=this.get("attrProperties"),a={};e.each(b,function(b){a[b]=c[b]});return a},_getContainer:function(c){var b=this.get("container");return b?b:c.parent()},getElement:function(){return this.get("el")},destroy:function(){this.get("el").remove();this.off();this.clearAttrVals()}});e.Layout.Item=g})(window.BUI,jQuery);(function(e,h){var g=e.Component.Controller.extend({initializer:function(c){this.set("control",this)},renderUI:function(){this._initWraper();this.initItems()},bindUI:function(){var c=this,b=c.get("control"),a=c.get("layoutEvents").join(" ");b.on("afterAddChild",function(a){c.addItem(a.child)});b.on("afterRemoveChild",function(a){c.removeItem(a.child)});b.on(a,function(){c.resetLayout()});c.appendEvent(b)},appendEvent:function(c){},_initWraper:function(){var c=this.get("control").get("contentEl");this.set("container",c);this.afterWraper()},afterWraper:function(){},initItems:function(){var c=this.get("control").get("children");this.set("items",[]);for(var b=0;b<c.length;b++)this.addItem(c[b])},addItem:function(c){var b=this.getItems();c=this.initItem(c);b.push(c);return c},initItem:function(c){var b=this.get("itemConstructor");c=this.getItemCfg(c);return new b(c)},getItemCfg:function(c){var b=this.get("defaultCfg");c=e.mix({},b,{control:c,tpl:this.get("itemTpl"),layout:this,wraperCls:this.get("wraperCls")},c.get("layout"));c.container=this.getItemContainer(c);return c},getItemContainer:function(c){return this.get("container")},getNextItem:function(c){c=this.getItemIndex(c);var b=this.getCount();return this.getItemAt((c+1)%b)},removeItem:function(c){var b=this.getItems();if(c=this.getItem(c))c.destroy(),e.Array.remove(b,c)},getItemBy:function(c){var b=this.getItems(),a=null;e.each(b,function(b){if(c(b))return a=b,!1});return a},getItemsBy:function(c){var b=this.getItems(),a=[];e.each(b,function(b){c(b)&&a.push(b)});return a},getItem:function(c){return this.getItemBy(function(b){return b.get("control")==c})},getCount:function(){return this.getItems().length},getItemAt:function(c){return this.getItems()[c]},getItemIndex:function(c){var b=this.getItems();return e.Array.indexOf(c,b)},getItems:function(){return this.get("items")},resetLayout:function(){var c=this.getItems();e.each(c,function(b){b.syncItem()})},clearLayout:function(){var c=this.getItems();e.each(c,function(b){b.destroy()})},reset:function(){this.resetLayout()},getItemByElement:function(c){return this.getItemBy(function(b){return h.contains(b.get("el")[0],c[0])})},bindCollapseEvent:function(){var c=this,b=c.get("triggerCls");c.get("container").delegate("."+b,"click",function(a){a=h(a.currentTarget);a=c.getItemByElement(a);c.toggleCollapse(a)})},getExpandedItem:function(){return this.getItemBy(function(c){return!c.get("collapsed")})},expandItem:function(c){var b=this,a=b.get("duration"),d=b.getCollapsedRange(c),e;c.get("collapsed")&&(b.get("accordion")&&(e=b.getExpandedItem())&&(b.beforeCollapsed(e,d),e.collapse(a,function(){b.afterCollapsed(e)})),b.beforeExpanded(c,d),c.expand(d,a,function(){b.afterExpanded(c)}))},afterExpanded:function(c){},beforeExpanded:function(c,b){},collapseItem:function(c){var b=this,a=b.get("duration"),d=b.getCollapsedRange(c),e;c.get("collapsed")||(b.get("accordion")&&(e=b.getNextItem(c),b.beforeExpanded(e,d),e.expand(d,a,function(){b.afterExpanded(e)})),b.beforeCollapsed(c,d),c.collapse(a,function(){b.afterCollapsed(c)}))},beforeCollapsed:function(c,b){},afterCollapsed:function(c){},getCollapsedRange:function(c){},toggleCollapse:function(c){c.get("collapsed")?this.expandItem(c):this.collapseItem(c)},destroy:function(){this.clearLayout();this.off();this.clearAttrVals()}},{ATTRS:{itemConstructor:{value:e.Layout.Item},control:{},layoutEvents:{value:["afterWidthChange","afterHeightChange"]},items:{},elCls:{},defaultCfg:{value:{}},wraperCls:{},container:{},itemTpl:{value:"\x3cdiv\x3e\x3c/div\x3e"},triggerCls:{},duration:{value:400},accordion:{value:!1}}});e.Layout.Abstract=g})(window.BUI,jQuery);(function(e,h){var g=e.Layout.Item,c={NORTH:"north",EAST:"east",SOUTH:"south",WEST:"west",CENTER:"center"},b=function(a){b.superclass.constructor.call(this,a)};b.ATTRS={region:{},titleTpl:{value:'\x3cdiv class\x3d"bui-border-title bui-border-title-{region}"\x3e{title}\x3c/div\x3e'},collapseTpl:{value:'\x3cs class\x3d"bui-collapsed-btn bui-collapsed-{region}"\x3e\x3c/s\x3e'},collapsable:{value:!1},collapsed:{value:!1},leftRange:{value:28},tplProperties:{value:[{name:"title",value:"titleTpl",prev:!0},{name:"collapsable",value:"collapseTpl",prev:!0}]},statusProperties:{value:["collapsed"]}};b.REGINS=c;e.extend(b,g);e.augment(b,{syncElements:function(a,d){b.superclass.syncElements.call(this,a,d);a=this.get("el");var c=this.getCollapseProperty();this.get("collapsed")&&this.get(c)==a[c]()&&this.collapse(0)},expand:function(a,b,c){a=this.getCollapseProperty();b=this.get("el");var d=this.get(a),e={};e[a]=d;b.css(e);this.set("collapsed",!1);b.removeClass("bui-collapsed");c&&c()},getCollapseProperty:function(){var a=this.get("region");return a==c.SOUTH||a==c.NORTH?"height":"width"},_getLeftRange:function(){this.get("el");return this.get("leftRange")},getCollapsedRange:function(){var a=this.getCollapseProperty();this.get("el");var b=this.get(a);if(e.isString(b)){var c=this._getDynacAttrs();-1!=b.indexOf("{")?(b=e.substitute(b,c),b=e.JSON.looseParse(b)):b=-1!=b.indexOf("%")?.01*parseInt(b,10)*c[a]:parseInt(b,10)}return b-this._getLeftRange(a)},collapse:function(a,b){var d=this.getCollapseProperty(),c=this.get("el"),e=this._getLeftRange(d),g={};g[d]=e;c.css(g);this.set("collapsed",!0);c.addClass("bui-collapsed");b&&b()}});e.Layout.BorderItem=b})(window.BUI,jQuery);(function(e,h){var g=e.Layout.BorderItem,c=g.REGINS,b=e.Layout.Abstract.extend({appendEvent:function(){this.bindCollapseEvent()},afterWraper:function(){var a=this.get("container"),b=a.find(".bui-border-top"),c=a.find(".bui-border-middle"),a=a.find(".bui-border-bottom");this.set("topEl",b);this.set("middleEl",c);this.set("bottomEl",a)},syncUI:function(){this._setMiddleDimension()},_setMiddleDimension:function(){var a=this.get("middleEl"),b=this._getMiddleHeight(),c=this._getMiddleLeft(),e=this._getMiddleRight();this.get("items");var g=this.getItemsByRegion("center")[0];a.height(b);g&&g.get("el").css({marginLeft:c,marginRight:e});this._fitMiddleControl()},_fitMiddleControl:function(){var a=this.getItems();e.each(a,function(a){var b=a.get("region");b!=c.EAST&&b!=c.WEST&&b!=c.CENTER||a.syncFit()})},_getMiddleHeight:function(){var a=this.get("container").height(),b=this.get("middleEl"),c=this.get("topEl"),a=c.children().length?a-c.outerHeight()-this.get("bottomEl").outerHeight():a-this.get("bottomEl").outerHeight(),b=b.outerHeight()-b.height();return a-b},getItemsByRegion:function(a){return this.getItemsBy(function(b){return b.get("region")===a})},_getMiddleLeft:function(){var a=this.getItemsByRegion("west"),b=0;e.each(a,function(a){b+=a.get("el").outerWidth()});return b},_getMiddleRight:function(){var a=this.getItemsByRegion("east"),b=0;e.each(a,function(a){b+=a.get("el").outerWidth()});return b},getItemContainer:function(a){switch(a.region){case c.NORTH:a=this.get("topEl");break;case c.SOUTH:a=this.get("bottomEl");break;default:a=this.get("middleEl")}return a},beforeExpanded:function(a,b){this.beforeCollapsedChange(a,b,!1)},beforeCollapsedChange:function(a,b,c){var d=a.getCollapseProperty();c=c?1:-1;var e=this.get("duration");"height"==d?this._setMiddleHeight(b*c,e):this._setCenterWidth(a.get("region"),b*c*-1,e)},_setMiddleHeight:function(a,b){var d=this.get("middleEl"),c=d.height();d.height(c+a)},_setCenterWidth:function(a,b,e){e=this.getItemsByRegion("center")[0];a=a==c.EAST?"marginRight":"marginLeft";var d,f={};e&&(d=e.get("el"));e=parseFloat(d.css(a));f[a]=b+e;d.css(f)},getCollapsedRange:function(a){return a.getCollapsedRange()},beforeCollapsed:function(a,b){this.beforeCollapsedChange(a,b,!0)},afterExpanded:function(){this._fitMiddleControl()},afterCollapsed:function(){this._fitMiddleControl()},resetLayout:function(){b.superclass.resetLayout.call(this);this._setMiddleDimension()}},{ATTRS:{layoutEvents:{value:["afterAddChild","afterRemoveChild"]},itemConstructor:{value:g},wraperCls:{value:"bui-border-body"},duration:{value:200},elCls:{value:"bui-border-layout"},triggerCls:{value:"bui-collapsed-btn"},tpl:{value:'\x3cdiv class\x3d"bui-layout-border"\x3e\x3cdiv class\x3d"bui-border-top"\x3e\x3c/div\x3e\x3cdiv class\x3d"bui-border-middle"\x3e\x3c/div\x3e\x3cdiv class\x3d"bui-border-bottom"\x3e\x3c/div\x3e\x3c/div\x3e'},itemTpl:{value:'\x3cdiv class\x3d"bui-border-{region} bui-layout-item-border"\x3e\x3cdiv class\x3d"bui-border-body"\x3e\x3c/div\x3e\x3c/div\x3e'},childContainer:{value:".bui-layout-border"}}},{xclass:"layout-border"});e.Layout.Border=b})(window.BUI,jQuery);(function(e,h){var g=e.Layout.Item,c=function(b){c.superclass.constructor.call(this,b)};c.ATTRS={collapsed:{value:!0},statusProperties:{value:["collapsed"]}};e.extend(c,g);e.augment(c,{expand:function(b,a){var d=this,c=d.get("el");d.get("bodyEl").animate({height:b},a,function(){c.removeClass("bui-collapsed");d.syncFit()});d.set("collapsed",!1)},collapse:function(b){var a=this.get("el");this.get("bodyEl").animate({height:0},b,function(){a.addClass("bui-collapsed")});this.set("collapsed",!0)}});e.Layout.Tab=c})(window.BUI,jQuery);(function(e,h){var g=e.Layout.Abstract.extend({appendEvent:function(c){this.bindCollapseEvent()},getActivedItem:function(){return this.getExpandedItem()},syncUI:function(){this._resetActiveItem()},_resetActiveItem:function(){(this.getActivedItem()||this.getItems()[0]).expand(this.getCollapsedRange(),0)},resetLayout:function(){g.superclass.resetLayout.call(this);this._resetActiveItem()},getCollapsedRange:function(){var c=this.get("container"),b=c.height(),c=c.find("."+this.get("titleCls")),a=b;e.each(c,function(b){a-=h(b).outerHeight()});return a}},{ATTRS:{itemConstructor:{value:e.Layout.Tab},wraperCls:{value:"bui-accordion-body"},titleCls:{value:"bui-accordion-title"},triggerCls:{value:"bui-accordion-title"},layoutEvents:{value:["afterAddChild","afterRemoveChild"]},duration:{value:400},accordion:{value:!0},itemTpl:{value:'\x3cdiv class\x3d"bui-layout-item-accordion"\x3e\x3cdiv class\x3d"bui-accordion-title"\x3e{title}\x3ci class\x3d"bui-expand-button icon-white"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"bui-accordion-body"\x3e\x3c/div\x3e\x3c/div\x3e'}}},{xclass:"layout-accordion"});e.Layout.Accordion=g})(window.BUI,jQuery);(function(e,h){var g=window,c=e.Layout.Border.extend({renderUI:function(){this.reset();var b=this.get("render");h(b).addClass("bui-viewport-container")},bindUI:function(){h(g).on("resize",e.wrapBehavior(this,"onResize"))},onResize:function(){this.reset()},reset:function(){this.get("el");var b=e.viewportHeight(),a=e.viewportWidth(),d=this.getAppendWidth(),c=this.getAppendHeight();this.set("width",a-d);this.set("height",b-c);this.fire("resize")},destructor:function(){h(g).off("resize",e.getWrapBehavior(this,"onResize"))}},{ATTRS:{render:{value:"body"}}},{xclass:"view-port"});e.Layout.Viewport=c})(window.BUI,jQuery);(function(e,h){var g={NORTH:"north",WEST:"west",CENTER:"center"},c=function(b){c.superclass.constructor.call(this,b);this.init()};c.ATTRS={region:{},collapsed:{value:!1},cssProperties:{value:["width","height"]},leftRange:{value:28},width:{value:0},height:{value:0},layout:{},control:{}};e.extend(c,e.Base);e.augment(c,{init:function(){var b=this._wrapControl();this.set("el",b);this.syncFit()},_wrapControl:function(){var b=this.get("control"),a=b.get("el");this.set("region",b.get("region"));this.set("width",b.get("width"));return a},syncFit:function(){var b=this.get("control"),a=this.get("region");a===g.WEST?this._syncControlHeight(b):a===g.CENTER&&(this._syncControlWidth(b),this._syncControlHeight(b))},_syncControlWidth:function(b){var a=this.get("width")||this.get("container").width(),d=b.getAppendWidth(),c=this.get("layout")._getMiddleLeft();b.set("width",a-d-c)},_syncControlHeight:function(b){var a=this.getFitHeight(),d=b.getAppendHeight();b.set("height",a-d)},getFitHeight:function(){var b=this.get("container");return this.get("height")||b.height()},getElement:function(){return this.get("el")},destroy:function(){this.get("el").remove();this.off();this.clearAttrVals()}});c.REGINS=g;e.Layout.BuiItem=c})(window.BUI,jQuery);(function(e,h){var g=e.Layout.BuiItem,c=g.REGINS,b=e.Component.Controller.extend({initializer:function(a){this.set("control",this)},renderUI:function(){this._initWraper();this.initItems();this.reset()},bindUI:function(){var a=this,b=a.get("control"),c=a.get("layoutEvents").join(" ");b.on(c,function(){a.resetLayout()});h(window).on("resize",e.wrapBehavior(a,"reset"))},syncUI:function(){this._setMiddleDimension()},_initWraper:function(){var a=this.get("contentEl"),b=a.find(".bui-border-top"),a=a.find(".bui-border-middle"),c=this.get("render");h(c).addClass("bui-viewport-container");this.set("topEl",b);this.set("middleEl",a)},initItems:function(){var a=this.get("control").get("children");this.set("items",[]);for(var b=0;b<a.length;b++)this.addItem(a[b])},addItem:function(a){var b=this.getItems();a=this.initItem(a);b.push(a);return a},initItem:function(a){a=this.getItemCfg(a);return new g(a)},getItemCfg:function(a){return{control:a,layout:this,container:this.getItemContainer(a.get("region"))}},getItems:function(){return this.get("items")},getItemsBy:function(a){var b=this.getItems(),c=[];e.each(b,function(b){a(b)&&c.push(b)});return c},getItemsByRegion:function(a){return this.getItemsBy(function(b){return b.get("region")===a})},_fitMiddleControl:function(){var a=this.getItems();e.each(a,function(a){var b=a.get("region");b!=c.WEST&&b!=c.CENTER||a.syncFit()})},_setMiddleDimension:function(){var a=this.get("middleEl"),b=this._getMiddleHeight(),c=this._getMiddleLeft();this.get("items");var e=this.getItemsByRegion("center")[0];a.height(b);e&&e.get("el").css({marginLeft:c});this._fitMiddleControl()},_getMiddleHeight:function(){var a=this.get("contentEl").height(),b=this.get("middleEl"),c=this.get("topEl"),a=c.children().length?a-c.outerHeight():a,b=b.outerHeight()-b.height();return a-b},_getMiddleLeft:function(){var a=this.getItemsByRegion("west"),b=0;e.each(a,function(a){b+=a.get("el").outerWidth()});return b},resetLayout:function(){var a=this.getItems();e.each(a,function(a){a.syncFit()});this._setMiddleDimension()},reset:function(){var a=this.get("render"),b=this.get("el");if("body"==a){var a=e.viewportHeight(),b=e.viewportWidth(),c=this.getAppendWidth(),k=this.getAppendHeight();this.set("width",b-c);this.set("height",a-k)}else a=b.parent().height(),b=b.parent().width(),this.set("width",b),this.set("height",a);this.fire("resize")},getItemContainer:function(a){switch(a){case c.NORTH:a=this.get("topEl");break;default:a=this.get("middleEl")}return a}},{ATTRS:{layoutEvents:{value:["afterWidthChange","afterHeightChange"]},items:{},render:{value:"body"}}},{xclass:"bui-layout"});e.Layout.BuiLayout=b})(window.BUI,jQuery);(function(e,h){function g(a,b){if("left"===a)return[-1*b,-4];if("right"===a)return[b,-4];if(a.indexOf("top"))return[0,b];if(a.indexOf("bottom"))return[0,-1*b]}e.Tooltip={};var c={left:["cl","cr"],right:["cr","cl"],top:["tc","bc"],bottom:["bc","tc"]},b=e.Overlay.Overlay.extend({_uiSetAlignType:function(a,b){var d=this.get("offset"),e=this.get("align")||{},h=c[a];b&&b.prevVal&&this.get("el").removeClass(a);a&&this.get("el").addClass(a);h&&(e.points=h,d&&(e.offset=g(a,d)),this.set("align",e))},_getTitleContainer:function(){return this.get("el")},_uiSetTitle:function(a){var b=this.get("titleTpl"),c=this._getTitleContainer(),k=this.get("titleEl");k&&k.remove();a=a||"";e.isString(a)&&(a={title:a});a=e.substitute(b,a);k=h(a).appendTo(c);this.set("titleEl",k)}},{ATTRS:{delegateTrigger:{},alignType:{},title:{},showArrow:{value:!0},arrowContainer:{},autoHide:{value:!0},autoHideType:{value:"leave"},offset:{value:0},elCls:{value:"tooltip in"},triggerEvent:{value:"mouseover"},titleTpl:{value:'\x3cdiv class\x3d"tooltip-inner"\x3e{title}\x3c/div\x3e'}}},{xclass:"tooltip"});e.Tooltip.Tip=b})(window.BUI,jQuery);(function(e,h){var g=e.Tooltip.Tip,c=function(b){c.superclass.constructor.call(this,b)};c.ATTRS={tip:{},defaultAlignType:{}};e.extend(c,e.Base);e.augment(c,{_init:function(){this._initDom();this._initEvent()},_initDom:function(){var b=this.get("tip"),a;b&&!b.isController&&(a=b.alignType,b=new g(b),b.render(),this.set("tip",b),a&&this.set("defaultAlignType",a))},_initEvent:function(){var b=this,a=b.get("tip");a.on("triggerchange",function(c){c=c.curTrigger;b._replaceTitle(c);b._setTitle(c,a)})},_replaceTitle:function(b){var a=b.attr("title");a&&(b.attr("data-title",a),b[0].removeAttribute("title"))},_setTitle:function(b,a){var c=b.attr("data-title"),f=b.attr("data-align")||this.get("defaultAlignType");/^{.*}$/.test(c)&&(c=e.JSON.looseParse(c));a.set("title",c);f&&a.set("alignType",f)},render:function(){this._init();return this}});e.Tooltip.Tips=c})(window.BUI,jQuery);(function(e,h){function g(a,b){e.isString(b)&&(b=a.findNode(b));return b}e.Tree={};var c=e.List,b=c.SimpleList.extend({bindUI:function(){var a=this;a.get("el");var b=a.get("multipleCheck"),c=a.get("store");a.on("itemclick",function(b){var c=h(b.domTarget),d=b.element;b=b.item;if(c.hasClass("bui-tree-elbow-expander"))return a._toggleExpand(b,d),!1;c.hasClass("bui-tree-icon-checkbox")?(c=a.isChecked(b),a.setNodeChecked(b,!c),a.fire("checkedchangeonce",{node:b,checked:!c})):c.hasClass("bui-tree-icon-radio")&&a.setNodeChecked(b,!0)});a.on("itemrendered",function(c){var d=c.item;c=c.domTarget;a._resetIcons(d,c);a.isCheckable(d)&&b&&a.get("cascadeCheckd")&&a._resetPatialChecked(d,null,null,c);a._isExpanded(d,c)&&a._showChildren(d)});a._initExpandEvent();c&&(c.on("load",function(b){a.onLoad(b)}),c.on("add",function(b){a.onAdd(b)}),c.on("remove",function(b){a.onRemove(b)}),c.on("update",function(b){a.onUpdate(b)}))},onLoad:function(a){var b=this.get("store").get("root");a&&a.node!=b||this._initRoot();a&&a.node&&this._loadNode(a.node)},_initRoot:function(){var a=this,b=a.get("store"),c=a.get("showRoot");b&&(b=b.get("root"),a.setInternal("root",b),c=c?[b]:b.children,e.each(c,function(b){a._initChecked(b,!0)}),a.clearItems(),a.addItems(c))},_initChecked:function(a,b){var c=this,d=c.get("checkType"),g=c.get("checkedField"),h=c.get("multipleCheck"),m=c.get("checkableField"),t=c.get("cascadeCheckd");"none"===d?(a[m]=!1,a[g]=!1):"onlyLeaf"===d?a.leaf?a[m]=!0:(a[m]=!1,a[g]=!1,b&&e.each(a.children,function(a){c._initChecked(a,b)})):("custom"===d&&null==a[m]&&(a[m]=null!=a[g]),"all"===d&&(a[m]=!0),a&&c.isCheckable(a)&&(d=a.parent,!c.isChecked(a)&&t&&(d&&c.isChecked(d)&&(!h&&c._hasChildChecked(d)||c.setStatusValue(a,"checked",!0)),(a.children&&a.children.length&&c._isAllChildrenChecked(a)||!h&&c._hasChildChecked(a))&&c.setStatusValue(a,"checked",!0)),b&&e.each(a.children,function(a){c._initChecked(a,b)})))},isCheckable:function(a){return a[this.get("checkableField")]},isChecked:function(a){return a?!!a[this.get("checkedField")]:!1},_hasChildChecked:function(a){return!a||a.leaf?!1:0!=this.getCheckedNodes(a).length},getCheckedNodes:function(a){var b=this;return b.get("store").findNodesBy(function(a){return b.isChecked(a)},a)},_isAllChildrenChecked:function(a){if(!a||a.leaf)return!1;var b=this,c=!0;e.each(a.children,function(a){c=c&&b.isChecked(a);if(!c)return!1});return c},_loadNode:function(a){this._initChecked(a,!0);this.expandNode(a);this._updateIcons(a);this.setItemStatus(a,"loading",!1)},expandNode:function(a,b){var c;e.isString(a)&&(a=this.findNode(a));a&&(a.parent&&!this.isExpanded(a.parent)&&this.expandNode(a.parent),c=this.findElement(a),this._expandNode(a,c,b))},findNode:function(a,b){return this.get("store").findNode(a,b)},_expandNode:function(a,b,c){var d=this,f=d.get("accordion"),g=d.get("store");a.leaf||(d.hasStatus(a,"expanded",b)||(f&&a.parent&&e.each(a.parent.children,function(b){b!=a&&d.collapseNode(b)}),g&&!g.isLoaded(a)?d._isLoading(a,b)||g.loadNode(a):b&&(d.setItemStatus(a,"expanded",!0,b),d._showChildren(a),d.fire("expanded",{node:a,element:b}))),e.each(a.children,function(a){(c||d.isExpanded(a))&&d.expandNode(a,c)}))},collapseNode:function(a){var b;e.isString(a)&&(a=this.findNode(a));a&&(b=this.findElement(a),this._collapseNode(a,b))},_collapseNode:function(a,b,c){!a.leaf&&this.hasStatus(a,"expanded",b)&&(this.setItemStatus(a,"expanded",!1,b),c?(this._collapseChildren(a,c),this.removeItems(a.children)):this._hideChildrenNodes(a),this.fire("collapsed",{node:a,element:b}))},_collapseChildren:function(a,b){var c=this;e.each(a.children,function(a){c.collapseNode(a,b)})},_hideChildrenNodes:function(a){var b=this,c=a.children,g=[];e.each(c,function(a){var c=b.findElement(a);c&&(g.push(c),b._hideChildrenNodes(a))});b.get("expandAnimate")?(g=h(g),g.animate({height:0},function(){b.removeItems(c)})):b.removeItems(c)},_updateIcons:function(a){var b=this,c=b.findElement(a);c&&(b._resetIcons(a,c),b._isExpanded(a,c)&&!a.leaf&&e.each(a.children,function(a){b._updateIcons(a)}))},_resetIcons:function(a,b){if(this.get("showIcons")){var c=this.get("iconContainer"),d,e=this._getIconsTpl(a);h(b).find(".bui-tree-icon-wraper").remove();d=h(b).find(c).first();c&&d.length?h(e).prependTo(d):h(b).prepend(h(e))}},_getIconsTpl:function(a){for(var b=a.level,c=this.get("startLevel"),g=this.get("iconWraperTpl"),h=[];c<b;c+=1)h.push(this._getLevelIcon(a,c));h.push(this._getExpandIcon(a));h.push(this._getCheckedIcon(a));h.push(this._getNodeTypeIcon(a));return e.substitute(g,{icons:h.join("")})},_getLevelIcon:function(a,b){var c="bui-tree-elbow-empty";this.get("showLine")&&(a.level===b||null==b?c=this._isLastNode(a)?"bui-tree-elbow-end":"bui-tree-elbow":(c=this._getParentNode(a,b),c=this._isLastNode(c)?"bui-tree-elbow-empty":"bui-tree-elbow-line"));return this._getIcon(c)},_getExpandIcon:function(a){var b="bui-tree-elbow-expander";if(a.leaf)return this._getLevelIcon(a);this._isLastNode(a)&&(b+=" bui-tree-elbow-expander-end");return this._getIcon(b)},_getCheckedIcon:function(a){return this.isCheckable(a)?(a=this.get("multipleCheck")?"bui-tree-icon-checkbox":"bui-tree-icon-radio",this._getIcon(a)):""},_getNodeTypeIcon:function(a){a=a.cls?a.cls:a.leaf?this.get("leafCls"):this.get("dirCls");return this._getIcon(a)},_getIcon:function(a){var b=this.get("iconTpl");return e.substitute(b,{cls:a})},_getParentNode:function(a,b){var c=a.level,d=a.parent,e=c-1;if(c<=b)return null;for(;e>b;)d=d.parent,--e;return d},_isLastNode:function(a){if(!a)return!1;if(a==this.get("root"))return!0;var b=a.parent,b=b?b.children:this.get("nodes");return b[b.length-1]===a},_isExpanded:function(a,b){return this.hasStatus(a,"expanded",b)},collapseAll:function(){var a=this,b=a.getAllElements();e.each(b,function(b){var c=a.getItemByElement(b);c&&a._collapseNode(c,b,!0)})},expandAll:function(){var a=this,b=a.getAllElements();e.each(b,function(b){var c=a.getItemByElement(b);a._expandNode(c,b,!0)})},expandPath:function(a,b,c){if(a){c=c||0;var d=this,e=d.get("store"),f,g,h,p,r=a.split(",");f=d.findNode(r[c]);for(h=c+1;h<r.length;h++)if(p=r[h],g=d.findNode(p,f),f&&g)d.expandNode(f),f=g;else if(f&&b){e.load({id:f.id},function(){(g=d.findNode(p,f))&&d.expandPath(a,b,h)});break}}},getCheckedLeaf:function(a){var b=this;return b.get("store").findNodesBy(function(a){return a.leaf&&b.isChecked(a)},a)},isItemSelectable:function(a){var b=this.get("dirSelectable");return!a||b||a.leaf?!0:!1},isExpanded:function(a){if(!a||a.leaf)return!1;var b;if(this._isRoot(a)&&!this.get("showRoot"))return!0;e.isString(a)&&(item=this.getItem(a));b=this.findElement(a);return this._isExpanded(a,b)},toggleExpand:function(a){var b;e.isString(a)&&(item=this.getItem(a));b=this.findElement(a);this._toggleExpand(a,b)},setNodeChecked:function(a,b,c){c=null==c?!0:c;if(a){var d=this,f,h=d.get("multipleCheck"),m=d.get("cascadeCheckd"),t;if(a=g(this,a))if(f=a.parent,d.isCheckable(a)){if(d.isChecked(a)!==b||d.hasStatus(a,"checked")!==b)t=d.findElement(a),m?(t?(d.setItemStatus(a,"checked",b,t),h?d._resetPatialChecked(a,b,b,t):b&&f&&d.isChecked(f)!=b&&d.setNodeChecked(f,b,!1)):d.isItemDisabled(a)||d.setStatusValue(a,"checked",b),f&&(d.isChecked(f)!=b?d._resetParentChecked(f):h&&d._resetPatialChecked(f,null,null,null,!0))):d.isItemDisabled(a)||(t?d.setItemStatus(a,"checked",b,t):d.setStatusValue(a,"checked",b)),!b||h||!d.isChecked(f)&&f!=d.get("root")&&m||e.each(f.children,function(b){b!==a&&d.isChecked(b)&&d.setNodeChecked(b,!1)}),d.fire("checkedchange",{node:a,element:t,checked:b});!a.leaf&&c&&m&&e.each(a.children,function(a,e){(h||!b||!h&&0==e)&&d.setNodeChecked(a,b,c)})}}},setChecked:function(a){this.setNodeChecked(a,!0)},clearAllChecked:function(){var a=this,b=a.getCheckedNodes();e.each(b,function(b){a.setNodeChecked(b,!1)})},_resetPatialChecked:function(a,b,c,e,g){if(!a||a.leaf)return!0;(b=null==b?this.isChecked(a):b)?this.setItemStatus(a,"partial-checked",!1,e):(c=null==c?this._hasChildChecked(a):c,this.setItemStatus(a,"partial-checked",c,e),g&&a.parent&&this._resetPatialChecked(a.parent,!1,c?c:null,null,g))},_resetParentChecked:function(a){if(this.isCheckable(a)){var b=this.get("multipleCheck"),c=b?this._isAllChildrenChecked(a):this._hasChildChecked(a);this.setStatusValue(a,"checked",c);this.setNodeChecked(a,c,!1);b&&this._resetPatialChecked(a,c,null,null,!0)}},_initExpandEvent:function(){function a(a){return function(c){var d=h(c.domTarget),e=c.element;c=c.item;if(!d.hasClass("bui-tree-elbow-expander"))b[a](c,e)}}var b=this;b.get("el");var c=b.get("expandEvent"),e=b.get("collapseEvent");if(c==e)b.on(c,a("_toggleExpand"));else{if(c)b.on(c,a("_expandNode"));if(e)b.on(e,a("_collapseNode"))}},_isForceChecked:function(a){return this.get("multipleCheck")?this._isAllChildrenChecked():_isForceChecked()},_isRoot:function(a){var b=this.get("store");return b&&b.get("root")==a?!0:!1},_setLoadStatus:function(a,b,c){this.setItemStatus(a,"loading",c,b)},_addNode:function(a,b){var c=a.parent,d,e;this._initChecked(a,!0);c?(this.isExpanded(c)&&(d=c.children.length,e=this._getInsetIndex(a),this.addItemAt(a,e),b==d-1&&0<b&&(d=c.children[b-1],this._updateIcons(d))),this._updateIcons(c)):(e=this._getInsetIndex(a),this.addItemAt(a,e),d=this.get("nodes")[b-1],this._updateIcons(d))},_getInsetIndex:function(a){return(a=this._getNextItem(a))?this.indexOfItem(a):this.getItemCount()},_getNextItem:function(a){var b=a.parent,c;if(!b)return null;c=b.children;a=e.Array.indexOf(a,c);return c[a+1]||this._getNextItem(b)},onAdd:function(a){this._addNode(a.node,a.index)},_updateNode:function(a){this.updateItem(a);this._updateIcons(a)},onUpdate:function(a){this._updateNode(a.node)},_removeNode:function(a,b){var c=a.parent,d;this.collapseNode(a);c&&(this.removeItem(a),this.isExpanded(c)&&(d=c.children.length,d==b&&0!==b&&(d=c.children[b-1],this._updateIcons(d))),this._updateIcons(c),this._resetParentChecked(c))},onRemove:function(a){this._removeNode(a.node,a.index)},_showChildren:function(a){if(a&&a.children){var b=this.indexOfItem(a),c,e;for(e=a.children.length-1;0<=e;e--)c=a.children[e],this.getItem(c)||(this.get("expandAnimate")?(el=this._addNodeAt(c,b+1),el.hide(),el.slideDown()):this.addItemAt(c,b+1))}},_addNodeAt:function(a,b){var c=this.get("items");void 0===b&&(b=c.length);c.splice(b,0,a);return this.addItemToView(a,b)},_isLoading:function(a,b){return this.hasStatus(a,"loading",b)},_toggleExpand:function(a,b){this._isExpanded(a,b)?this._collapseNode(a,b):this._expandNode(a,b)},_uiSetShowRoot:function(a){a=this.get("showRoot")?0:1;this.set("startLevel",a)},_uiSetShowLine:function(a){var b=this.get("el");a?b.addClass("bui-tree-show-line"):b.removeClass("bui-tree-show-line")},getSelection:function(){var a=this.getStatusField("selected"),b;return a?(b=this.get("store"),b.findNodesBy(function(b){return b[a]})):c.SimpleList.prototype.getSelection.call(this)},getSelected:function(){var a=this.getStatusField("selected"),b;return a?(b=this.get("store"),b.findNodeBy(function(b){return b[a]})):c.SimpleList.prototype.getSelected.call(this)}},{ATTRS:{store:{value:{}},root:{},iconContainer:{},iconWraperTpl:{value:'\x3cspan class\x3d"bui-tree-icon-wraper"\x3e{icons}\x3c/span\x3e'},showLine:{value:!1},showIcons:{value:!0},iconTpl:{value:'\x3cspan class\x3d"bui-tree-icon {cls}"\x3e\x3c/span\x3e'},leafCls:{value:"bui-tree-elbow-leaf"},dirCls:{value:"bui-tree-elbow-dir"},checkType:{share:!1,value:"custom"},cascadeCheckd:{value:!0},accordion:{value:!1},multipleCheck:{value:!0},checkedField:{valueFn:function(){return this.getStatusField("checked")}},checkableField:{value:"checkable"},itemStatusFields:{value:{expanded:"expanded",disabled:"disabled",checked:"checked"}},dirSelectable:{value:!0},showRoot:{value:!1},events:{value:{expanded:!1,collapsed:!1,checkedchange:!1,checkedchangeonce:!1}},expandEvent:{value:"itemdblclick"},expandAnimate:{value:!1},collapseEvent:{value:"itemdblclick"},startLevel:{value:1},itemCls:{value:e.prefix+"tree-item"},itemTpl:{value:"\x3cli\x3e{text}\x3c/li\x3e"},idField:{value:"id"},items:{sync:!1}}},{xclass:"tree-list"});e.Tree.TreeList=b})(window.BUI,jQuery);(function(e,h){e.Tab={};var g=e.List.ChildList.extend({renderUI:function(){var c=this,b=c.get("children"),a=c._initPanelContainer().children();e.each(b,function(b,e){c._initPanelItem(b,a[e])})},_initPanelContainer:function(){var c=this.get("panelContainer");c&&e.isString(c)&&(c=0==c.indexOf("#")?h(c):this.get("el").find(c),this.setInternal("panelContainer",c));return c},_initPanelItem:function(c,b){c.set?c.get("panel")||(b=b||this._getPanel(c.getAttrVals()),c.set("panel",b)):c.panel||(b=b||this._getPanel(c),c.panel=b)},_getPanel:function(c){var b=this.get("panelContainer");c=e.substitute(this.get("panelTpl"),c);return h(c).appendTo(b)}},{ATTRS:{elTagName:{value:"div"},childContainer:{value:"ul"},tpl:{value:'\x3cdiv class\x3d"bui-tab"\x3e\x3cul class\x3d"bui-tab-title"\x3e\x3c/ul\x3e\x3cdiv class\x3d"bui-tab-content"\x3e\x3c/div\x3e\x3c/div\x3e'},panelTpl:{value:"\x3cdiv\x3e\x3c/div\x3e"},panelContainer:{value:".bui-tab-content"},defaultChildClass:{value:"tab-panel-item"}}},{xclass:"tab-panel"});e.Tab.TabPanel=g})(window.BUI,jQuery);(function(e,h){var g=e.Component.Controller.extend({renderUI:function(){this._resetPanelVisible()},bindUI:function(){var c=this;c.get("el");var b=c._getVisibleEvent();c.on(b,function(a){c._setPanelVisible(a.newVal)})},_uiSetTitle:function(c){this.get("el").find(".bui-tab-item-text").text(c)},_resetPanelVisible:function(){var c=this.get("panelVisibleStatus"),c=this.get(c);this._setPanelVisible(c)},_getVisibleEvent:function(){var c=this.get("panelVisibleStatus");return"after"+e.ucfirst(c)+"Change"},_setPanelVisible:function(c){var b=this.get("panel");c=c?"show":"hide";if(b)h(b)[c]()},_uiSetSelected:function(c){var b=this.getStatusCls("selected"),a=this.get("el");c?a.addClass(b):a.removeClass(b)},_setPanelContent:function(c,b){h(c).html(b)},_uiSetPanelContent:function(c){var b=this.get("panel");this._setPanelContent(b,c)},_uiSetPanel:function(c){var b=this.get("panelContent");b&&this._setPanelContent(c,b);this._resetPanelVisible()}},{ATTRS:{selected:{sync:!0,value:!1},title:{sync:!1},elTagName:{value:"li"},tpl:{value:'\x3cspan class\x3d"bui-tab-item-text"\x3e{title}\x3c/span\x3e'},selectable:{value:!0},panel:{},panelContent:{},panelVisibleStatus:{value:"selected"}}},{xclass:"tab-panel-item"});e.Tab.TabPanelItem=g})(window.BUI,jQuery);(function(e,h){var g=e.Component.Controller.extend({createDom:function(){var c=this.get("parent");c&&this.set("tabContentContainer",c.getTabContentContainer())},renderUI:function(){var c=this.get("tabContentContainer"),b=this.get("tabContentTpl");c&&(c=h(b).appendTo(c),this.set("tabContentEl",c))},bindUI:function(){var c=this;c.get("el").on("click",function(b){h(b.target).hasClass("bui-tab-close")?!1!==c.fire("closing")&&c.close():c.fire("itemclick")})},destructor:function(){var c=this.get("tabContentEl");c&&c.remove()},setTabContentVisible:function(c){var b=this.get("tabContentEl");b&&(c?b.show():b.hide())},close:function(){this.fire("closed")},_uiSetHref:function(c){var b=this.get("tabContentEl");c=c||this.get("href");b&&h("iframe",b).attr("src",c)},_uiSetSelected:function(c){this.get("parent");var b=this.get("el");this.setTabContentVisible(c);c?b.addClass("bui-tab-nav-item-selected"):b.removeClass("bui-tab-nav-item-selected")},_uiSetCloseable:function(c){var b=this.get("el").find(".bui-tab-close");c?b.show():b.hide()}},{ATTRS:{elTagName:{value:"li"},selected:{value:!1},closeable:{value:!0},href:{value:""},events:{value:{click:!0,closing:!0,closed:!0,itemclick:!0}},tabContentContainer:{},tabContentTpl:{value:'\x3cdiv class\x3d"tab-content" style\x3d"display:none;"\x3e\x3ciframe src\x3d"" width\x3d"100%" height\x3d"100%" frameborder\x3d"0"\x3e\x3c/iframe\x3e\x3c/div\x3e'},visible:{value:!0},title:{value:""},tpl:{value:'\x3cspan\x3e{title}\x3ci class\x3d"iconfont icon-close bui-tab-close"\x3e\x3c/i\x3e\x3c/span\x3e'}}},{xclass:"nav-tab-item",priority:0});e.Tab.NavTabItem=g})(window.BUI,jQuery);(function(e,h){var g=e.Component.Controller.extend({addTab:function(c,b){var a=c.id||e.guid("tab-item"),d=this.getItemById(a);d||(c=e.mix({id:a,visible:!0,seleted:!0,xclass:"nav-tab-item"},c),this.addChild(c),d=this.getItemById(a));this._setItemSelected(d);return d},getTabContentContainer:function(){return this.get("el").find(".bui-tab-content")},getContentElement:function(){var c=this.get("listEl");c||(c=this.get("el").find(".bui-tab-title"),this.setInternal("listEl",c));return c},bindUI:function(){var c=this;c.on("itemclick",function(b){c._setItemSelected(b.target)});c.on("closed",function(b){c._closeItem(b.target)})},setSelected:function(c){c=this.getItemById(c);this._setItemSelected(c)},getSelectedItem:function(){var c=this.get("children"),b=null;e.each(c,function(a){if(a.get("selected"))return b=a,!1});return b},getItemById:function(c){var b=this.get("children"),a=null;e.each(b,function(b){if(b.get("id")===c)return a=b,!1});return a},_closeItem:function(c){var b=this._getIndex(c),a=this.getSelectedItem(),d=this.get("preItem")||this._getItemByIndex(b-1),b=this._getItemByIndex(b+1);this.removeChild(c,!0);a===c&&(d?this._setItemSelected(d):this._setItemSelected(b));return!1},closeAll:function(){var c=this.get("children");e.each(c,function(b){b.get("closeable")&&b.close()})},closeOther:function(c){var b=this.get("children");e.each(b,function(a){c!==a&&a.close()})},_getItemByIndex:function(c){return this.get("children")[c]},_getIndex:function(c){var b=this.get("children");return e.Array.indexOf(c,b)},_uiSetHeight:function(c){var b=this.get("el"),a=b.find(".bui-tab-title"),d=this.getTabContentContainer();c&&d.height(c-a.height());b.height(c)},_setItemSelected:function(c){var b=this.getSelectedItem();c!==b&&(b&&b.set("selected",!1),this.set("preItem",b),c&&(c.get("selected")||c.set("selected",!0),this.fire("activeChange",{item:c}),this.fire("selectedchange",{item:c})))},syncFit:function(){var c=this.get("render"),c=h(c).height();this.set("height",c-5)}},{ATTRS:{defaultChildClass:{value:"nav-tab-item"},tpl:{value:'\x3cdiv class\x3d"bui-tab"\x3e\x3cul class\x3d"bui-tab-title"\x3e\x3c/ul\x3e\x3cdiv class\x3d"bui-tab-content"\x3e\x3c/div\x3e\x3c/div\x3e'},events:{value:{itemclick:!1,selectedchange:!1}}}},{xclass:"nav-tab",priority:0});e.Tab.NavTab=g})(window.BUI,jQuery);(function(e,h){function g(a,b){a>b&&(a=b);0>a&&(a=0);return a/b*100}var c=document,b=e.Component.Controller.extend({renderUI:function(){var a=this;a.get("isVertical")?a.get("el").addClass("x-slider-vertical"):a.get("el").addClass("x-slider-horizontal");a.on("beforeSyncUI",function(){var b=a.get("backTpl"),c=a.get("handleTpl");a._setBackTpl(b);a._handleTpl(c)})},slideTo:function(a){this.set("value",a)},bindUI:function(){var a=this,b=a.get("el");b.find(".x-slider-handle").on("click",function(a){a.preventDefault()});b.on("mousedown",function(c){var d=h(c.target),e=b.offset();d.hasClass("x-slider-handle")?(c.preventDefault(),a._handleDrag(c)):(e={left:c.pageX-e.left,top:c.pageY-e.top},a._slideByOffset(e,!0))})},setRange:function(a,b,c){a>b&&(a=b);var d=this.get("backEl"),e=this.get("isVertical"),f=this.get("handleEl"),g=f.length,t=b-a,p=c?this.get("duration"):null,r=e?"height":"width",e=e?"bottom":"left";c=c?"animate":"css";var u={},q={};d&&(u[r]=t+"%",u[e]=a+"%",d[c](u,p));if(1===g)q[e]=b+"%",f[c](q,p);else if(2===g){q[e]=a+"%";if(f[0].style[e]!==q[e])h(f[0])[c](q,p);q[e]=b+"%";if(f[1].style[e]!==q[e])h(f[1])[c](q,p)}},_setBackTpl:function(a){var b=this.get("el");a=h(a).appendTo(b);a.addClass("x-slider-back");this.setInternal("backEl",a)},_handleTpl:function(a){var b=this.get("el");this.get("range")?(this._createHandleEl(a,"x-slider-handle-start"),this._createHandleEl(a,"x-slider-handle-end")):this._createHandleEl(a);a=b.find(".x-slider-handle");this.setInternal("handleEl",a)},_createHandleEl:function(a,b){var c=this.get("el"),c=h(a).appendTo(c);c.addClass("x-slider-handle");c.attr("tabindex","0");b&&c.addClass(b)},_slideByOffset:function(a,b){var c=this.get("value"),d=this._formatValue(a);c===d||e.isArray(d)&&e.Array.equals(d,c)||(b?this.set("value",d):(this.setInternal("value",d),this._setValue(d,!1)))},_handleDrag:function(a){function b(a){var b=g.get("draging");if(b){a.preventDefault();var c=a.pageY,d={};d.left=b.elX+(a.pageX-b.startX);d.top=b.elY+(c-b.startY);g._slideByOffset(d,!1)}}function e(a){1==a.which&&(g.set("draging",!1),h(c).off("mousemove",b),h(c).off("mouseup",e))}var g=this,l=g.get("isVertical"),n=h(a.target),m=n.position();1==a.which&&(g.set("draging",{elX:m.left,elY:l?m.top+n.height():m.top,startX:a.pageX,startY:a.pageY}),h(c).on("mousemove",b),h(c).on("mouseup",e))},_getCalcValue:function(a){var b=this.get("el"),c=this.get("max"),e=this.get("min"),h=this.get("step"),n=this.get("isVertical"),m=n?b.height():b.width();a=n?g(b.height()-a.top,m):g(a.left,m);c=(c-e)*a/100+e;h&&(c=parseInt(c,10),(e=c%h)&&(c+=h-e));return c},_formatValue:function(a){var b=this.get("value");a=this._getCalcValue(a);return e.isNumber(b)?a:e.isArray(b)?Math.abs(b[0]-a)<Math.abs(b[1]-a)?[a,b[1]]:[b[0],a]:b},_uiSetValue:function(a){this._setValue(a,!0)},_setValue:function(a,b){var c=this.get("min"),d=this.get("max"),h=d-c,n,m;c==d?(n=0,m=100):e.isNumber(a)?(n=0,m=g(a-c,h)):e.isArray(a)&&(n=g(a[0]-c,h),m=g(a[1]-c,h));this.setRange(n,m,b);this.fire("change",{value:a})}},{ATTRS:{backEl:{},handleEl:{},min:{value:0},duration:{value:400},max:{value:100},value:{},step:{value:1},handleTpl:{value:"\x3cspan\x3e\x3c/span\x3e"},isVertical:{value:!1},range:{value:!1},backTpl:{value:"\x3cdiv\x3e\x3c/div\x3e"}}},{xclass:"slider"});e.Slider=b})(window.BUI,jQuery);(function(e,h){function g(b){if(null==b)return{};if(h.isPlainObject(b))return b;var a={};if(e.isArray(b)){for(var c=0;c<b.length;c++)a[c]=b[c];return a}return{0:b}}e.Form={};var c=function(b){c.superclass.constructor.call(this,b)};e.extend(c,e.Base);c.ATTRS={name:{},msg:{},validator:{value:function(b,a,c,e){}}};e.augment(c,{valid:function(b,a,c,f){var d=c;e.isArray(a)&&e.isString(a[1])&&(a[1]&&(d=a[1]),a=a[0]);c=this.get("validator");var h=g(a),d=d||this.get("msg"),d=e.substitute(d,h);return c.call(this,null==b?"":b,a,d,f)}});e.Form.Rule=c})(window.BUI,jQuery);(function(e,h){var g=e.Form.Rule,c={},b={add:function(a){var b;h.isPlainObject(a)?(b=a.name,c[b]=new g(a)):a.get&&(b=a.get("name"),c[b]=a);return c[b]},remove:function(a){delete c[a]},get:function(a){return c[a]},valid:function(a,c,e,g,h){return(a=b.get(a))?a.valid(c,e,g,h):null},isValid:function(a,c,e,g){return null==b.valid(a,c,e,g)}};b.add({name:"required",msg:"\u4e0d\u80fd\u4e3a\u7a7a\uff01",validator:function(a,b,c){if(!1!==b&&/^\s*$/.test(a))return c}});b.add({name:"equalTo",msg:"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",validator:function(a,b,c){var d=h(b);d.length&&(b=d.val());return a===b?void 0:c}});b.add({name:"min",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(a,b,c){e.isString(a)&&(a=a.replace(/\,/g,""));if(""!==a&&parseFloat(a)<parseFloat(b))return c}});b.add({name:"max",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(a,b,c){e.isString(a)&&(a=a.replace(/\,/g,""));if(""!==a&&parseFloat(a)>parseFloat(b))return c}});b.add({name:"length",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e3a{0}\uff01",validator:function(a,b,c){if(null!=a&&(a=h.trim(a.toString()),b!=a.length))return c}});b.add({name:"minlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5c0f\u4e8e{0}\uff01",validator:function(a,b,c){if(null!=a&&(a=h.trim(a.toString()),a.length<b))return c}});b.add({name:"maxlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5927\u4e8e{0}\uff01",validator:function(a,b,c){if(a&&(a=h.trim(a.toString()),a.length>b))return c}});b.add({name:"regexp",msg:"\u8f93\u5165\u503c\u4e0d\u7b26\u5408{0}\uff01",validator:function(a,b,c){if(b)return b.test(a)?void 0:c}});b.add({name:"email",msg:"\u4e0d\u662f\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff01",validator:function(a,b,c){if(a=h.trim(a))return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)?void 0:c}});b.add({name:"date",msg:"\u4e0d\u662f\u6709\u6548\u7684\u65e5\u671f\uff01",validator:function(a,b,c){if(!e.isNumber(a)&&!e.isDate(a)&&(a=h.trim(a)))return e.Date.isDateString(a)?void 0:c}});b.add({name:"minDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(a,b,c){if(a&&(a=e.Date.parse(a))&&a<e.Date.parse(b))return c}});b.add({name:"maxDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(a,b,c){if(a&&(a=e.Date.parse(a))&&a>e.Date.parse(b))return c}});b.add({name:"mobile",msg:"\u4e0d\u662f\u6709\u6548\u7684\u624b\u673a\u53f7\u7801\uff01",validator:function(a,b,c){if(a=h.trim(a))return/^\d{11}$/.test(a)?void 0:c}});b.add({name:"number",msg:"\u4e0d\u662f\u6709\u6548\u7684\u6570\u5b57\uff01",validator:function(a,b,c){if(!e.isNumber(a))return a=a.replace(/\,/g,""),isNaN(a)?c:void 0}});e.Form.Rules=b})(window.BUI,jQuery);(function(e,h){e.Form.Field={};var g=e.Form.Rules,c=e.Tooltip,b=e.Component.Controller.extend({renderUI:function(){var a=this.get("control");if(a)this.set("controlContainer",a.parent());else{var a=this.get("controlTpl"),b=this.getControlContainer();a&&(a=h(a).appendTo(b),this.set("control",a))}},bindUI:function(){var a=this;a.on("afterDisabledChange",function(b){b.newVal?a.clearErrors(!1,!1):a.valid()})},validRules:function(a,b){if(!a||this.get("pauseValid"))return null;var c=this._getValidMessages(),d=null,e;for(e in a)if(a.hasOwnProperty(e)&&(d=g.valid(e,b,a[e],c[e],this)))break;return d},_getValidMessages:function(){var a=this.get("defaultMessages"),b=this.get("messages");return e.merge(a,b)},getValidError:function(a){var b=this.get("validator"),c;c=this.validRules(this.get("defaultRules"),a)||this.validRules(this.get("rules"),a);c||this.get("pauseValid")||(this.parseValue&&(a=this.parseValue(a)),c=b?b.call(this,a):"");return c},showErrors:function(a){a=a||this.getErrors();this.clearViewErrors();this.get("showError")&&a&&a.length&&this.showError(a[0])},addRule:function(a,b,c){var d=this.get("rules"),e=this.get("messages");d[a]=b;c&&(e[a]=c)},addRules:function(a,b){var c=this;e.each(a,function(a,d){c.addRule(d,a,b?b[d]:null)})},removeRule:function(a){delete this.get("rules")[a]},clearRules:function(){this.set("rules",{})},getControlContainer:function(){var a=this.get("el"),b=this.get("controlContainer");b&&e.isString(b)&&(b=a.find(b));return b&&b.length?b:a},clearViewErrors:function(){var a=this.get("errTooltip");a&&(a.destroy(),this.set("errTooltip",null));this.get("el").removeClass("has-error")},showError:function(a){var b=this.get("el"),e=this.get("errTooltip");e||(e=new c.Tip({trigger:b,alignType:"right",title:a}),e.render(),this.set("errTooltip",e),this.get("el").addClass("has-error"))},isField:!0,onChange:function(){this.fire("change")},isCurrentValue:function(a){return a==this.get("value")},_clearError:function(){this.set("error",null);this.clearViewErrors()},_setError:function(a){this.set("error",a);this.showErrors()},getControlValue:function(a){a=a||this.getInnerControl();return a.val()},setControlValue:function(a){this.getInnerControl().val(a)},parseValue:function(a){return a},onValid:function(){var a=this.getControlValue(),a=this.parseValue(a);this.isCurrentValue(a)||(this.setInternal("value",a),this.onChange())},valid:function(){this.validControl()},validControl:function(a){var b;a=a||this.getControlValue();var c=this.get("error");(b=this.getValidError(a))?(this._setError(b),this.fire("error",{msg:b,value:a}),c!==b&&this.fire("validchange",{valid:!1})):(this._clearError(),this.fire("valid"),c&&this.fire("validchange",{valid:!0}));return!b},focus:function(){this.getInnerControl().focus()},change:function(){this.getInnerControl().change()},blur:function(){this.getInnerControl().blur()},isValid:function(){this.validControl();return!this.get("error")},getError:function(){return this.get("error")},getErrors:function(){var a=this.getError();return a?[a]:[]},clearErrors:function(a){this._clearError();a&&this.getControlValue()!=this.get("value")&&e.isNullOrEmpty(this.get("value"))&&this.setControlValue(this.get("value"))},getInnerControl:function(){return this.get("control")},destructor:function(){var a=this.get("errTooltip");a&&(a.destroy(),this.set("errTooltip",null));if(a=this.get("datePicker"))a.destroy(),this.set("datePicker",null);if(a=this.get("select"))a.destroy(),this.set("select",null)},setInnerWidth:function(a){var b=this.getInnerControl(),c=b.siblings(),g=b.outerWidth()-b.width();e.each(c,function(a){g+=h(a).outerWidth()});b.width(a-g)},_uiSetValue:function(a){this.setControlValue(a);this.get("rendered")&&(this.validControl(a),this.onChange())},_uiSetName:function(a){this.get("control").attr("name",a)},_uiSetDisabled:function(a){var b=this.getInnerControl(),c=this.get("children");b.attr("disabled",a);this.get("rendered")&&(a&&this.clearErrors(),a||this.valid());e.each(c,function(b){b.set("disabled",a)})},_uiSetWidth:function(a){this.get("el").width(a);null!=a&&this.get("forceFit")&&this.setInnerWidth(a)}},{ATTRS:{defaultRules:{value:{}},defaultMessages:{value:{}},rules:{shared:!1,value:{}},messages:{shared:!1,value:{}},validator:{},error:{},pauseValid:{value:!1},forceFit:{value:!1},name:{},showError:{value:!0},value:{},controlContainer:{},control:{},controlTpl:{value:'\x3cinput class\x3d"form-control" type\x3d"text"/\x3e'},prefixCls:{value:e.prefix},events:{value:{error:!1,valid:!1,change:!0,validchange:!0}}}},{xclass:"form-field"});e.Form.Field.Base=b})(window.BUI,jQuery);(function(e,h){var g=e.Form.Field.Base.extend({},{xclass:"form-field-text"});e.Form.Field.Text=g})(window.BUI,jQuery);(function(e,h){var g=e.Form.Field.Base.extend({},{ATTRS:{controlTpl:{value:'\x3cinput type\x3d"hidden"/\x3e'},tpl:{value:""}}},{xclass:"form-field-hidden"});e.Form.Field.Hidden=g})(window.BUI,jQuery);(function(e,h){var g=e.Form.Field.Base.extend({parseValue:function(c){if(""==c||null==c)return null;if(e.isNumber(c))return c;var b=this.get("allowDecimals");c=c.replace(/\,/g,"");return b?parseFloat(parseFloat(c).toFixed(this.get("decimalPrecision"))):parseInt(c,10)},_uiSetMax:function(c){this.addRule("max",c)},_uiSetMin:function(c){this.addRule("min",c)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:!0,max:!0}},defaultRules:{value:{number:!0}},allowDecimals:{value:!0},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});e.Form.Field.Number=g})(window.BUI,jQuery);(function(e,h){var g=e.Form.Field.Base.extend({_uiSetValue:function(c){var b=this.get("textEl"),a=this.getControlContainer(),d=this.get("renderer"),d=d?d(c):c;c=this.get("width");b&&b.remove();d=d||"\x26nbsp;";b=e.substitute(this.get("textTpl"),{text:d});b=h(b).appendTo(a);a=b.outerWidth()-b.width();b.width(c-a);this.set("textEl",b)}},{ATTRS:{controlTpl:{value:'\x3cinput type\x3d"hidden"/\x3e'},textTpl:{value:'\x3cspan class\x3d"x-form-text"\x3e{text}\x3c/span\x3e'},renderer:{value:function(c){return c}},tpl:{value:""}}},{xclass:"form-field-plain"});e.Form.Field.Plain=g})(window.BUI,jQuery);(function(e,h){var g=e.Form.Field.Base.extend({_uiSetRows:function(c){var b=this.getInnerControl();c&&b.attr("rows",c)},_uiSetCols:function(c){var b=this.getInnerControl();c&&b.attr("cols",c)}},{ATTRS:{controlTpl:{value:'\x3ctextarea class\x3d"form-control"\x3e\x3c/textarea\x3e'},rows:{},cols:{},decorateCfgFields:{value:{rows:!0,cols:!0}}}},{xclass:"form-field-textarea"});e.Form.Field.TextArea=g})(window.BUI,jQuery);(function(e,h){var g=e.Date,c=e.Calendar,b=e.Form.Field.Base.extend({renderUI:function(){var a=this.get("datePicker");h.isPlainObject(a)&&this.initDatePicker(a);(a.get&&a.get("showTime")||a.showTime)&&this.getInnerControl().addClass("calendar-time")},initDatePicker:function(a){a.trigger=this.getInnerControl();a.autoRender=!0;a=new c.DatePicker(a);this.set("datePicker",a);this.set("isCreatePicker",!0);this.get("children").push(a)},setControlValue:function(a){var b=this.getInnerControl();e.isDate(a)&&(a=g.format(a,this._getFormatMask()));b.val(a)},_getFormatMask:function(){var a=this.get("datePicker");return a.showTime||a.get&&a.get("showTime")?"yyyy-mm-dd HH:MM:ss":"yyyy-mm-dd"},parseValue:function(a){return e.isNumber(a)?new Date(a):g.parse(a)},isCurrentValue:function(a){return g.isEquals(a,this.get("value"))},_uiSetMax:function(a){this.addRule("max",a);var b=this.get("datePicker");b&&(b.set?b.set("maxDate",a):b.maxDate=a)},_uiSetMin:function(a){this.addRule("min",a);var b=this.get("datePicker");b&&(b.set?b.set("minDate",a):b.minDate=a)}},{ATTRS:{controlTpl:{value:'\x3cinput type\x3d"text" class\x3d"form-control calendar"/\x3e'},defaultRules:{value:{date:!0}},max:{},min:{},value:{setter:function(a){return e.isNumber(a)?new Date(a):a}},datePicker:{shared:!1,value:{}},isCreatePicker:{value:!0}}},{xclass:"form-field-date"});e.Form.Field.Date=b})(window.BUI,jQuery);(function(e,h){var g=e.Select,c=e.Form.Field.Base.extend({renderUI:function(){var b=this.getInnerControl(),a=this.get("select");this.get("srcNode")&&b.is("select")||h.isPlainObject(a)&&this._initSelect(a)},_initSelect:function(b){var a=this.get("items");b.render=this.getControlContainer();b.valueField=this.getInnerControl();b.autoRender=!0;b.items=this.setItems(a);b=new g.Select(b);this.set("select",b);this.set("isCreate",!0);this.get("children").push(b)},setItems:function(b){if(h.isPlainObject(b)){var a=[];e.each(b,function(b,c){a.push({value:c,text:b})});b=a}return b},setControlValue:function(b){var a=this.get("select");a&&a.set&&a.getSelectedValue()!==b&&a.setSelectedValue(b)},getSelectedText:function(){var b=this.get("select"),a=this.getInnerControl();return a.is("select")?(b=a[0],(b=b.options[b.selectedIndex])?b.text:""):b.getSelectedText()},setInnerWidth:function(b){var a=this.getInnerControl(),c=this.get("select"),e=a.outerWidth()-a.width();a.width(b-e);c&&c.set&&c.set("width",b)}},{ATTRS:{items:{},controlTpl:{value:'\x3cinput type\x3d"hidden"/\x3e'},showBlank:{value:!0},forceFit:{value:!0},emptyText:{value:"\u8bf7\u9009\u62e9"},select:{shared:!1,value:{}}}},{xclass:"form-field-select"});e.Form.Field.Select=c})(window.BUI,jQuery);(function(e,h){var g=e.Select,c=e.Form.Field.Base.extend({renderUI:function(){var b=this.getInnerControl(),a=this.get("search");this.get("srcNode")&&b.is("search")||h.isPlainObject(a)&&this._initSearch(a)},_initSearch:function(b){b.render=this.getControlContainer();b.valueField=this.getInnerControl();b.autoRender=!0;b=new g.Search(b);this.set("search",b);this.set("isCreate",!0);this.get("children").push(b)},_uiSetText:function(b){this.setSearchText(b)},setControlValue:function(b){this.get("search").setSearchValue(b)},setSearchText:function(b){this.get("search").setSearchText(b)},setInnerWidth:function(b){var a=this.getInnerControl(),c=this.get("search"),e=a.outerWidth()-a.width();a.width(b-e);c&&c.set&&c.set("width",b)}},{ATTRS:{controlTpl:{value:'\x3cinput type\x3d"hidden"/\x3e'},forceFit:{value:!0},search:{shared:!1,value:{}},text:{value:""}}},{xclass:"form-field-search"});e.Form.Field.Search=c})(window.BUI,jQuery);(function(e,h){var g=e.Form.Field,c=e.Component.Controller.extend({getFields:function(b){var a=[],c=this.get("children");e.each(c,function(c){c instanceof g.Base?b&&c.get("name")!=b||a.push(c):c.getFields&&(a=a.concat(c.getFields(b)))});return a},getRecord:function(){var b=this,a={},c=b.getFields();e.each(c,function(c){var d=c.get("name");c=b._getFieldValue(c);if(!a[d])a[d]=c;else if(e.isArray(a[d])&&null!=c)a[d].push(c);else if(null!=c){var f=[a[d]];f.push(c);a[d]=f}});return a},getField:function(b){var a=this.getFields(),c=null;e.each(a,function(a){if(a.get("name")===b)return c=a,!1});return c},getFieldAt:function(b){return this.getFields()[b]},setFieldValue:function(b,a){var c=this,f=c.getFields(b);e.each(f,function(b){c._setFieldValue(b,a)})},_setFieldValue:function(b,a){b.get("disabled")||(null==a&&(a=""),b.clearErrors(!0),b.set("value",a))},getFieldValue:function(b){var a=this;b=a.getFields(b);var c=[];e.each(b,function(b){(b=a._getFieldValue(b))&&c.push(b)});return 0===c.length?null:1===c.length?c[0]:c},_getFieldValue:function(b){return b.getControlValue()||""},clearFields:function(){this.clearErrors(!0);this.setRecord({})},setRecord:function(b){var a=this,c=a.getFields();e.each(c,function(c){var d=c.get("name");a._setFieldValue(c,b[d])})},updateRecord:function(b){var a=this,c=a.getFields();e.each(c,function(c){var d=c.get("name");b.hasOwnProperty(d)&&a._setFieldValue(c,b[d])})},valid:function(){var b=this.get("children");e.each(b,function(a){a.get("disabled")||a.valid()})},isValid:function(){return this.isChildrenValid()},isChildrenValid:function(){var b=this.get("children"),a=!0;e.each(b,function(b){if(!b.get("disabled")&&!b.isValid())return a=!1});return a},serializeToObject:function(){return e.FormHelper.serializeToObject(this.get("el")[0])},getData:function(b){if(b){if(this.isValid())return this.getRecord()}else return this.getRecord();return!1}},{ATTRS:{record:{setter:function(b){this.setRecord(b)},getter:function(){return this.getRecord()}},tpl:{value:'\x3cdiv class\x3d"bui-form-fields"\x3e\x3c/div\x3e'}}},{xclass:"form"});e.Form.Form=c})(window.BUI,jQuery);(function(e,h){e.Grid={};var g=e.prefix,c=g+"grid",b=g+"grid-border",g=c+"-row",c=e.List.SimpleList.extend({renderUI:function(){this.setColumns()},bindUI:function(){var a=this.get("itemCls"),b=a+"-hover";this.get("el").delegate("."+a,"mouseover",function(a){h(a.currentTarget).addClass(b)}).delegate("."+a,"mouseout",function(a){h(a.currentTarget).removeClass(b)})},showData:function(a){var b=this;b.clearData();e.each(a,function(a,c){b._createRow(a,c)})},clearData:function(){this.get("itemContainer").empty()},_uiSetColumns:function(a){this.clearData();this.setColumns(a)},setColumns:function(a){var b=this,c=b.get("headerRowEl");a=a||b.get("columns");c.empty();e.each(a,function(a){b._createColumn(a,c)})},_createColumn:function(a,b){var c=e.substitute(this.get("columnTpl"),a);h(c).appendTo(b)},getItemTpl:function(a,b){var c=this,d=c.get("columns"),g=c.get("rowTpl"),h=[];e.each(d,function(b){h.push(c._getCellTpl(b,b.dataIndex,a))});return g=e.substitute(g,{cellsTpl:h.join("")})},_getCellTpl:function(a,b,c){var d=a.renderer;b=d?d(c[b],c):c[b];c=this.get("cellTpl");return e.substitute(c,{elCls:a.elCls,text:b})},_uiSetInnerBorder:function(a){var c=this.get("el");a?c.addClass(b):c.removeClass(b)},_uiSetTableCls:function(a){this.get("el").find("table").attr("class",a)}},{ATTRS:{itemCls:{value:g},tableCls:{value:c+"-table"},columns:{sync:!1,value:[]},innerBorder:{value:!0},headerRowEl:{valueFn:function(){return this.get("el").find("thead").children("tr")}},itemContainer:{valueFn:function(){return this.get("el").find("tbody")}},tpl:{value:'\x3ctable cellspacing\x3d"0" class\x3d"{tableCls}" cellpadding\x3d"0"\x3e\x3cthead\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e'},rowTpl:{value:'\x3ctr class\x3d"'+g+'"\x3e{cellsTpl}\x3c/tr\x3e'},cellTpl:{value:'\x3ctd class\x3d"'+c+'-cell {elCls}"\x3e\x3cdiv class\x3d"'+c+'-cell-inner"\x3e{text}\x3c/div\x3e\x3c/td\x3e'},columnTpl:{value:'\x3cth class\x3d"'+c+'-hd {elCls}" width\x3d"{width}"\x3e\x3cdiv class\x3d"'+c+'-hd-inner"\x3e{title}\x3c/div\x3e\x3c/th\x3e'},events:{value:{}}}},{xclass:"simple-grid"});e.Grid.SimpleGrid=c})(window.BUI,jQuery);(function(e,h){var g=e.prefix,c=g+"grid-hd-title",b=e.Component.Controller.extend({setTplContent:function(a){var b=this.get("sortTpl"),e=this.get("el"),g=this.get("content");a=this.getTpl(a);!g&&a&&(e.empty(),e.html(a));e=e.find("."+c);h(b).insertAfter(e)},_toggleSortState:function(){var a=this.get("sortState");this.set("sortState",a?"ASC"===a?"DESC":"ASC":"ASC")},_uiSetWidth:function(a){a&&(this.get("el").css("width",a+"px"),this.set("originWidth",a))},_uiSetTitle:function(a){this.get("rendered")&&this.setTplContent()},_uiSetDraggable:function(a){this.get("rendered")&&this.setTplContent()},_uiSetSortable:function(a){this.get("rendered")&&this.setTplContent()},_uiSetTpl:function(a){this.get("rendered")&&this.setTplContent()},_uiSetSortState:function(a){var b=this.get("el");b.removeClass("sort-asc sort-desc");"ASC"===a?b.addClass("sort-asc"):"DESC"===a&&b.addClass("sort-desc")}},{ATTRS:{elTagName:{value:"th"},sortTpl:{getter:function(){return this.get("sortable")?'\x3cspan class\x3d"'+g+'grid-sort-icon"\x3e\x26nbsp;\x3c/span\x3e':""}},dataIndex:{value:""},draggable:{sync:!1,value:!0},editor:{},focusable:{value:!1},fixed:{value:!1},id:{},visible:{},renderer:{},resizable:{value:!0},sortable:{sync:!1,value:!0},sortState:{value:null},title:{sync:!1,value:"\x26#160;"},width:{value:180},tpl:{sync:!1,value:'\x3cdiv class\x3d"'+g+'grid-hd-inner"\x3e\x3cspan class\x3d"'+c+'"\x3e{title}\x3c/span\x3e\x3c/div\x3e'},events:{value:{afterWidthChange:!0,afterSortStateChange:!0,afterVisibleChange:!0,click:!0,resize:!0,move:!0}}}},{xclass:"grid-hd",priority:1});b.Empty=b.extend({},{ATTRS:{type:{value:"empty"},sortable:{value:!1},width:{value:null},tpl:{value:'\x3cdiv class\x3d"'+g+'grid-hd-inner"\x3e\x3c/div\x3e'}}},{xclass:"grid-hd-empty",priority:1});e.Grid.Column=b})(window.BUI,jQuery);(function(e,h){var g=e.Grid.Column,c=e.Component.Controller.extend({initializer:function(){var b=this,a=b.get("children"),c=b.get("columns"),e;h.each(c,function(d,e){var f=b._createColumn(e);a[d]=f;c[d]=f});e=b._createEmptyColumn();a.push(e);b.set("emptyColumn",e)},getContentElement:function(){return this.get("el").find("tr")},addColumn:function(b,a){var c=a,e=this.get("columns");b=this._createColumn(b);void 0===a&&(a=e.length,c=this.get("children").length-1);e.splice(a,0,b);this.addChild(b,c);this.fire("add",{column:b,index:a});return b},removeColumn:function(b){var a=this.get("columns"),c;b=e.isNumber(b)?a[b]:b;c=e.Array.indexOf(b,a);a.splice(c,1);this.fire("remove",{column:b,index:c});return this.removeChild(b,!0)},bindUI:function(){this._bindColumnsEvent()},getColumns:function(){return this.get("columns")},getColumnsWidth:function(){var b=this.getColumns(),a=0;h.each(b,function(b,c){c.get("visible")&&(a+=c.get("el").outerWidth())});return a},getColumnOriginWidth:function(){var b=this.getColumns(),a=0;h.each(b,function(b,c){if(c.get("visible")){var d=c.get("originWidth")||c.get("width");a+=d}});return a},getColumnByIndex:function(b){return this.getColumns()[b]},getColumn:function(b){var a=this.getColumns(),c=null;h.each(a,function(a,d){if(b(d))return c=d,!1});return c},getColumnById:function(b){return this.getColumn(function(a){return a.get("id")===b})},getColumnIndex:function(b){var a=this.getColumns();return e.Array.indexOf(b,a)},scrollTo:function(b){var a=this.get("el");void 0!==b.top&&a.scrollTop(b.top);void 0!==b.left&&a.scrollLeft(b.left)},_bindColumnsEvent:function(){var b=this;b.on("afterWidthChange",function(a){a.target!==b&&b.setTableWidth()});b.on("afterVisibleChange",function(a){a.target!==b&&b.setTableWidth()});b.on("afterSortStateChange",function(a){var c=a.target,e=b.getColumns();a.newVal&&h.each(e,function(a,b){b!==c&&b.set("sortState","")})});b.on("add",function(){b.setTableWidth()});b.on("remove",function(){b.setTableWidth()})},_createColumn:function(b){if(b instanceof g)return b;b.id||(b.id=e.guid("col"));return new g(b)},_createEmptyColumn:function(){return new g.Empty},setTableWidth:function(){var b=this.get("width"),a,c;"auto"!=b&&(a=this.getColumnsWidth(),c=this.get("emptyColumn"),b<a?c.get("el").width(17):c.get("el").width("auto"))},_uiSetWidth:function(b){this.get("el").width(b);this.setTableWidth()}},{ATTRS:{columns:{value:[]},emptyColumn:{},focusable:{value:!1},tpl:{value:'\x3ctable cellspacing\x3d"0" class\x3d"'+e.prefix+'grid-table" cellpadding\x3d"0"\x3e\x3cthead\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/thead\x3e\x3c/table\x3e'},events:{value:{add:!1,remove:!1}}}},{xclass:"grid-header",priority:1});e.Grid.Header=c})(window.BUI,jQuery);(function(e,h){function g(a){return e.isString(a)?-1!==a.indexOf("%"):!1}var c=e.Component,b=e.Grid.Header,a=e.Grid.Column,d=e.prefix,f=d+"grid-header-container",k=d+"grid-body",l=d+"grid-width",n=d+"grid-height",m=d+"grid-border",t=d+"grid-tbar",p=d+"grid-bbar",r=d+"grid-btn-bar",u=d+"grid-row",q=d+"grid-cell",v=d+"grid-cell-inner",w=d+"grid-cell-empty",y=d+"hidden",x=e.List.SimpleList.extend({createDom:function(){var a=this.get("render"),a=h(a).width(),b=this.get("width");!b&&a?(b=this.getAppendWidth(),this.set("width",a-b)):b&&(this.set("width",b),this.get("el").addClass(l));this.get("height")&&this.get("el").addClass(n);this.get("innerBorder")&&this.get("el").addClass(m)},renderUI:function(){var a=this.get("el").find("."+k);this.set("bodyEl",a);this._setTableTpl();this._initHeader();this._initBars();this.resetHeaderRow()},_setTableTpl:function(a){var b=this.get("bodyEl");a=a||this.get("tableTpl");h(a).appendTo(b);a=b.find("table");b=b.find("tbody");this.set("tableEl",a);this.set("tbodyEl",b);this.set("itemContainer",b);this._setTableCls(this.get("tableCls"))},_uiSetTableCls:function(a){this._setTableCls(a)},_setTableCls:function(a){this.get("tableEl").attr("class",a)},resetHeaderRow:function(){if(this.get("useHeaderRow")){var a=this.get("headerRowEl"),b=this.get("tbodyEl");a&&a.remove();a=this._createHeaderRow();a.prependTo(b);this.set("headerRowEl",a)}},_createHeaderRow:function(){var a=this,b=a._getColumns(),c=a.get("tbodyEl"),d=a.get("headerRowTpl"),f=[];h.each(b,function(b,c){f.push(a._getHeaderCellTpl(c))});a.get("useEmptyCell")&&f.push(a._getEmptyCellTpl());d=e.substitute(d,{cellsTpl:f.join("")});return h(d).appendTo(c)},_getColumns:function(){return this.get("columns")},_getHeaderCellTpl:function(a){var b=this.get("headerCellTpl"),c=a.get("width");e.isNumeric(c)&&(c+="px");return e.substitute(b,{id:a.get("id"),width:c,hideCls:a.get("visible")?"":y})},_getEmptyCellTpl:function(){return'\x3ctd class\x3d"'+q+" "+w+'"\x3e\x26nbsp;\x3c/td\x3e'},getItemTpl:function(a,b){var c=this,d=c._getColumns();c.get("tbodyEl");var f=c.get("rowTpl"),g=[];e.each(d,function(d){var e=d.get("dataIndex");g.push(c._getCellTpl(d,e,a,b))});c.get("useEmptyCell")&&g.push(c._getEmptyCellTpl());return f=e.substitute(f,{cellsTpl:g.join("")})},_getCellTpl:function(a,b,c,d){c=this._getCellText(a,c,d)||a.get("cellTpl");d=this.get("cellTpl");return e.substitute(d,{elCls:a.get("elCls"),id:a.get("id"),dataIndex:b,cellText:c,hideCls:a.get("visible")?"":y})},_getCellText:function(a,b,c){try{var d=a.get("dataIndex"),e=a.get("renderer"),f=e?e(b[d],b,c):b[d];return null==f?"":f}catch(D){throw"column:"+a.get("title")+" fomat error!";}},bindUI:function(){var a=this,b=a.get("autoFit"),c=a.get("store");a._bindHeaderEvent();a._bindBodyEvent();a._bindItemsEvent();b&&a._bindAutoFit();c&&(c.on("load",function(b){a.onLoad(b)}),c.on("add",function(b){a.onAdd(b)}),c.on("remove",function(b){a.onRemove(b)}),c.on("update",function(b){a.onUpdate(b)}))},addColumn:function(b,c){var d=this.get("header");d?b=d.addColumn(b,c):(b=new a(b),this.get("columns").splice(c,0,b));return b},clearData:function(){this.clearItems()},getRecords:function(){return this.getItems()},findColumn:function(a){var b=this.get("header");return e.isNumber(a)?b.getColumnByIndex(a):b.getColumnById(a)},findColumnByField:function(a){return this.get("header").getColumn(function(b){return b.get("dataIndex")===a})},findCell:function(a,b){var c;return(c=b instanceof h?b:this.findRow(b))?c.find(".grid-td-"+a):null},findRow:function(a){return h(this.findElement(a))},removeColumn:function(a){this.get("header").removeColumn(a)},showData:function(a){this.set("items",a)},resetColumns:function(){var a=this.get("store");this.resetHeaderRow();if(a)this.onLoad()},_bindScrollEvent:function(){var a=this,b=a.get("el").find("."+k),c=a.get("header");b.on("scroll",function(){var d=b.scrollLeft(),e=b.scrollTop();c.scrollTo({left:d,top:e});a.fire("scroll",{scrollLeft:d,scrollTop:e,bodyWidth:b.width(),bodyHeight:b.height()})})},_bindHeaderEvent:function(){var a=this,b=a.get("header"),c=a.get("store");b.on("afterWidthChange",function(c){c=c.target;c!==b&&a.resetColumnsWidth(c)});b.on("afterSortStateChange",function(a){var b=a.target;a.newVal&&c&&c.sort(b.get("dataIndex"),b.get("sortState"))});b.on("afterVisibleChange",function(c){c=c.target;c!==b&&(a.setColumnVisible(c),a.fire("columnvisiblechange",{column:c}))});b.on("click",function(c){var d=c.target;d!==b&&a.fire("columnclick",{column:d,domTarget:c.domTarget})});b.on("add",function(b){a.get("rendered")&&(a.fire("columnadd",{column:b.column,index:b.index}),a.resetColumns())});b.on("remove",function(b){a.get("rendered")&&(a.resetColumns(),a.fire("columnremoved",{column:b.column,index:b.index}))})},_bindBodyEvent:function(){this._bindScrollEvent()},_bindItemsEvent:function(){function a(a){return{record:a.item,row:a.domTarget,domTarget:a.domTarget}}var b=this;b.get("store");b.on("itemsshow",function(){b.fire("aftershow")});b.on("itemsclear",function(){b.fire("clear")});b.on("itemclick",function(a){var c=a.domTarget,d=a.item,e=h(c).closest("."+q),f=h(c).closest("."+u),g;e.length&&(g=b.fire("cellclick",{record:d,row:f[0],cell:e[0],field:e.attr("data-column-field"),domTarget:c,domEvent:a.domEvent}));return!1===g?g:b.fire("rowclick",{record:d,row:f[0],domTarget:c})});b.on("itemunselected",function(c){b.fire("rowunselected",a(c))});b.on("itemselected",function(c){b.fire("rowselected",a(c))});b.on("itemrendered",function(c){b.fire("rowcreated",a(c))});b.on("itemremoved",function(c){b.fire("rowremoved",a(c))});b.on("itemupdated",function(c){b.fire("rowupdated",a(c))})},_bindAutoFit:function(){var a=this,b;h(window).on("resize",function(){(function(){clearTimeout(b);b=setTimeout(function(){a._autoFit(x)},100);a.set("handler",b)})()})},_getInnerWidth:function(a){a=a||this.get("width");e.isNumber(a)&&(a-=2);return a},_initHeader:function(){var a=this.get("header"),c=this.get("el").find("."+f);a||(a=(new b({columns:this.get("columns"),tableCls:this.get("tableCls"),width:this._getInnerWidth(),render:c,parent:this})).render(),this.set("header",a))},_initBars:function(){var a=this.get("bbar"),b=this.get("tbar");this._initBar(a,p,"bbar");this._initBar(b,t,"tbar")},_initBar:function(a,b,d){a&&(a.xclass||a instanceof c.Controller||(a.xclass="toolbar",a.elCls=r,a.pagingBar&&(a=this.get("store"),a={xclass:"pagingbar",store:a,pageSize:a.pageSize},!0!==a.pagingBar&&e.merge(null,a.pagingBar))),a.xclass&&(b=this.get("el").find("."+b),b.show(),a.render=b,a.elTagName="div",a.autoRender=!0,a=this.addChild(a)),this.set(d,a));return a},_uiSetWidth:function(a){this.get("el").width(a);this.setBodyWidth(this._getInnerWidth(a));this.get("el").addClass(l);this.get("rendered")&&(g(a)?this.get("header").set("width","100%"):this.get("header").set("width",this._getInnerWidth(a)));this.setTableWidth()},_uiSetHeight:function(a,b){var c=this.get("header");this.get("el").height(a);this.get("el").addClass(n);this.setBodyHeight(a);this.get("rendered")&&c.setTableWidth()},resetColumnsWidth:function(a,b){var c=this.get("headerRowEl"),c=this.findCell(a.get("id"),c);b=b||a.get("width");c&&c.width(b);this.setTableWidth()},setTableWidth:function(a){if(!a&&g(this.get("width")))this.get("tableEl").width("100%");else{var b=this._getInnerWidth(),c=this.get("height"),d=this.get("tableEl");this.get("headerRowEl");if(!g(a)){a=a||this._getColumnsWidth();if(!b)return;b>=a&&(a=b,c&&(a=b-17))}d.width(a)}},setBodyWidth:function(a){var b=this.get("bodyEl");a=a||this._getInnerWidth();b.width(a)},setBodyHeight:function(a){var b=this.get("bodyEl"),c=a;a=b.siblings();e.each(a,function(a){"none"!==h(a).css("display")&&(c-=h(a).outerHeight())});b.height(c)},setColumnVisible:function(a){var b=!a.get("visible");a=a.get("id");var c=this.get("tbodyEl");a=h(".grid-td-"+a,c);b?a.hide():a.show()},updateItem:function(a){var b=this,c=b.getItems(),d=e.Array.indexOf(a,c),c=b._getColumns(),f=null;if(0<=d)return f=b.findElement(a),e.each(c,function(c){var e=b.findCell(c.get("id"),h(f));c=b._getCellText(c,a,d);e.html('\x3cdiv class\x3d"'+v+'"\x3e'+c+"\x3c/div\x3e")}),f},showEmptyText:function(){var a=this.get("bodyEl"),b=this.get("emptyDataTpl"),c=this.get("emptyEl");c&&c.remove();c=h(b).appendTo(a);this.set("emptyEl",c)},clearEmptyText:function(){var a=this.get("emptyEl");a&&a.remove()},_getColumnsWidth:function(){var a=this.get("columns"),b=0;e.each(a,function(a){a.get("visible")&&(b+=a.get("el").outerWidth())});return b},_uiSetInnerBorder:function(a){var b=this.get("el");a?b.addClass(m):b.removeClass(m)},_autoFit:function(){h(window).width();var a=this.get("el").parent();this.set("width",a.width()-1)},onAdd:function(a){var b=this.get("store"),c=a.record;0==this.getCount()?this.setItems(b.getResult()):this.addItemToView(c,a.index)},onRemove:function(a){this.removeItem(a.record)},onUpdate:function(a){this.updateItem(a.record)},onLocalSort:function(a){if(this.get("frontSortable"))this.sort(a.field,a.direction);else this.onLoad(a)},onLoad:function(){var a=this.get("store"),b=a.getResult();this.set("items",b);this.get("emptyDataTpl")&&(a&&0==a.getCount()?this.showEmptyText():this.clearEmptyText())}},{ATTRS:{store:{value:{}},header:{},bbar:{},itemCls:{value:u},columns:{value:[]},items:{},emptyDataTpl:{},headerRowTpl:{value:'\x3ctr class\x3d"'+d+'grid-header-row"\x3e{cellsTpl}\x3c/tr\x3e'},headerCellTpl:{value:'\x3ctd class\x3d"{hideCls} grid-td-{id}" style\x3d"width: {width}; height: 0;"\x3e\x3c/td\x3e'},rowTpl:{value:'\x3ctr class\x3d"'+u+' {oddCls}"\x3e{cellsTpl}\x3c/tr\x3e'},cellTpl:{value:'\x3ctd  class\x3d"{elCls} {hideCls} '+q+' grid-td-{id}" data-column-id\x3d"{id}" data-column-field \x3d "{dataIndex}" \x3e\x3cdiv class\x3d"'+v+'" \x3e{cellText}\x3c/div\x3e\x3c/td\x3e'},events:{value:{aftershow:!1,clear:!1,cellclick:!1,columnclick:!1,rowclick:!1,rowcreated:!1,rowremoved:!1,rowselected:!1,rowunselected:!1,scroll:!1}},tbar:{},tableCls:{sync:!1,value:d+"grid-table"},tableTpl:{value:'\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" \x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e'},tpl:{value:'\x3cdiv class\x3d"'+t+'" style\x3d"display:none"\x3e\x3c/div\x3e\x3cdiv class\x3d"'+f+'"\x3e\x3c/div\x3e\x3cdiv class\x3d"'+k+'"\x3e\x3c/div\x3e\x3cdiv style\x3d"display:none" class\x3d"'+p+'"\x3e\x3c/div\x3e'},innerBorder:{sync:!1,value:!0},useEmptyCell:{value:!0},useHeaderRow:{value:!0},autoFit:{value:!0}}},{xclass:"grid"});e.Grid.Grid=x})(window.BUI,jQuery);(function(e,h){function g(b){return 10>b?"0"+b:b}var c={dateRenderer:function(b){if(!b)return"";if(e.isString(b))return b;var a=null;try{a=new Date(b)}catch(d){return""}return a&&a.getFullYear?a.getFullYear()+"-"+g(a.getMonth()+1)+"-"+g(a.getDate()):""},datetimeRenderer:function(b){if(!b)return"";if(e.isString(b))return b;var a=null;try{a=new Date(b)}catch(d){return""}return a&&a.getFullYear?a.getFullYear()+"-"+g(a.getMonth()+1)+"-"+g(a.getDate())+" "+g(a.getHours())+":"+g(a.getMinutes())+":"+g(a.getSeconds()):""},cutTextRenderer:function(b){return function(a){a=a||"";return a.toString().length>b?a.toString().substring(0,b)+"...":a}},enumRenderer:function(b){return function(a){return b[a]||""}},multipleItemsRenderer:function(b){var a=c.enumRenderer(b);return function(b){var c=[];if(!b)return"";e.isArray(b)||(b=b.toString().split(","));h.each(b,function(b,d){c.push(a(d))});return c.join(",")}},moneyCentRenderer:function(b){e.isString(b)&&(b=parseFloat(b));return h.isNumberic(b)?(.01*b).toFixed(2):b}};e.Grid.Format=c})(window.BUI,jQuery);(function(e,h){function g(a){g.superclass.constructor.call(this,a)}e.Grid.Plugins={};var c=e.prefix,b=c+"grid-checkBox";e.extend(g,e.Base);g.ATTRS={width:{value:40},column:{},cellInner:{value:'\x3cdiv class\x3d"'+b+'-container"\x3e\x3cspan class\x3d"bui-grid-checkbox"\x3e\x3c/span\x3e\x3c/div\x3e'}};e.augment(g,{createDom:function(a){var b={title:"",width:this.get("width"),fixed:!0,resizable:!1,sortable:!1,tpl:'\x3cdiv class\x3d"'+c+'grid-hd-inner"\x3e'+this.get("cellInner")+"",cellTpl:this.get("cellInner")},b=a.addColumn(b,0);a.set("multipleSelect",!0);this.set("column",b)},bindUI:function(a){var b=this.get("column").get("el");b.find(".bui-grid-checkbox").on("click",function(){b.hasClass("checked")?(a.clearSelection(),b.removeClass("checked")):(a.setAllSelection(),b.addClass("checked"))});a.on("rowunselected",function(a){b.removeClass("checked")});a.on("clear",function(){b.removeClass("checked")})}});e.Grid.Plugins.CheckSelection=g})(window.BUI,jQuery);(function(e,h){function g(c){g.superclass.constructor.call(this,c)}e.extend(g,e.Base);g.ATTRS={width:{value:40},column:{}};e.augment(g,{createDom:function(c){var b={title:"",width:this.get("width"),fixed:!0,resizable:!1,sortable:!1,renderer:function(a,b,c){return c+1},elCls:"bui-grid-rownumber"};c=c.addColumn(b,0);this.set("column",c)}});e.Grid.Plugins.RowNumber=g})(window.BUI,jQuery);(function(e,h){var g=e.prefix,c=g+"grid-column-group",b=g+"grid-group-header",a=g+"grid-db-hd",d=function(a){d.superclass.constructor.call(this,a)};d.ATTRS={groups:{value:[]},columnTpl:{value:'\x3cth class\x3d"bui-grid-hd center" colspan\x3d"{colspan}"\x3e\x3cdiv class\x3d"'+g+'grid-hd-inner"\x3e\x3cspan class\x3d"'+(g+"grid-hd-title")+'"\x3e{title}\x3c/span\x3e\x3c/div\x3e\x3c/th\x3e'}};e.extend(d,e.Base);e.augment(d,{renderUI:function(d){var f=this,g=f.get("groups");d=d.get("header");var n=d.get("el"),m=d.get("children"),t=h('\x3ctr class\x3d"'+c+'"\x3e\x3c/tr\x3e').prependTo(n.find("thead"));n.addClass(b);e.each(g,function(a){var b=f._getGroupTpl(a),b=h(b).appendTo(t);a.el=b;for(b=a.from;b<=a.to;b++){var c=m[b];c&&c.set("group",a)}});var p;for(d=m.length-1;0<=d;d--){var n=m[d],r=n.get("group");r?p=r.el:(n=n.get("el"),n.addClass(a),n.attr("rowspan",2),p?n.insertBefore(p):n.appendTo(t),p=n)}0!==g[0].from&&(g=m[g[0].from])&&g.get("el").css("border-left-width",1)},_getGroupTpl:function(a){var b=this.get("columnTpl");return e.substitute(b,{colspan:a.to-a.from+1,title:a.title})}});e.Grid.Plugins.ColumnGroup=d})(window.BUI,jQuery);(function(e,h){var g=e.prefix+"grid-cascade",c=g+"-expand",b=g+"-row",a=g+"-cell",d=g+"-collapse",f=function(a){f.superclass.constructor.call(this,a)};e.extend(f,e.Base);f.ATTRS={width:{value:40},cellInner:{value:'\x3cspan class\x3d"'+g+'"\x3e\x3ci class\x3d"'+g+'-icon"\x3e\x3c/i\x3e\x3c/span\x3e'},rowTpl:{value:'\x3ctr class\x3d"'+b+'"\x3e\x3ctd class\x3d"'+a+'"\x3e\x3c/td\x3e\x3c/tr\x3e'},renderer:{},events:["expand","collapse","removed"]};e.augment(f,{initializer:function(a){var b={title:"",elCls:"center",width:this.get("width"),resizable:!1,fixed:!0,sortable:!1,cellTpl:this.get("cellInner")};a.addColumn(b,0);this.set("grid",a)},bindUI:function(a){var b=this;a.on("cellclick",function(a){var d=h(a.domTarget).closest("."+g);d.length&&(d.hasClass(c)?b._onCollapse(a.record,a.row,d):b._onExpand(a.record,a.row,d))});a.on("columnvisiblechange",function(){b._resetColspan()});a.on("rowremoved",function(a){b.remove(a.record)});a.on("clear",function(){b.removeAll()})},expandAll:function(){var a=this,b=a.get("grid").getRecords();h.each(b,function(b,c){a.expand(c)})},expand:function(a){var b=this.get("grid").findRow(a);b&&this._onExpand(a,b)},collapse:function(a){var b=this.get("grid").findRow(a);b&&this._onCollapse(a,b)},removeAll:function(){var a=this;a._getAllCascadeRows().each(function(b,c){a._removeCascadeRow(c)})},remove:function(a){(a=this._findCascadeRow(a))&&this._removeCascadeRow(a)},collapseAll:function(){var a=this,b=a.get("grid").getRecords();h.each(b,function(b,c){a.collapse(c)})},_getRowRecord:function(a){return h(a).data("data-record")},_removeCascadeRow:function(a){this.fire("removed",{record:h(a).data("data-record"),row:a});h(a).remove()},_findCascadeRow:function(a){var b=this,c=b._getAllCascadeRows(),d=null;h.each(c,function(c,e){if(b._getRowRecord(e)===a)return d=e,!1});return d},_getAllCascadeRows:function(){return this.get("grid").get("el").find("."+b)},_getCascadeRow:function(a){a=h(a).next();return a.hasClass(b)?a:null},_getRowContent:function(a){var b=this.get("renderer");return b?b(a):""},_createCascadeRow:function(b,c){var d=this.get("rowTpl"),e=this._getRowContent(b),d=h(d).insertAfter(c);d.find("."+a).append(h(e));d.data("data-record",b);return d},_onExpand:function(a,b,e){var f=this._getCascadeRow(b);this._getColumnCount(b);e=e||h(b).find("."+g);e.addClass(c);f&&f.length||(f=this._createCascadeRow(a,b));h(f).removeClass(d);this._setColSpan(f,b);this.fire("expand",{record:a,row:f[0]})},_onCollapse:function(a,b,e){var f=this._getCascadeRow(b);e=e||h(b).find("."+g);e.removeClass(c);f&&f.length&&(h(f).addClass(d),this.fire("collapse",{record:a,row:f[0]}))},_getColumnCount:function(a){return h(a).children().filter(function(){return"none"!==h(this).css("display")}).length},_setColSpan:function(b,c){c=c||h(b).prev();var d=this._getColumnCount(c);h(b).find("."+a).attr("colspan",d)},_resetColspan:function(){var a=this,b=a._getAllCascadeRows();h.each(b,function(b,c){a._setColSpan(c)})},destructor:function(){this.removeAll();this.off();this.clearAttrVals()}});e.Grid.Plugins.Cascade=f})(window.BUI,jQuery);(function(e,h){function g(c){g.superclass.constructor.call(this,c)}e.extend(g,e.Base);g.ATTRS={showError:{value:!0},record:{},curEditor:{},fields:{shared:!1,value:[]},triggerSelected:{value:!0}};e.augment(g,{initializer:function(c){this.set("grid",c)},renderUI:function(){var c=this.get("grid");this.initEditors();this._initGridEvent(c)},initEditors:function(){var c=this,b=[],a=c.get("grid").get("columns");e.each(a,function(a){var d=c.getFieldConfig(a);d&&(d.name=a.get("dataIndex"),d.colId=a.get("id"),d.width=a.get("width"),d.displayfield=a.get("displayfield"),d.forceFit=!0,d.validator&&(d.validator=c.wrapValidator(d.validator)),b.push(d))});c.set("fields",b)},acceptEidtor:function(c){var b=this.get("grid").get("store"),a=this.get("record");this.updateRecord(b,a,c);c.destroy&&c.destroy();this.set("curEditor",null)},_getCurEditor:function(){return this.get("curEditor")},_initGridEvent:function(c){},getFieldConfig:function(c){return c.get("editor")},wrapValidator:function(c){var b=this;return function(a){var d=b.get("record");return c(a,d)}},onColumnVisibleChange:function(c){},getEditorConstructor:function(c){c.xclass||(c.xclass=c.xtype?"form-field-"+c.xtype:"form-field");return e.Component.create(c,this)},getEditor:function(c){},getEditValue:function(c){},showEditor:function(c,b){},beforeShowEditor:function(c,b){},isValid:function(){var c=this.get("curEditor");if(c){var b=c.getControlValue(),b=c.getValidError(b);c.get("name");if(e.isNullOrEmpty(b))return!0;this.showError(b,c);return!1}return!0},showError:function(c,b){e.Message.Alert(c,function(){b.focus()},"error")},updateRecord:function(c,b,a){},cancelRecord:function(c,b){},cancel:function(){var c=this._getCurEditor();if(c){var b=this.get("record");this.cancelRecord(b);c.destroy&&c.destroy();this.set("curEditor",null)}},destructor:function(){var c=this.get("editors");e.each(c,function(b){b.destroy&&b.destroy()});this.off();this.clearAttrVals()}});e.Grid.Plugins.Editing=g})(window.BUI,jQuery);(function(e,h){var g=function(c){g.superclass.constructor.call(this,c)};e.extend(g,e.Grid.Plugins.Editing);e.augment(g,{getEditor:function(c){if(!c.field)return null;var b=this,a=b.get("fields"),d=null;e.each(a,function(a){if(a.name===c.field)return d=b.getEditorConstructor(a),!1});return d},resetWidth:function(c,b){c.set("width",b)},_initGridEvent:function(c){var b=this;c.on("cellclick",function(a){var c;if(c=b._getCurEditor())if(c.get("render")[0]!=a.cell&&c.isValid())b.acceptEidtor(c);else return!1;if(c=b.getEditor(a))if(b.showEditor(c,a),!b.get("triggerSelected"))return!1})},showEditor:function(c,b){var a=this.getEditValue(b);this.beforeShowEditor(c,b);h(b.cell).html("");this.set("record",b.record);this.fire("beforeeditorshow",{editor:c,record:b.record});c.set("render",h(b.cell));c.set("value",a);c.render();this.set("curEditor",c);this.fire("editorshow",{editor:c,record:b.record})},updateRecord:function(c,b,a){var d=a.getControlValue();a=a.get("name");var f=b[a],d=e.isDate(d)?d.getTime():d;f!==d?c.setValue(b,a,d):this.get("grid").updateItem(b)},cancelRecord:function(c){this.get("grid").updateItem(c)},getEditValue:function(c){return c.record&&c.field?(c=c.record[c.field],null==c?"":c):""}});e.Grid.Plugins.CellEditing=g})(window.BUI,jQuery);(function(e,h){var g=function(c){g.superclass.constructor.call(this,c)};e.extend(g,e.Grid.Plugins.Editing);e.augment(g,{updateRecord:function(c,b,a){var d={};e.each(a.children,function(a,b){var c=a.get("name"),f=a.getControlValue()||"";if(!d[c])d[c]=f;else if(e.isArray(d[c])&&null!=f)d[c].push(f);else if(null!=f){var g=[d[c]];g.push(f);d[c]=g}});e.each(d,function(a,b){e.isDate(a)&&(d[b]=a.getTime())});e.mix(b,d);c.update(b)},_initGridEvent:function(c){var b=this;c.on("rowclick",function(a){var c;if(c=b._getCurEditor())if(c.row!=a.row&&b.isValid())b.acceptEidtor(c);else return!1;if(c=b.getEditor(a))if(b.showEditor(c,a),!b.get("triggerSelected"))return!1})},showEditor:function(c,b){this.getEditValue(b);this.beforeShowEditor(c,b);this.set("record",b.record);this.fire("beforeeditorshow",{editor:c,record:b.record});for(var a=0;a<c.children.length;a++)c.children[a].get("render").html(""),c.children[a].render();this.set("curEditor",c);this.fire("editorshow",{editor:c,record:b.record})},cancelRecord:function(c){this.get("grid").updateItem(c)},getEditor:function(c){for(var b=this.get("fields"),a=[],d=h(c.row).children(),f=0;f<b.length;f++)for(var g=0;g<d.length;g++){var l=h(d[g]);if(b[f].name==l.attr("data-column-field")){b[f].render=l;b[f].value=c.record[b[f].name];e.isNullOrEmpty(b[f].displayfield)||(b[f].text=c.record[b[f].displayfield]);g=this.getEditorConstructor(b[f]);a.push(g);break}}return{row:c.row,children:a,destroy:function(){e.each(this.children,function(a,b){a.destroy&&a.destroy()})}}},getEditValue:function(c){return c.record},isValid:function(){var c=this.get("curEditor");if(c){var b=!0;e.each(c.children,function(a){if(!a.get("disabled")&&!a.isValid())return b=!1});return b}return!0}});e.Grid.Plugins.RowEditing=g})(window.BUI,jQuery);